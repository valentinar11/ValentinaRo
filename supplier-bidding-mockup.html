<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNOPS Supplier Portal - Tender Management</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/primeicons@7.0.0/primeicons.css">
<style>
:root {
/* UNOPS Preset Primary Colors */
--primary-50: #e6f7ff;
--primary-100: #bae7ff;
--primary-200: #7dd3fc;
--primary-300: #38bdf8;
--primary-400: #0ea5e9;
--primary-500: #0092D1;
--primary-600: #0284c7;
--primary-700: #0369a1;
--surface-0: #ffffff;
--surface-50: #f5f8fb;
--surface-100: #ebf1f8;
--surface-200: #dde8f2;
--surface-300: #cfdfec;
--surface-400: #b8c9d9;
--surface-600: #95a7ba;
--surface-800: #596170;
--surface-900: #3b3e4a;
--success-500: #4c9f38;
--success-50: #d2e7cd;
--info-400: #0092d1;
--info-50: #bfe4f4;
--warning-500: #e85c0e;
--warning-50: #f9d6c3;
--danger-500: #da291c;
--danger-50: #f6cac6;
--text-primary: var(--surface-900);
--text-secondary: var(--surface-800);
--text-muted: var(--surface-600);
--spacing-xs: 6px;
--spacing-sm: 12px;
--spacing-md: 20px;
--spacing-lg: 28px;
--spacing-xl: 36px;
--spacing-2xl: 48px;
--radius-sm: 4px;
--radius-md: 6px;
--radius-lg: 8px;
--shadow-card: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.06);
--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
--shadow-md: 0 4px 6px rgba(0, 0, 0, 0.08);
--shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
}

* {
box-sizing: border-box;
margin: 0;
padding: 0;
}

body {
font-family: 'Lato', 'Noto Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
background: var(--surface-50);
color: var(--text-primary);
line-height: 1.5;
min-height: 100vh;
}

.header {
background: var(--surface-0);
border-bottom: 1px solid var(--surface-200);
position: sticky;
top: 0;
z-index: 100;
}

.header-top {
display: flex;
align-items: center;
justify-content: space-between;
padding: var(--spacing-md) var(--spacing-xl);
}

.logo-container {
display: flex;
align-items: center;
gap: var(--spacing-md);
}

.logo {
font-weight: 700;
font-size: 20px;
letter-spacing: 0.12em;
color: var(--primary-400);
}

.portal-badge {
background: var(--primary-400);
color: white;
font-size: 12px;
font-weight: 600;
padding: 4px 12px;
border-radius: 4px;
text-transform: uppercase;
letter-spacing: 0.05em;
}

.user-menu {
display: flex;
align-items: center;
gap: var(--spacing-md);
}

.user-info {
text-align: right;
}

.user-role {
font-size: 12px;
color: var(--text-muted);
}

.user-name {
font-size: 14px;
font-weight: 500;
color: var(--text-primary);
}

.user-avatar {
width: 36px;
height: 36px;
border-radius: 50%;
background: var(--primary-100);
display: flex;
align-items: center;
justify-content: center;
font-weight: 600;
color: var(--primary-600);
cursor: pointer;
}

.header-icons {
display: flex;
align-items: center;
gap: var(--spacing-sm);
}

.header-icon-btn {
width: 36px;
height: 36px;
border-radius: 50%;
background: transparent;
border: none;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.2s;
color: var(--text-secondary);
font-size: 18px;
position: relative;
}

.header-icon-btn:hover {
background: var(--surface-100);
color: var(--primary-500);
}

.header-icon-btn.ai-btn {
background: linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%);
color: white;
}

.header-icon-btn.ai-btn:hover {
transform: scale(1.05);
box-shadow: 0 2px 8px rgba(99, 102, 241, 0.4);
}

.notification-badge-old {
position: absolute;
top: 2px;
right: 2px;
width: 8px;
height: 8px;
background: var(--danger-500);
border-radius: 50%;
border: 2px solid var(--surface-0);
}

/* Header Actions - New Styles */
.header-actions {
display: flex;
align-items: center;
gap: var(--spacing-md);
margin-left: auto;
margin-right: var(--spacing-lg);
}

.header-action-btn {
display: flex;
align-items: center;
justify-content: center;
padding: 8px;
background: transparent;
border: none;
border-radius: var(--radius-md);
cursor: pointer;
transition: all 0.2s ease;
position: relative;
gap: 6px;
}

.header-action-btn:hover {
background: var(--surface-100);
transform: scale(1.1);
}

.header-action-btn:focus {
outline: 2px solid var(--primary-400);
outline-offset: 2px;
}

.header-action-btn i {
font-size: 20px;
color: var(--text-muted);
transition: color 0.2s ease;
}

.header-action-btn:hover i {
color: var(--primary-500);
}

.header-action-label {
display: none;
}

.notification-badge {
position: absolute;
top: -4px;
right: -4px;
background: var(--danger-500);
color: white;
font-size: 10px;
font-weight: 700;
min-width: 18px;
height: 18px;
border-radius: 9px;
display: flex;
align-items: center;
justify-content: center;
padding: 0 5px;
border: 2px solid white;
}

.ai-assistant-btn {
background: transparent;
}

.ai-assistant-btn:hover {
background: rgba(139, 92, 246, 0.1);
}

.ai-assistant-btn:hover .ai-icon-wrapper {
transform: scale(1.1);
box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4);
}

.ai-icon-wrapper {
    width: 24px;
    height: 24px;
    background: linear-gradient(135deg, #8b5cf6, #6366f1);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}
.ai-icon-wrapper i { font-size: 14px; color: white !important; }

.ai-badge {
    position: absolute;
    top: -4px;
    right: -8px;
    background: linear-gradient(135deg, #f59e0b, #ef4444);
    color: white;
    font-size: 8px;
    font-weight: 700;
    padding: 2px 5px;
    border-radius: 6px;
    text-transform: uppercase;
}

.language-selector {
min-width: auto;
}

.lang-flag {
font-size: 16px;
}

.notification-btn i {
color: var(--text-muted);
}

.notification-btn:hover i {
color: var(--primary-500);
}

/* Accessibility Panel Styles */
.accessibility-panel {
position: fixed;
top: 70px;
right: 20px;
width: 320px;
background: var(--surface-0);
border-radius: var(--radius-lg);
box-shadow: var(--shadow-lg);
z-index: 10000;
display: none;
border: 1px solid var(--surface-200);
}

.accessibility-panel.open {
display: block;
animation: modalSlideIn 0.3s ease-out;
}

.accessibility-panel-header {
padding: var(--spacing-lg);
background: var(--surface-50);
border-bottom: 1px solid var(--surface-200);
border-radius: var(--radius-lg) var(--radius-lg) 0 0;
display: flex;
justify-content: space-between;
align-items: center;
}

.accessibility-option {
display: flex;
align-items: center;
justify-content: space-between;
padding: var(--spacing-md);
border-bottom: 1px solid var(--surface-100);
}

.accessibility-option:last-child {
border-bottom: none;
}

.accessibility-toggle {
width: 44px;
height: 24px;
background: var(--surface-300);
border-radius: 12px;
position: relative;
cursor: pointer;
transition: background 0.2s;
}

.accessibility-toggle.active {
background: var(--primary-500);
}

.accessibility-toggle::after {
content: '';
position: absolute;
top: 2px;
left: 2px;
width: 20px;
height: 20px;
background: white;
border-radius: 50%;
transition: transform 0.2s;
box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.accessibility-toggle.active::after {
transform: translateX(20px);
}

.app-container {
display: flex;
min-height: calc(100vh - 65px);
}

/* ==========================================================================
   SIDEBAR (COLLAPSIBLE) - SUPPLIER THEME
   ========================================================================== */
.sidebar {
    width: 280px;
    min-width: 280px;
    max-width: 280px;
    background-color: #0192D1;
    color: white;
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
    transition: width 0.3s ease, min-width 0.3s ease, max-width 0.3s ease;
    position: relative;
    z-index: 50;
}
.sidebar.collapsed {
    width: 60px;
    min-width: 60px;
    max-width: 60px;
}
.sidebar-toggle {
    position: absolute;
    top: 10px;
    right: -15px;
    width: 30px;
    height: 30px;
    background: var(--primary-400);
    border: 2px solid white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    color: white;
    font-size: 14px;
    transition: transform 0.3s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}
.sidebar.collapsed .sidebar-toggle {
    transform: rotate(180deg);
}
.sidebar.collapsed .menu-section-title,
.sidebar.collapsed .menu-item span:not(.menu-icon),
.sidebar.collapsed .menu-group-header span:first-child,
.sidebar.collapsed .menu-group-header i.pi-chevron-down {
    display: none;
}
.sidebar.collapsed .menu-group-header {
    justify-content: center;
    padding: 8px;
}
.sidebar.collapsed .menu-item {
    justify-content: center;
    padding: 12px;
}
.sidebar-menu { flex: 1; padding: 16px 0; overflow-y: auto; }
.menu-section { margin-bottom: var(--spacing-sm); }
.menu-section-title {
    padding: 8px 20px 12px 20px;
    font-size: 11px;
    font-weight: 700;
    color: rgba(255,255,255,0.5);
    font-family: 'Lato', sans-serif;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}
.menu-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    font-size: 14px;
    color: white;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    border-left: 3px solid transparent;
}
.menu-item:hover { background: rgba(255,255,255,0.1); }
.menu-item.active {
    background: rgba(255,255,255,0.15);
    border-left-color: white;
    font-weight: 600;
}
.menu-item.disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
.menu-icon { font-size: 16px; opacity: 0.9; width: 20px; text-align: center; }

/* ==========================================================================
   OFFER TABS - Sub-navigation for Main Offer / Alternate Offers
   ========================================================================== */
.offer-tabs-container {
    background: linear-gradient(135deg, var(--surface-50) 0%, var(--surface-100) 100%);
    border: 1px solid var(--surface-200);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.offer-tabs-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-sm);
}

.offer-tabs-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 6px;
}

.offer-tabs {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
    flex-direction: row;
}

.offer-tab {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: var(--surface-0);
    border: 2px solid var(--surface-300);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
}

.offer-tab:hover {
    border-color: var(--primary-300);
    background: var(--primary-50);
    color: var(--primary-600);
}

.offer-tab.active {
    border-color: var(--primary-500);
    background: var(--primary-500);
    color: white;
    box-shadow: 0 2px 8px rgba(0, 146, 209, 0.3);
}

.offer-tab.main-offer {
    border-color: var(--primary-400);
}

.offer-tab.main-offer.active {
    background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%);
}

.offer-tab.alternate-offer {
    border-color: var(--warning-300);
}

.offer-tab.alternate-offer:hover {
    border-color: var(--warning-400);
    background: var(--warning-50);
    color: var(--warning-700);
}

.offer-tab.alternate-offer.active {
    background: linear-gradient(135deg, var(--warning-500) 0%, #f57c00 100%);
    border-color: var(--warning-500);
}

.offer-tab-badge {
    font-size: 9px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 8px;
    text-transform: uppercase;
}

.offer-tab.main-offer .offer-tab-badge {
    background: rgba(255,255,255,0.2);
}

.offer-tab.alternate-offer .offer-tab-badge {
    background: rgba(255,255,255,0.2);
}

.offer-tab-remove {
    margin-left: 4px;
    padding: 2px;
    border-radius: 50%;
    background: rgba(255,255,255,0.3);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.offer-tab-remove:hover {
    background: var(--danger-500);
    color: white;
}

.add-alternate-offer-global-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: linear-gradient(135deg, var(--warning-100) 0%, var(--warning-50) 100%);
    border: 2px dashed var(--warning-400);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 11px;
    font-weight: 600;
    color: var(--warning-700);
}

.add-alternate-offer-global-btn:hover {
    background: linear-gradient(135deg, var(--warning-200) 0%, var(--warning-100) 100%);
    border-color: var(--warning-500);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(232, 92, 14, 0.2);
}

.add-alternate-offer-global-btn i {
    font-size: 12px;
}

.offer-content-wrapper {
    position: relative;
}

.offer-content-panel {
    display: none;
}

.offer-content-panel.active {
    display: block;
    animation: offerFadeIn 0.3s ease;
}

@keyframes offerFadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInRight {
    from { opacity: 0; transform: translateX(100px); }
    to { opacity: 1; transform: translateX(0); }
}

@keyframes slideOutRight {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(100px); }
}

.alternate-offer-banner {
    background: linear-gradient(135deg, var(--warning-50) 0%, var(--warning-100) 100%);
    border: 1px solid var(--warning-300);
    border-left: 4px solid var(--warning-500);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    margin-bottom: var(--spacing-md);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.alternate-offer-banner-icon {
    font-size: 20px;
}

.alternate-offer-banner-content {
    flex: 1;
}

.alternate-offer-banner-title {
    font-weight: 600;
    color: var(--warning-700);
    font-size: 13px;
}

.alternate-offer-banner-desc {
    font-size: 11px;
    color: var(--warning-600);
    margin-top: 2px;
}
.menu-group {
    margin-bottom: var(--spacing-xs);
}
.menu-group-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 20px;
    font-size: 13px;
    font-weight: 600;
    color: rgba(255,255,255,0.7);
    cursor: pointer;
    transition: all 0.2s;
}
.menu-group-header:hover {
    color: white;
    background: rgba(255,255,255,0.05);
}
.menu-group-header i {
    font-size: 14px;
    transition: transform 0.2s;
}
.menu-group.collapsed .menu-group-header i.pi-chevron-down {
    transform: rotate(-90deg);
}
.menu-group.collapsed .menu-group-items {
    display: none;
}
.menu-group-items {
    padding-left: 12px;
}
.menu-group-items .menu-item {
    padding: 10px 20px 10px 28px;
    font-size: 13px;
    border-left: none;
}
.menu-group-items .menu-item.active {
    background: rgba(255,255,255,0.15);
    border-left: none;
    border-radius: 0 4px 4px 0;
    margin-right: 8px;
}
.menu-divider {
    height: 1px;
    background: rgba(255,255,255,0.15);
    margin: var(--spacing-md) 0;
}
.menu-badge {
    margin-left: auto;
    padding: 2px 8px;
    background: var(--danger-500);
    color: white;
    font-size: 11px;
    font-weight: 600;
    border-radius: 999px;
}

.main-area {
flex: 1;
display: flex;
flex-direction: column;
overflow: hidden;
}

.view-container {
flex: 1;
overflow-y: auto;
}

.view-section {
display: none;
}

.view-section.active {
display: block;
}

.main-content {
max-width: 1400px;
margin: 0 auto;
padding: var(--spacing-xl);
width: 100%;
}

.page-header {
margin-bottom: var(--spacing-lg);
display: flex;
justify-content: space-between;
align-items: center;
flex-wrap: wrap;
gap: var(--spacing-sm);
}

.page-title {
font-size: 22px;
font-weight: 600;
color: var(--text-primary);
margin-bottom: 4px;
display: flex;
align-items: center;
gap: 10px;
}

.page-title i {
color: var(--primary-500);
font-size: 24px;
}

.page-subtitle {
font-size: 13px;
color: var(--text-muted);
}

.stats-grid {
display: grid;
grid-template-columns: repeat(4, 1fr);
gap: var(--spacing-md);
margin-bottom: var(--spacing-xl);
}

@media (max-width: 1200px) {
.stats-grid {
grid-template-columns: repeat(2, 1fr);
}
}

@media (max-width: 600px) {
.stats-grid {
grid-template-columns: 1fr;
}
}

.stat-card {
background: var(--surface-0);
border-radius: var(--radius-md);
padding: var(--spacing-md);
box-shadow: var(--shadow-sm);
border: 1px solid var(--surface-200);
display: flex;
align-items: center;
gap: var(--spacing-md);
transition: all 0.2s ease;
}

.stat-card:hover {
box-shadow: var(--shadow-md);
border-color: var(--primary-200);
transform: translateY(-2px);
}

.stat-icon-wrapper {
width: 44px;
height: 44px;
border-radius: var(--radius-md);
display: flex;
align-items: center;
justify-content: center;
flex-shrink: 0;
}

.stat-icon-wrapper.total {
background: linear-gradient(135deg, var(--primary-100) 0%, var(--primary-50) 100%);
color: var(--primary-600);
}

.stat-icon-wrapper.progress {
background: linear-gradient(135deg, var(--warning-50) 0%, #fff5eb 100%);
color: var(--warning-500);
}

.stat-icon-wrapper.submitted {
background: linear-gradient(135deg, var(--info-50) 0%, #e6f7ff 100%);
color: var(--info-400);
}

.stat-icon-wrapper.awarded {
background: linear-gradient(135deg, var(--success-50) 0%, #e8f5e3 100%);
color: var(--success-500);
}

.stat-icon-wrapper i {
font-size: 20px;
}

.stat-content {
display: flex;
flex-direction: column;
min-width: 0;
}

.stat-value {
font-size: 24px;
font-weight: 700;
color: var(--text-primary);
line-height: 1.2;
}

.stat-label {
font-size: 13px;
color: var(--text-muted);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

.stat-icon {
font-size: 20px;
}

.card {
background: var(--surface-0);
border-radius: var(--radius-md);
padding: var(--spacing-lg);
box-shadow: var(--shadow-sm);
border: 1px solid var(--surface-200);
margin-bottom: var(--spacing-md);
}

.card-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: var(--spacing-md);
padding-bottom: var(--spacing-sm);
border-bottom: 1px solid var(--surface-200);
flex-wrap: wrap;
gap: var(--spacing-sm);
}

.card-title {
font-size: 16px;
font-weight: 600;
color: var(--text-primary);
display: flex;
align-items: center;
gap: 8px;
}

.card-title i {
color: var(--primary-500);
font-size: 18px;
}

.tender-table {
width: 100%;
border-collapse: collapse;
font-size: 13px;
}

.tender-table th,
.tender-table td {
padding: 12px 14px;
text-align: left;
border-bottom: 1px solid var(--surface-200);
}

.tender-table th {
background: var(--surface-50);
font-weight: 600;
color: var(--text-secondary);
font-size: 11px;
text-transform: uppercase;
letter-spacing: 0.05em;
}

.tender-table tbody tr {
cursor: pointer;
transition: all 0.2s ease;
}

.tender-table tbody tr:hover {
background: var(--surface-50);
}

.tender-ref {
font-weight: 600;
color: var(--primary-400);
margin-bottom: var(--spacing-xs);
font-size: 13px;
}

.tender-title-cell {
font-weight: 500;
color: var(--text-primary);
}

.tender-type-badge {
display: inline-block;
padding: 4px 10px;
border-radius: 999px;
font-size: 11px;
font-weight: 600;
text-transform: uppercase;
letter-spacing: 0.05em;
}

.tender-type-public {
background: var(--info-50);
color: var(--info-400);
}

.tender-type-limited {
background: var(--warning-50);
color: var(--warning-500);
}

.status-badge {
display: inline-block;
padding: 6px 12px;
border-radius: 999px;
font-size: 12px;
font-weight: 600;
}

.status-draft, .status-not-started {
background: var(--surface-200);
color: var(--text-secondary);
}

.status-interested {
background: var(--info-50);
color: var(--info-400);
}

.status-in-progress {
background: var(--warning-50);
color: var(--warning-500);
}

.status-submitted {
background: var(--success-50);
color: var(--success-500);
}

.status-open {
background: var(--success-50);
color: var(--success-500);
}

.status-evaluation {
background: var(--info-50);
color: var(--info-400);
}

.status-awarded {
background: var(--success-50);
color: var(--success-500);
}

.status-cancelled {
background: var(--danger-50);
color: var(--danger-500);
}

.status-not-awarded {
background: var(--surface-100);
color: var(--text-muted);
}

/* Document Download List */
.document-download-list {
display: flex;
flex-direction: column;
gap: var(--spacing-sm);
}

.document-download-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: var(--spacing-md);
background: var(--surface-50);
border: 1px solid var(--surface-200);
border-radius: var(--radius-md);
transition: all 0.2s;
}

.document-download-item:hover {
background: var(--surface-100);
border-color: var(--primary-200);
}

.document-info {
display: flex;
align-items: center;
gap: var(--spacing-md);
}

.document-icon {
font-size: 24px;
}

.document-name {
font-weight: 600;
font-size: 14px;
color: var(--text-primary);
margin-bottom: 2px;
}

.document-meta {
font-size: 12px;
color: var(--text-muted);
}

/* Amendment Cards */
.amendment-list {
display: flex;
flex-direction: column;
gap: 0;
}

.amendment-card {
background: var(--surface-0);
border: 1px solid var(--surface-200);
border-radius: var(--radius-sm);
padding: var(--spacing-sm) var(--spacing-md);
border-left: 3px solid var(--warning-500);
margin-bottom: 6px;
}

.amendment-card:last-child {
margin-bottom: 0;
}

.amendment-header-card {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: var(--spacing-sm);
}

.amendment-badge {
background: var(--warning-50);
color: var(--warning-600);
font-size: 10px;
font-weight: 600;
padding: 2px 8px;
border-radius: 3px;
}

.amendment-date-card {
font-size: 10px;
color: var(--text-muted);
}

.amendment-title {
font-weight: 600;
font-size: 12px;
color: var(--text-primary);
margin-bottom: 4px;
}

.amendment-description {
font-size: 11px;
color: var(--text-muted);
line-height: 1.5;
margin-bottom: 6px;
margin-bottom: var(--spacing-md);
}

.amendment-actions {
display: flex;
gap: 6px;
margin-top: 4px;
}

/* Collapsible Sections */
.collapsible-section {
border: 1px solid var(--surface-200);
border-radius: var(--radius-md);
overflow: hidden;
}

.section-header-collapsible {
display: flex;
justify-content: space-between;
align-items: center;
padding: 10px var(--spacing-md);
background: var(--surface-50);
cursor: pointer;
transition: background 0.2s;
}

.section-header-collapsible:hover {
background: var(--surface-100);
}

.section-collapse-icon {
font-size: 10px;
color: var(--text-muted);
transition: transform 0.3s ease;
}

.collapsible-section.collapsed .section-collapse-icon {
transform: rotate(-90deg);
}

.section-collapsible-content {
padding: var(--spacing-md);
transition: all 0.3s ease;
}

.collapsible-section.collapsed .section-collapsible-content {
display: none;
}

/* Document Actions */
.document-actions {
display: flex;
gap: var(--spacing-xs);
}

/* Submission Form List */
.submission-form-list {
display: flex;
flex-direction: column;
gap: var(--spacing-sm);
}

.submission-form-item {
  background: var(--surface-0);
border: 1px solid var(--surface-200);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-md);
}

.submission-form-item:hover {
  border-color: var(--primary-400);
  background: var(--primary-50);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  transform: translateY(-1px);
}

.submission-form-name {
font-weight: 600;
font-size: 13px;
color: var(--text-primary);
  display: flex;
  align-items: center;
}

.submission-form-name i {
  color: var(--primary-500);
  margin-right: 8px;
}

.submission-form-attachments {
display: flex;
align-items: center;
gap: 8px;
margin-top: 4px;
}

.attachment-tag {
font-size: 10px;
padding: 2px 6px;
background: var(--surface-100);
border: 1px solid var(--surface-200);
border-radius: 3px;
color: var(--text-muted);
}

.attachment-tag.from-profile {
background: var(--success-50);
border-color: var(--success-100);
color: var(--success-600);
}

/* Compact attachment summary */
.attachment-summary {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
  color: var(--text-secondary);
}

.attachment-count {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: var(--surface-50);
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
}

.attachment-count i {
  font-size: 12px;
  color: var(--text-muted);
}

.attachment-count.required {
  background: var(--danger-50);
  color: var(--danger-600);
}

.attachment-count.required i {
  color: var(--danger-500);
}

.attachment-count.from-profile {
  background: var(--success-50);
  color: var(--success-700);
}

.attachment-count.from-profile i {
  color: var(--success-500);
}

.deadline-cell {
display: flex;
flex-direction: column;
gap: var(--spacing-xs);
}

.deadline-date {
font-weight: 500;
}

.deadline-remaining {
font-size: 12px;
color: var(--text-muted);
}

.deadline-urgent {
color: var(--danger-500);
font-weight: 600;
}

/* Compact Tender Header */
.tender-header-compact {
  background: var(--surface-0);
  border-radius: var(--radius-md);
  border: 1px solid var(--surface-200);
  margin-bottom: var(--spacing-md);
  overflow: hidden;
  box-shadow: var(--shadow-card);
}

.tender-header-main {
  padding: var(--spacing-md) var(--spacing-lg);
  background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-400) 100%);
  color: white;
}

.tender-header-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-xs);
}

.tender-header-info {
  flex: 1;
  min-width: 0;
}

.tender-header-ref {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.8);
  font-weight: 500;
  margin-bottom: 4px;
}

.tender-header-title {
  font-size: 16px;
  font-weight: 600;
  color: white;
  line-height: 1.3;
  margin: 0;
}

.tender-header-badges {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}

.tender-status-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 600;
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

.tender-status-badge .status-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #4ade80;
}

.tender-countdown {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 600;
  background: rgba(255, 255, 255, 0.9);
  color: var(--warning-500);
}

.tender-countdown i {
  font-size: 12px;
}

.tender-header-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-top: var(--spacing-sm);
  flex-wrap: wrap;
}

.meta-tag {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.9);
  display: flex;
  align-items: center;
  gap: 4px;
}

.meta-tag-separator {
  color: rgba(255, 255, 255, 0.5);
}

/* Compact Timeline Row */
.tender-timeline-compact {
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--surface-50);
  border-bottom: 1px solid var(--surface-100);
}

.timeline-compact-wrapper {
  position: relative;
}

.timeline-compact-track {
  position: relative;
  height: 4px;
  background: var(--surface-200);
  border-radius: 2px;
}

.timeline-compact-progress {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: var(--primary-500);
  border-radius: 2px;
}

.timeline-compact-points {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  transform: translateY(-50%);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.timeline-compact-point {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--surface-0);
  border: 2px solid var(--surface-300);
  z-index: 2;
}

.timeline-compact-point.completed {
  background: var(--primary-500);
  border-color: var(--primary-500);
}

.timeline-compact-point.active {
  background: var(--warning-500);
  border-color: var(--warning-500);
  box-shadow: 0 0 0 3px var(--warning-100);
}

.timeline-compact-labels {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: var(--text-muted);
  margin-top: var(--spacing-sm);
  text-align: center;
}

.timeline-compact-labels span {
  flex: 1;
  line-height: 1.3;
}

.timeline-compact-labels span:first-child {
  text-align: left;
}

.timeline-compact-labels span:last-child {
  text-align: right;
}

.timeline-compact-labels .active {
  color: var(--warning-600);
  font-weight: 600;
}

.timeline-compact-labels .completed {
  color: var(--primary-600);
  font-weight: 500;
}

/* Action Bar */
.tender-action-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--surface-0);
}

.action-bar-left {
  display: flex;
  align-items: center;
}

.action-bar-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.btn-back-link {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  text-decoration: none;
  padding: 8px 12px;
  transition: all 0.2s;
  background: none;
  border: none;
  cursor: pointer;
  border-radius: var(--radius-md);
}

.btn-back-link:hover {
  color: var(--primary-500);
  background: var(--surface-100);
}

.btn-back-link i {
  font-size: 14px;
}

/* Action Bar Buttons - Consistent styling */
.action-bar-right .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 600;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
  border: 1px solid transparent;
}

.action-bar-right .btn i {
  font-size: 14px;
}

.action-bar-right .btn-secondary {
  background: var(--surface-0);
  border-color: var(--surface-300);
  color: var(--text-secondary);
}

.action-bar-right .btn-secondary:hover {
  background: var(--surface-100);
  border-color: var(--surface-400);
  color: var(--text-primary);
}

.action-bar-right .btn-primary {
  background: var(--primary-500);
  border-color: var(--primary-500);
  color: white;
}

.action-bar-right .btn-primary:hover {
  background: var(--primary-600);
  border-color: var(--primary-600);
}

/* Legacy tender-info-banner kept for backwards compatibility */
.tender-info-banner {
background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-400) 100%);
border-radius: var(--radius-md);
padding: var(--spacing-md) var(--spacing-lg);
color: white;
margin-bottom: var(--spacing-md);
box-shadow: var(--shadow-card);
display: none;
}

.tender-banner-ref {
font-size: 12px;
opacity: 0.85;
margin-bottom: 4px;
}

.tender-banner-title {
font-size: 16px;
font-weight: 600;
margin-bottom: var(--spacing-sm);
line-height: 1.3;
}

.tender-meta {
display: flex;
gap: var(--spacing-lg);
flex-wrap: wrap;
}

.meta-item {
display: flex;
flex-direction: column;
gap: 2px;
}

.meta-label {
font-size: 10px;
opacity: 0.75;
text-transform: uppercase;
letter-spacing: 0.05em;
}

.meta-value {
font-size: 13px;
font-weight: 600;
}

/* Tender Timeline Banner (Legacy - hidden) */
.tender-timeline-banner {
  background: var(--surface-0);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-md);
  border: 1px solid var(--surface-200);
  box-shadow: var(--shadow-xs);
  display: none;
}

.timeline-banner-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-md);
}

.timeline-header-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.timeline-banner-status {
  display: flex;
  align-items: center;
  gap: 8px;
}

.timeline-status-dot {
  width: 8px;
  height: 8px;
  background: var(--success-500);
  border-radius: 50%;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.2); }
}

.timeline-status-text {
  font-size: 11px;
  font-weight: 600;
  color: var(--success-600);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.timeline-remaining {
  display: flex;
  align-items: center;
  gap: 6px;
  background: var(--warning-50);
  padding: 6px 12px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--warning-100);
}

.timeline-remaining i {
  color: var(--warning-600);
  font-size: 14px;
}

.timeline-remaining-text {
  font-size: 12px;
  font-weight: 600;
  color: var(--warning-700);
}

/* Horizontal Timeline */
.horizontal-timeline {
  position: relative;
  padding: 0 10px;
  margin-bottom: var(--spacing-md);
}

.timeline-track {
  position: relative;
  height: 4px;
  background: var(--surface-200);
  border-radius: 2px;
  margin: 30px 0 35px;
}

.timeline-progress {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: linear-gradient(90deg, var(--primary-400), var(--primary-500));
  border-radius: 2px;
  transition: width 0.3s ease;
}

.timeline-today-marker {
  position: absolute;
  top: -8px;
  transform: translateX(-50%);
  z-index: 3;
}

.today-marker-dot {
  width: 20px;
  height: 20px;
  background: var(--primary-500);
  border: 3px solid var(--surface-0);
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0, 146, 209, 0.4);
  position: relative;
}

.today-marker-label {
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 9px;
  font-weight: 700;
  color: var(--primary-600);
  background: var(--primary-50);
  padding: 2px 6px;
  border-radius: 3px;
  white-space: nowrap;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.timeline-points {
  display: flex;
  justify-content: space-between;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 100%;
}

.timeline-point {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.timeline-point-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--surface-0);
  border: 2px solid var(--surface-300);
  position: absolute;
  top: -4px;
  transform: translateX(-50%);
  left: 50%;
  z-index: 2;
  transition: all 0.2s ease;
}

.timeline-point.completed .timeline-point-dot {
  background: var(--primary-500);
  border-color: var(--primary-500);
}

.timeline-point.completed .timeline-point-dot::after {
  content: '✓';
  font-size: 7px;
  color: white;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.timeline-point.active .timeline-point-dot {
  background: var(--warning-500);
  border-color: var(--warning-500);
  box-shadow: 0 0 0 4px var(--warning-100);
}

.timeline-point.future .timeline-point-dot {
  background: var(--surface-100);
  border-color: var(--surface-300);
}

.timeline-point-content {
  position: absolute;
  top: 18px;
  text-align: center;
  width: 80px;
  transform: translateX(-50%);
  left: 50%;
}

.timeline-point:first-child .timeline-point-content {
  left: 0;
  transform: none;
  text-align: left;
}

.timeline-point:last-child .timeline-point-content {
  left: auto;
  right: 0;
  transform: none;
  text-align: right;
}

.timeline-point-label {
  font-size: 9px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.02em;
  margin-bottom: 2px;
  white-space: nowrap;
}

.timeline-point-date {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
}

.timeline-point.active .timeline-point-label {
  color: var(--warning-600);
}

.timeline-point.active .timeline-point-date {
  color: var(--warning-700);
}

/* Timeline Banner Footer */
.timeline-banner-footer {
  display: flex;
  justify-content: flex-end;
  padding-top: var(--spacing-sm);
  border-top: 1px solid var(--surface-100);
}

/* Compact Timeline Variant */
.tender-timeline-banner.compact {
  padding: var(--spacing-sm) var(--spacing-md);
}

.tender-timeline-banner.compact .timeline-banner-header {
  margin-bottom: var(--spacing-sm);
}

.horizontal-timeline.compact {
  margin-bottom: 0;
}

.horizontal-timeline.compact .timeline-track {
  margin: 25px 0 30px;
}

/* Legacy deadline-warning kept for backwards compatibility */
.deadline-warning {
background: var(--warning-50);
border-left: 3px solid var(--warning-500);
border-radius: var(--radius-sm);
padding: 10px var(--spacing-md);
margin-bottom: var(--spacing-md);
display: flex;
align-items: center;
gap: var(--spacing-sm);
font-size: 13px;
}

.deadline-icon {
font-size: 24px;
}

.deadline-text {
flex: 1;
}

.deadline-text strong {
font-weight: 600;
color: var(--warning-500);
}

.tender-overview-grid {
display: block;
}

/* Tab Navigation for Tender Details */
.tender-tabs-container {
  background: var(--surface-0);
  border-radius: var(--radius-md);
  border: 1px solid var(--surface-200);
  overflow: hidden;
}

/* Segmented Toggle for Tab Context */
.tab-context-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-md);
  background: var(--surface-50);
  border-bottom: 1px solid var(--surface-200);
}

.tab-context-toggle {
  display: inline-flex;
  background: var(--surface-200);
  border-radius: var(--radius-md);
  padding: 3px;
  gap: 2px;
}

.toggle-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-family: 'Lato', sans-serif;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all 0.2s ease;
  white-space: nowrap;
}

.toggle-btn:hover {
  color: var(--text-primary);
}

.toggle-btn.active {
  background: var(--surface-0);
  color: var(--primary-600);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.toggle-btn i {
  font-size: 14px;
}

.toggle-btn .toggle-badge {
  font-size: 10px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 10px;
  background: var(--surface-300);
  color: var(--text-muted);
}

.toggle-btn.active .toggle-badge {
  background: var(--primary-100);
  color: var(--primary-600);
}

.toggle-btn .toggle-badge.has-updates {
  background: var(--warning-500);
  color: white;
}

.tab-context-info {
  font-size: 12px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 6px;
}

.tab-context-info i {
  font-size: 14px;
}

/* Tab nav visibility */
.tender-tabs-nav.hidden {
  display: none;
}

.tender-tabs-nav {
  display: flex;
  gap: var(--spacing-xs);
  border-bottom: 2px solid var(--surface-200);
  background: var(--surface-0);
  overflow-x: auto;
}

.tender-tabs-nav::-webkit-scrollbar {
  height: 4px;
}

.tender-tabs-nav::-webkit-scrollbar-thumb {
  background: var(--surface-300);
  border-radius: 2px;
}

.tender-tab-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: var(--spacing-sm) var(--spacing-lg);
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-family: 'Lato', sans-serif;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  white-space: nowrap;
  border-bottom: 2px solid transparent;
  margin-bottom: -2px;
  transition: all 0.2s ease;
}

.tender-tab-btn:hover {
  color: var(--primary-500);
}

.tender-tab-btn.active {
  color: var(--primary-500);
  border-bottom-color: var(--primary-500);
}

.tender-tab-btn i {
  font-size: 15px;
}

.tender-tab-btn .tab-badge {
  font-family: 'Lato', sans-serif;
  font-size: 11px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--surface-200);
  color: var(--text-muted);
  margin-left: 2px;
}

.tender-tab-btn.active .tab-badge {
  background: var(--primary-100);
  color: var(--primary-600);
}

.tender-tab-panel {
  display: none;
  padding: var(--spacing-lg);
  background: var(--surface-0);
  width: 100%;
  box-sizing: border-box;
  min-height: 150px;
}

.tender-tab-panel.active {
  display: block;
}

/* Ensure consistent styling for all tab content */
.tender-tab-panel .info-grid-2col {
  background: transparent;
}

.tender-tab-panel .info-description-box {
  background: var(--surface-50);
  border-radius: var(--radius-sm);
  padding: var(--spacing-md);
}

.overview-main {
display: flex;
flex-direction: column;
gap: var(--spacing-sm);
}

.overview-sidebar {
display: flex;
flex-direction: column;
gap: var(--spacing-sm);
}

.overview-section {
background: var(--surface-0);
border-radius: var(--radius-md);
padding: var(--spacing-md);
box-shadow: var(--shadow-xs);
border: 1px solid var(--surface-200);
}

.overview-section-title {
font-size: 13px;
font-weight: 600;
color: var(--text-primary);
margin-bottom: var(--spacing-sm);
display: flex;
align-items: center;
gap: 8px;
}

.overview-section-icon {
font-size: 16px;
color: var(--primary-500);
width: 20px;
text-align: center;
}

.info-row {
display: grid;
grid-template-columns: 140px 1fr;
gap: var(--spacing-sm);
padding: 6px 0;
border-bottom: 1px solid var(--surface-100);
}

.info-row:last-child {
border-bottom: none;
}

.info-label {
font-weight: 500;
color: var(--text-muted);
font-size: 12px;
}

.info-value {
color: var(--text-primary);
font-size: 12px;
}

/* 2-Column Info Grid */
.info-grid-2col {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 4px var(--spacing-lg);
}

.info-grid-2col .info-row {
  grid-template-columns: 130px 1fr;
}

/* Status Badges */
.status-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  border-radius: 3px;
  font-size: 10px;
font-weight: 600;
}

.status-badge.status-info {
  background: var(--info-50);
  color: var(--info-600);
}

.status-badge.status-neutral {
  background: var(--surface-100);
color: var(--text-secondary);
}

/* Country Tags */
.country-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.country-tag {
  background: var(--surface-100);
  color: var(--text-primary);
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: 500;
}

/* Info Description Box */
.info-description-box {
  background: var(--surface-50);
  border-radius: var(--radius-sm);
  padding: var(--spacing-sm);
  border-left: 2px solid var(--primary-400);
  font-size: 12px;
}

.info-description-box p {
  font-size: 12px;
  line-height: 1.5;
}

/* Particulars Grid */
.particulars-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-xs);
}

.particular-item {
  background: var(--surface-50);
  border-radius: var(--radius-sm);
  padding: 8px 10px;
  border: 1px solid var(--surface-200);
}

.particular-label {
  font-size: 10px;
  font-weight: 600;
  color: var(--text-muted);
  margin-bottom: var(--spacing-xs);
}

.particular-value {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.particular-status {
  font-size: 9px;
  font-weight: 600;
  padding: 2px 5px;
  border-radius: 3px;
  text-transform: uppercase;
}

.particular-status.required {
  background: var(--danger-50);
  color: var(--danger-500);
}

.particular-status.allowed {
  background: var(--success-50);
  color: var(--success-500);
}

.particular-status.applicable {
  background: var(--warning-50);
  color: var(--warning-500);
}

.particular-status.optional {
  background: var(--info-50);
  color: var(--info-600);
}

.particular-status.not-required {
  background: var(--surface-100);
  color: var(--text-muted);
}

.particular-amount {
  font-size: 11px;
  color: var(--text-primary);
  font-weight: 500;
}

/* UNSPSC Header */
.unspsc-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 2px;
}

.unspsc-code {
  background: var(--primary-100);
  color: var(--primary-700);
  padding: 1px 6px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: 700;
  font-family: 'Courier New', monospace;
}

.unspsc-category {
  font-size: 12px;
  color: var(--text-muted);
}

/* Requirement Sections */
.requirement-section {
  margin-bottom: var(--spacing-sm);
  padding-bottom: var(--spacing-sm);
  border-bottom: 1px solid var(--surface-200);
}

.requirement-section:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.requirement-section-title {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  margin-bottom: 6px;
}

.requirement-section-title i {
  color: var(--primary-500);
  font-size: 11px;
}

/* Attributes Table */
.attributes-table {
  background: var(--surface-50);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.attribute-row {
  display: grid;
  grid-template-columns: 120px 1fr;
  border-bottom: 1px solid var(--surface-200);
}

.attribute-row:last-child {
  border-bottom: none;
}

.attribute-name {
  background: var(--surface-100);
  padding: 6px 10px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
}

.attribute-value {
  padding: 6px 10px;
  font-size: 11px;
  color: var(--text-primary);
}

/* Attachment Requirements */
.attachment-requirements {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.attachment-req-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: var(--surface-50);
  border-radius: var(--radius-sm);
}

.attachment-req-icon {
  font-size: 12px;
}

.attachment-req-name {
  flex: 1;
  font-size: 11px;
  color: var(--text-primary);
}

.attachment-req-status {
  font-size: 9px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 3px;
  text-transform: uppercase;
}

.attachment-req-status.mandatory {
  background: var(--danger-50);
  color: var(--danger-500);
}

.attachment-req-status.optional {
  background: var(--surface-200);
  color: var(--text-muted);
}

.requirement-description {
  font-size: 11px;
  line-height: 1.5;
  color: var(--text-muted);
  margin: 0;
}

/* Other Requirements List */
.other-requirements-list {
  background: var(--surface-50);
  border-radius: var(--radius-sm);
  padding: var(--spacing-sm);
}

.other-req-item {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  padding: 3px 0;
  font-size: 11px;
  color: var(--text-muted);
}

.other-req-item i {
  flex-shrink: 0;
  margin-top: 1px;
  font-size: 11px;
}

/* Requirements Table Styles */
.requirements-table-container {
  background: var(--surface-50);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
  overflow: hidden;
}

.requirements-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.requirements-table thead {
  background: var(--surface-100);
}

.requirements-table th {
  padding: 10px 12px;
  text-align: left;
  font-weight: 600;
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.03em;
  border-bottom: 1px solid var(--border-light);
}

.requirements-table td {
  padding: 10px 12px;
  vertical-align: top;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-light);
  line-height: 1.5;
}

.requirements-table tbody tr:last-child td {
  border-bottom: none;
}

.requirements-table tbody tr:hover {
  background: var(--surface-100);
}

.requirements-table td strong {
  color: var(--text-primary);
  font-weight: 600;
}

.apply-to-badge {
  display: inline-block;
  background: var(--primary-100);
  color: var(--primary-700);
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  white-space: nowrap;
}

/* Evaluation Method Card */
.evaluation-method-card {
  background: linear-gradient(135deg, var(--primary-50), var(--surface-50));
  border-radius: var(--radius-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--primary-200);
}

.eval-method-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.eval-method-badge {
  background: var(--primary-500);
  color: white;
  padding: 2px 8px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
}

.eval-method-title {
font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.eval-method-description {
  font-size: 11px;
  line-height: 1.5;
  color: var(--text-muted);
  margin: 0;
}

/* Evaluation Criteria Groups */
.eval-criteria-group {
  margin-bottom: var(--spacing-sm);
  border: 1px solid var(--surface-200);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.eval-criteria-group-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  background: var(--surface-100);
  border-bottom: 1px solid var(--surface-200);
}

.criteria-group-badge {
  padding: 2px 8px;
  border-radius: 3px;
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
}

.criteria-group-badge.eligibility {
  background: var(--purple-50);
  color: var(--purple-700);
}

.criteria-group-badge.technical {
  background: var(--info-50);
  color: var(--info-600);
}

.criteria-group-badge.financial {
  background: var(--success-50);
  color: var(--success-500);
}

.criteria-group-type {
  font-size: 10px;
  color: var(--text-muted);
  font-weight: 500;
}

/* Evaluation Criteria Table */
.eval-criteria-table {
  display: flex;
  flex-direction: column;
}

.eval-criteria-row {
  display: grid;
  grid-template-columns: 55px 1fr 80px;
  gap: var(--spacing-sm);
  padding: 8px var(--spacing-sm);
  border-bottom: 1px solid var(--surface-100);
  align-items: start;
}

.eval-criteria-row:last-child {
  border-bottom: none;
}

.criteria-id {
  font-size: 9px;
  font-weight: 700;
  color: var(--text-muted);
  background: var(--surface-100);
  padding: 2px 6px;
  border-radius: 3px;
  text-align: center;
}

.criteria-details {
  flex: 1;
}

.criteria-name {
  font-size: 11px;
  font-weight: 600;
color: var(--text-primary);
  margin-bottom: 1px;
}

.criteria-desc {
  font-size: 10px;
  color: var(--text-muted);
}

.criteria-scope {
  font-size: 9px;
  color: var(--text-muted);
  background: var(--surface-50);
  padding: 2px 6px;
  border-radius: 3px;
  text-align: center;
}

/* Evaluation Note */
.evaluation-note {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  background: var(--info-50);
  border-radius: var(--radius-sm);
  padding: 8px 10px;
  font-size: 10px;
  color: var(--info-700);
  border-left: 2px solid var(--info-500);
}

.evaluation-note i {
  flex-shrink: 0;
  margin-top: 1px;
  font-size: 11px;
}

/* Submission Summary - Compact */
.submission-summary-compact {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: var(--spacing-sm);
  padding: 8px 10px;
  background: var(--surface-50);
  border-radius: var(--radius-sm);
}

.submission-summary-compact i {
  font-size: 11px;
}

.submission-summary-compact .divider {
  color: var(--surface-300);
}

.submission-summary-compact .from-profile {
  color: var(--success-600);
}

/* Info Box Compact */
.info-box-compact {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: var(--spacing-sm);
}

/* Submission Form Headers */
.submission-form-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  flex: 1;
}

.form-status-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: var(--radius-full);
  text-transform: uppercase;
  letter-spacing: 0.03em;
  white-space: nowrap;
}

.form-status-badge.required {
  background: var(--primary-100);
  color: var(--primary-700);
  border: 1px solid var(--primary-200);
}

.form-status-badge.conditional {
  background: var(--surface-100);
  color: var(--text-muted);
  border: 1px solid var(--surface-200);
}

/* Enhanced Attachment Tags */
.attachment-tag.mandatory {
  background: var(--danger-50);
  color: var(--danger-600);
  border: 1px solid var(--danger-100);
}

.attachment-tag.optional {
  background: var(--surface-100);
  color: var(--text-muted);
  border: 1px dashed var(--surface-300);
}

.attachment-tag.no-attachment {
  background: transparent;
  color: var(--text-muted);
  border: 1px dashed var(--surface-300);
  font-style: italic;
}

.document-list {
list-style: none;
}

.document-list-item {
padding: var(--spacing-sm) 0;
display: flex;
align-items: center;
gap: var(--spacing-sm);
font-size: 14px;
color: var(--text-secondary);
}

.document-list-item::before {
content: '📄';
font-size: 16px;
}

.document-list-item.from-profile::before {
content: '⭐';
}

.timeline {
position: relative;
padding-left: var(--spacing-lg);
}

.timeline-item {
position: relative;
padding-bottom: var(--spacing-sm);
}

.timeline-item::before {
content: '';
position: absolute;
left: -18px;
top: 5px;
width: 8px;
height: 8px;
border-radius: 50%;
background: var(--primary-400);
border: 2px solid var(--surface-0);
box-shadow: 0 0 0 1px var(--primary-400);
}

.timeline-item::after {
content: '';
position: absolute;
left: -15px;
top: 14px;
width: 2px;
height: calc(100% - 6px);
background: var(--surface-200);
}

.timeline-item:last-child::after {
display: none;
}

.timeline-date {
font-size: 11px;
font-weight: 600;
color: var(--text-primary);
margin-bottom: 1px;
}

.timeline-content {
font-size: 11px;
color: var(--text-muted);
}

.layout-grid {
display: grid;
grid-template-columns: 280px 1fr;
gap: var(--spacing-xl);
}

.progress-sidebar {
position: sticky;
top: 100px;
height: fit-content;
}

.progress-card {
background: var(--surface-0);
border-radius: var(--radius-lg);
padding: var(--spacing-lg);
box-shadow: var(--shadow-card);
border: 1px solid var(--surface-200);
margin-bottom: var(--spacing-md);
}

.progress-header {
font-size: 14px;
font-weight: 600;
color: var(--text-primary);
margin-bottom: var(--spacing-md);
}

.progress-bar {
height: 8px;
background: var(--surface-200);
border-radius: 999px;
overflow: hidden;
margin-bottom: var(--spacing-sm);
}

.progress-fill {
height: 100%;
background: linear-gradient(90deg, var(--success-500) 0%, var(--primary-400) 100%);
transition: width 0.3s ease;
}

.progress-text {
font-size: 12px;
color: var(--text-secondary);
text-align: right;
}

.section-nav {
background: var(--surface-0);
border-radius: var(--radius-lg);
box-shadow: var(--shadow-card);
border: 1px solid var(--surface-200);
overflow: hidden;
}

.section-nav-item {
display: flex;
align-items: center;
gap: var(--spacing-sm);
padding: 12px var(--spacing-md);
border-left: 3px solid transparent;
cursor: pointer;
transition: all 0.2s ease;
text-decoration: none;
color: var(--text-secondary);
font-size: 14px;
}

.section-nav-item:hover {
background: var(--surface-50);
}

.section-nav-item.active {
background: var(--primary-50);
border-left-color: var(--primary-400);
color: var(--primary-600);
font-weight: 600;
}

.section-nav-item.completed {
color: var(--success-500);
}

.section-icon {
font-size: 18px;
width: 24px;
text-align: center;
}

.content-area {
flex: 1;
}

.section-block {
background: var(--surface-0);
border-radius: var(--radius-lg);
padding: var(--spacing-xl);
box-shadow: var(--shadow-card);
border: 1px solid var(--surface-200);
margin-bottom: var(--spacing-lg);
}

.section-block.hidden {
display: none;
}

.section-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: var(--spacing-lg);
padding-bottom: var(--spacing-md);
border-bottom: 2px solid var(--surface-200);
}

.section-title {
font-size: 20px;
font-weight: 600;
color: var(--text-primary);
display: flex;
align-items: center;
gap: var(--spacing-md);
}

.title-icon {
width: 40px;
height: 40px;
display: flex;
align-items: center;
justify-content: center;
background: var(--primary-50);
border-radius: var(--radius-sm);
font-size: 20px;
}

.section-status {
padding: 6px 16px;
border-radius: 999px;
font-size: 12px;
font-weight: 600;
}

.status-complete {
background: var(--success-50);
color: var(--success-500);
}

.status-incomplete {
background: var(--warning-50);
color: var(--warning-500);
}

.status-error {
background: var(--danger-50);
color: var(--danger-500);
}

.collapsible-form {
background: var(--surface-0);
border: 1px solid var(--surface-200);
border-radius: var(--radius-lg);
margin-bottom: var(--spacing-lg);
overflow: hidden;
}

.collapsible-form-header {
padding: var(--spacing-lg);
background: var(--surface-50);
cursor: pointer;
display: flex;
align-items: center;
justify-content: space-between;
transition: all 0.2s ease;
}

.collapsible-form-header:hover {
background: var(--surface-100);
}

.collapsible-form-title {
font-size: 16px;
font-weight: 600;
color: var(--text-primary);
display: flex;
align-items: center;
gap: var(--spacing-md);
}

.form-icon {
width: 36px;
height: 36px;
display: flex;
align-items: center;
justify-content: center;
background: var(--primary-50);
border-radius: var(--radius-sm);
font-size: 18px;
}

.collapsible-form-meta {
display: flex;
align-items: center;
gap: var(--spacing-md);
}

.form-completion {
font-size: 12px;
color: var(--text-muted);
}

.collapse-icon {
font-size: 20px;
color: var(--text-muted);
transition: transform 0.2s ease;
}

.collapsible-form.collapsed .collapse-icon {
transform: rotate(-90deg);
}

.collapsible-form-body {
padding: var(--spacing-xl);
border-top: 1px solid var(--surface-200);
}

.collapsible-form.collapsed .collapsible-form-body {
display: none;
}

.info-box {
padding: var(--spacing-md);
background: var(--info-50);
border-left: 4px solid var(--info-400);
border-radius: var(--radius-sm);
margin-bottom: var(--spacing-lg);
font-size: 14px;
color: var(--text-secondary);
}

.info-box-icon {
margin-right: var(--spacing-sm);
}

.form-grid {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: var(--spacing-lg);
}

.form-group {
display: flex;
flex-direction: column;
gap: var(--spacing-sm);
}

.form-group.full-width {
grid-column: 1 / -1;
}

.form-label {
font-size: 14px;
font-weight: 600;
color: var(--text-primary);
display: flex;
align-items: center;
gap: var(--spacing-xs);
}

.required {
color: var(--danger-500);
}

.optional-badge {
font-size: 11px;
font-weight: 500;
color: var(--text-muted);
background: var(--surface-100);
padding: 2px 8px;
border-radius: 999px;
}

.form-input,
.form-select,
.form-textarea {
padding: 12px 16px;
border: 1px solid var(--surface-200);
border-radius: var(--radius-sm);
font-size: 14px;
font-family: inherit;
background: var(--surface-0);
color: var(--text-primary);
transition: all 0.2s ease;
width: 100%;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
outline: none;
border-color: var(--primary-400);
box-shadow: 0 0 0 3px var(--primary-50);
}

.form-input:disabled,
.form-select:disabled,
.form-textarea:disabled {
background: var(--surface-100);
cursor: not-allowed;
opacity: 0.7;
}

.form-textarea {
resize: vertical;
min-height: 120px;
}

.help-text {
font-size: 12px;
color: var(--text-muted);
}

.file-upload-area {
border: 2px dashed var(--surface-300);
border-radius: var(--radius-sm);
padding: var(--spacing-lg);
text-align: center;
transition: all 0.2s ease;
cursor: pointer;
background: var(--surface-0);
margin-top: var(--spacing-sm);
}

.file-upload-area:hover {
border-color: var(--primary-400);
background: var(--primary-50);
}

.file-upload-options {
display: flex;
gap: var(--spacing-md);
justify-content: center;
margin-bottom: var(--spacing-md);
}

.upload-option-btn {
padding: 10px 20px;
border: 1px solid var(--surface-300);
background: var(--surface-0);
border-radius: var(--radius-sm);
cursor: pointer;
font-size: 13px;
font-weight: 500;
color: var(--text-primary);
transition: all 0.2s ease;
}

.upload-option-btn:hover {
background: var(--primary-50);
border-color: var(--primary-400);
color: var(--primary-400);
}

.upload-icon {
font-size: 32px;
margin-bottom: var(--spacing-sm);
opacity: 0.5;
}

.upload-text {
font-size: 14px;
color: var(--text-secondary);
margin-bottom: var(--spacing-xs);
}

.upload-subtext {
font-size: 12px;
color: var(--text-muted);
}

.uploaded-file {
display: flex;
align-items: center;
gap: var(--spacing-md);
padding: var(--spacing-md);
background: var(--surface-50);
border: 1px solid var(--surface-200);
border-radius: var(--radius-sm);
margin-top: var(--spacing-sm);
}

.file-icon {
font-size: 24px;
}

.file-info {
flex: 1;
}

.file-name {
font-size: 14px;
font-weight: 500;
color: var(--text-primary);
}

.file-size {
font-size: 12px;
color: var(--text-muted);
}

.file-remove {
padding: 6px 12px;
border: none;
background: transparent;
color: var(--danger-500);
cursor: pointer;
border-radius: var(--radius-sm);
transition: all 0.2s ease;
}

.file-remove:hover {
background: var(--danger-50);
}

.lot-selector {
display: flex;
gap: var(--spacing-md);
margin-bottom: var(--spacing-lg);
flex-wrap: wrap;
}

.lot-card {
flex: 1;
min-width: 200px;
padding: var(--spacing-md);
border: 2px solid var(--surface-200);
border-radius: var(--radius-sm);
cursor: pointer;
transition: all 0.2s ease;
}

.lot-card:hover {
border-color: var(--primary-400);
background: var(--primary-50);
}

.lot-card.selected {
border-color: var(--primary-400);
background: var(--primary-50);
box-shadow: 0 0 0 3px var(--primary-50);
}

.lot-title {
font-size: 14px;
font-weight: 600;
color: var(--text-primary);
margin-bottom: var(--spacing-xs);
}

.lot-desc {
font-size: 12px;
color: var(--text-secondary);
}

.subsidiary-item {
display: flex;
align-items: center;
justify-content: space-between;
padding: var(--spacing-md);
background: var(--surface-50);
border: 1px solid var(--surface-200);
border-radius: var(--radius-sm);
margin-bottom: var(--spacing-md);
}

.subsidiary-info {
flex: 1;
}

.subsidiary-name {
font-size: 14px;
font-weight: 600;
color: var(--text-primary);
margin-bottom: var(--spacing-xs);
}

.subsidiary-ungm {
font-size: 12px;
color: var(--text-muted);
}

.checkbox-group {
display: flex;
align-items: flex-start;
gap: var(--spacing-sm);
margin: var(--spacing-md) 0;
}

.checkbox-group input[type="checkbox"] {
margin-top: 4px;
width: 18px;
height: 18px;
}

.checkbox-group label {
font-size: 14px;
color: var(--text-secondary);
line-height: 1.5;
}

.btn {
border-radius: var(--radius-sm);
border: 1px solid transparent;
padding: 12px 24px;
font-size: 14px;
font-weight: 500;
font-family: inherit;
cursor: pointer;
transition: all 0.2s ease;
display: inline-flex;
align-items: center;
justify-content: center;
gap: var(--spacing-sm);
text-decoration: none;
}

.btn-primary {
background: var(--primary-400);
color: #fff;
border-color: var(--primary-400);
}

.btn-primary:hover {
background: var(--primary-500);
border-color: var(--primary-500);
}

.btn-primary:disabled {
background: var(--surface-300);
border-color: var(--surface-300);
color: var(--text-muted);
cursor: not-allowed;
}

.btn-secondary {
background: transparent;
border-color: var(--primary-400);
color: var(--primary-400);
}

.btn-secondary:hover {
background: var(--primary-50);
}

.btn-ghost {
background: transparent;
border-color: var(--surface-200);
color: var(--text-secondary);
}

.btn-ghost:hover {
background: var(--surface-100);
border-color: var(--surface-300);
}

.btn-success {
background: var(--success-500);
color: #fff;
border-color: var(--success-500);
}

.btn-success:hover {
background: #3d8a2a;
}

.btn-danger {
background: var(--danger-500);
color: #fff;
border-color: var(--danger-500);
}

.btn-danger:hover {
background: #c41f14;
}

.btn-sm {
padding: 6px 12px;
font-size: 12px;
}

.btn-link {
background: transparent;
border: none;
color: var(--primary-500);
padding: 4px 8px;
font-size: 11px;
font-weight: 500;
cursor: pointer;
display: inline-flex;
align-items: center;
gap: 4px;
transition: all 0.15s ease;
}

.btn-link:hover {
color: var(--primary-600);
background: var(--primary-50);
border-radius: var(--radius-sm);
}

/* Section Count Badge */
.section-count-badge {
background: var(--surface-200);
color: var(--text-muted);
font-size: 10px;
font-weight: 600;
padding: 2px 6px;
border-radius: 10px;
margin-left: 6px;
}

.action-bar {
background: var(--surface-0);
border-top: 1px solid var(--surface-200);
padding: var(--spacing-md) var(--spacing-xl);
position: sticky;
bottom: 0;
display: flex;
justify-content: space-between;
align-items: center;
box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
}

.action-buttons {
display: flex;
gap: var(--spacing-md);
}

.auto-save-indicator {
font-size: 12px;
color: var(--text-muted);
display: flex;
align-items: center;
gap: var(--spacing-xs);
}

.table-responsive {
overflow-x: auto;
margin: var(--spacing-lg) 0;
}

.data-table {
width: 100%;
border-collapse: collapse;
font-size: 14px;
}

.data-table th,
.data-table td {
padding: 12px 16px;
text-align: left;
border-bottom: 1px solid var(--surface-200);
}

.data-table th {
background: var(--surface-50);
font-weight: 600;
color: var(--text-primary);
}

.data-table tr:hover {
background: var(--surface-50);
}

.quick-actions-bar {
position: fixed;
right: var(--spacing-xl);
top: 50%;
transform: translateY(-50%);
z-index: 90;
display: flex;
flex-direction: column;
gap: var(--spacing-sm);
}

.quick-action-btn {
width: 56px;
height: 56px;
border-radius: 50%;
background: var(--primary-400);
color: white;
border: none;
box-shadow: var(--shadow-card);
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
font-size: 24px;
transition: all 0.2s ease;
position: relative;
}

.quick-action-btn:hover {
background: var(--primary-500);
transform: scale(1.1);
}

.quick-action-tooltip {
position: absolute;
right: 70px;
background: var(--surface-900);
color: white;
padding: 8px 12px;
border-radius: var(--radius-sm);
font-size: 13px;
white-space: nowrap;
opacity: 0;
pointer-events: none;
transition: opacity 0.2s ease;
}

.quick-action-btn:hover .quick-action-tooltip {
opacity: 1;
}

.sidebar-panel {
position: fixed;
right: 0;
top: 0;
width: 600px;
height: 100vh;
background: var(--surface-0);
box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);
transform: translateX(100%);
transition: transform 0.3s ease;
z-index: 110;
overflow-y: auto;
}

.sidebar-panel.open {
transform: translateX(0);
}

.sidebar-panel-header {
padding: var(--spacing-lg);
background: var(--primary-600);
color: white;
display: flex;
justify-content: space-between;
align-items: center;
position: sticky;
top: 0;
z-index: 1;
}

.sidebar-panel-title {
font-size: 18px;
font-weight: 600;
}

      .sidebar-panel-body {
        padding: var(--spacing-xl);
      }

      .collapsible-section-compact {
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        margin-bottom: var(--spacing-sm);
      }

      .collapsible-header-compact {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-md);
        cursor: pointer;
        transition: background 0.2s;
        font-size: 14px;
      }

      .collapsible-header-compact:hover {
        background: rgba(255, 255, 255, 0.05);
      }

      .collapsible-content-compact {
        padding: 0 var(--spacing-md) var(--spacing-md);
        display: none;
      }

      .collapsible-icon {
        transition: transform 0.3s;
        font-size: 12px;
      }

      .collapsible-icon.rotated {
        transform: rotate(-90deg);
      }

      .item-spec-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: var(--radius-sm);
        padding: var(--spacing-sm);
        margin-bottom: var(--spacing-sm);
      }

      .item-spec-header {
        margin-bottom: var(--spacing-xs);
        padding-bottom: var(--spacing-xs);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .item-spec-detail {
        display: flex;
        gap: var(--spacing-xs);
        font-size: 12px;
        margin-bottom: 4px;
      }

      .spec-label {
        font-weight: 500;
        color: rgba(255, 255, 255, 0.8);
        min-width: 90px;
      }

      .spec-value {
        color: rgba(255, 255, 255, 0.9);
      }

      .collapsible-item-card {
        background: var(--surface-50);
        border: 1px solid var(--surface-200);
        border-radius: var(--radius-sm);
        margin-bottom: var(--spacing-xs);
        overflow: hidden;
        transition: all 0.3s;
      }

      .collapsible-item-card:hover {
        box-shadow: var(--shadow-sm);
      }

      .collapsible-item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px var(--spacing-md);
        cursor: pointer;
        background: var(--surface-50);
        transition: all 0.2s;
        user-select: none;
      }

      .collapsible-item-header:hover {
        background: var(--surface-100);
        transform: translateX(2px);
      }

      .collapsible-item-header:active {
        transform: scale(0.99);
      }

      .collapsible-arrow {
        font-size: 12px;
        color: var(--primary-400);
        transition: transform 0.3s ease;
        margin-left: var(--spacing-sm);
        font-weight: bold;
        display: inline-block;
      }

      .collapsible-arrow.rotated {
        transform: rotate(180deg);
        color: var(--primary-600);
      }

      .collapsible-item-content {
        max-height: 0;
        overflow: hidden;
        padding: 0 var(--spacing-md);
        background: var(--surface-0);
        transition: max-height 0.4s ease, padding 0.4s ease;
      }

      .collapsible-item-content.expanded {
        max-height: 1000px;
        padding: 0 var(--spacing-md) var(--spacing-md);
      }

      .spec-detail-row {
        display: flex;
        gap: var(--spacing-sm);
        padding: var(--spacing-sm) 0;
        border-bottom: 1px solid var(--surface-100);
      }

      .spec-detail-row:last-child {
        border-bottom: none;
      }

      .spec-detail-label {
        font-weight: 600;
        color: var(--text-secondary);
        min-width: 140px;
        font-size: 13px;
      }

      .spec-detail-value {
        color: var(--text-primary);
        flex: 1;
        font-size: 13px;
        line-height: 1.5;
      }

      /* Key Dates Summary */
      .key-dates-summary {
        background: var(--surface-0);
        border-radius: var(--radius-md);
        padding: var(--spacing-md) var(--spacing-lg);
        margin-bottom: var(--spacing-lg);
        border: 1px solid var(--surface-200);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-lg);
      }

      .dates-grid {
        display: flex;
        align-items: center;
        gap: var(--spacing-xl);
        flex: 1;
      }

      .date-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
      }

      .date-label {
        font-size: 13px;
        color: var(--text-muted);
        font-weight: 500;
      }

      .date-value {
        font-size: 13px;
        color: var(--text-primary);
        font-weight: 600;
      }

      .date-item.date-highlighted {
        background: var(--info-50);
        padding: var(--spacing-xs) var(--spacing-sm);
        border-radius: var(--radius-sm);
      }

      .date-item.date-highlighted .date-label {
        color: var(--primary-600);
      }

      .date-item.date-highlighted .date-value {
        color: var(--primary-600);
      }

      .dates-actions {
        display: flex;
        align-items: center;
      }

      .btn-link {
        background: none;
        border: none;
        color: var(--primary-500);
        padding: var(--spacing-sm);
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }

      .btn-link:hover {
        color: var(--primary-600);
        text-decoration: underline;
      }

      /* Amendment Items */
      .amendment-item {
        background: rgba(255, 255, 255, 0.05);
        border-radius: var(--radius-sm);
        padding: var(--spacing-sm);
        margin-bottom: var(--spacing-sm);
      }

      .amendment-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-xs);
        font-size: 12px;
      }

      .amendment-number {
        font-weight: 600;
        color: rgba(255, 255, 255, 0.95);
      }

      .amendment-date {
        color: rgba(255, 255, 255, 0.7);
        font-size: 11px;
      }

      .amendment-content {
        color: rgba(255, 255, 255, 0.85);
      }

      /* Modal Overlay */
      .modal {
        display: none;
position: fixed;
top: 0;
left: 0;
        right: 0;
        bottom: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
align-items: center;
justify-content: center;
        backdrop-filter: blur(4px);
        animation: modalFadeIn 0.2s ease-out;
      }

      @keyframes modalFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes modalSlideIn {
        from { opacity: 0; transform: translateY(-20px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
}

.modal.show {
display: flex;
}

.modal-content {
        background: white;
        border-radius: 16px;
        width: 100%;
max-width: 700px;
max-height: 90vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        box-shadow: 0 20px 25px rgba(0, 0, 0, 0.15), 0 10px 10px rgba(0, 0, 0, 0.1);
        animation: modalSlideIn 0.3s ease-out;
}

.modal-header {
        padding: 24px;
        border-bottom: 1px solid var(--surface-200);
display: flex;
justify-content: space-between;
align-items: center;
        background: linear-gradient(135deg, var(--surface-50) 0%, var(--surface-0) 100%);
}

.modal-title {
font-size: 20px;
        font-weight: 700;
color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 12px;
        flex: 1;
      }

      .modal-title i {
        font-size: 22px;
        color: var(--primary-500);
}

.modal-close {
        background: none;
border: none;
font-size: 24px;
cursor: pointer;
color: var(--text-muted);
        padding: 4px;
        width: 36px;
        height: 36px;
display: flex;
align-items: center;
justify-content: center;
        border-radius: 50%;
        transition: all 0.2s ease;
}

.modal-close:hover {
background: var(--surface-100);
        color: var(--text-primary);
        transform: rotate(90deg);
}

.modal-body {
        padding: 24px;
        overflow-y: auto;
        flex: 1;
}

.modal-footer {
        padding: 20px 24px;
        border-top: 1px solid var(--surface-200);
display: flex;
justify-content: flex-end;
        gap: 12px;
        background: var(--surface-50);
      }

      /* Alert Styles */
      .alert {
        padding: 16px;
        border-radius: var(--radius-sm);
        margin-bottom: 20px;
        display: flex;
        gap: 12px;
        align-items: start;
      }

      .alert i {
        font-size: 20px;
        flex-shrink: 0;
      }

      .alert-info {
        background: var(--info-50);
        border-left: 4px solid var(--info-400);
        color: var(--text-secondary);
      }

      .alert-info i {
        color: var(--info-400);
      }

      .alert-warning {
        background: var(--warning-50);
        border-left: 4px solid var(--warning-500);
        color: #92400e;
      }

      .alert-warning i {
        color: var(--warning-500);
      }

      .alert-danger {
        background: var(--danger-50);
        border-left: 4px solid var(--danger-500);
        color: #991b1b;
      }

      .alert-danger i {
        color: var(--danger-500);
      }

      .alert-success {
        background: var(--success-50);
        border-left: 4px solid var(--success-500);
        color: #166534;
      }

      .alert-success i {
        color: var(--success-500);
}

.clarification-item {
background: var(--surface-50);
border: 1px solid var(--surface-200);
border-radius: var(--radius-sm);
padding: var(--spacing-sm) var(--spacing-md);
margin-bottom: 6px;
}

.clarification-item:last-child {
margin-bottom: 0;
}

.clarification-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 6px;
}

.clarification-number {
font-weight: 600;
font-size: 11px;
color: var(--primary-500);
}

.clarification-date {
font-size: 10px;
color: var(--text-muted);
}

.clarification-question {
background: var(--surface-100);
padding: 8px 10px;
border-radius: var(--radius-sm);
margin-bottom: 6px;
border-left: 2px solid var(--info-400);
}

.clarification-question p {
font-size: 11px;
line-height: 1.5;
color: var(--text-primary);
margin: 0;
}

.clarification-answer {
background: var(--success-50);
padding: 8px 10px;
border-radius: var(--radius-sm);
border-left: 2px solid var(--success-500);
}

.clarification-answer p {
font-size: 11px;
line-height: 1.5;
color: var(--text-primary);
margin: 0;
}

.clarification-label {
font-size: 9px;
font-weight: 600;
text-transform: uppercase;
color: var(--text-muted);
margin-bottom: 3px;
letter-spacing: 0.03em;
}

.amendment-item {
background: var(--warning-50);
border-left: 4px solid var(--warning-500);
padding: var(--spacing-lg);
border-radius: var(--radius-sm);
margin-bottom: var(--spacing-md);
}

.amendment-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: var(--spacing-sm);
}

.amendment-title {
font-weight: 600;
color: var(--text-primary);
}

.amendment-date {
font-size: 12px;
color: var(--text-muted);
}

.tender-details-inline {
background: var(--info-50);
border: 1px solid var(--info-400);
border-radius: var(--radius-lg);
padding: var(--spacing-md);
margin-bottom: var(--spacing-lg);
cursor: pointer;
transition: all 0.2s ease;
}

.tender-details-inline:hover {
background: var(--info-50);
box-shadow: var(--shadow-card);
}

.tender-details-inline-header {
display: flex;
align-items: center;
justify-content: space-between;
}

.tender-details-inline-title {
font-size: 14px;
font-weight: 600;
color: var(--info-400);
display: flex;
align-items: center;
gap: var(--spacing-sm);
}

/* =====================================================================
   ENHANCED SUPPLIER BID FORMS - PROGRESS TRACKER STYLE (COMPACT)
   ===================================================================== */

/* Progress Tracker Container */
.supplier-progress-tracker {
    background: var(--surface-0);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    box-shadow: var(--shadow-card);
    border: 1px solid var(--surface-200);
}

.supplier-progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.supplier-progress-header h2 {
    color: var(--primary-600);
    font-size: 15px;
    font-weight: 600;
    margin: 0;
    display: flex;
    align-items: center;
}

.supplier-progress-header h2 i {
    font-size: 14px;
}

.supplier-progress-stats {
    display: flex;
    gap: var(--spacing-md);
    font-size: 12px;
}

.supplier-progress-stat {
    display: flex;
    align-items: center;
    gap: 6px;
}

.supplier-progress-stat-value {
    font-weight: 700;
    font-size: 14px;
    color: var(--primary-600);
}

/* Progress Steps */
.supplier-progress-steps {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: var(--spacing-sm);
}

.supplier-progress-step {
    position: relative;
    padding: var(--spacing-sm) var(--spacing-xs);
    background: var(--surface-50);
    border-radius: var(--radius-sm);
    border: 1px solid var(--surface-200);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}

.supplier-progress-step:hover {
    border-color: var(--primary-400);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 146, 209, 0.12);
}

.supplier-progress-step.completed {
    background: linear-gradient(135deg, #e6f7ed 0%, #d4edda 100%);
    border-color: var(--success-500);
}

.supplier-progress-step.active {
    background: linear-gradient(135deg, var(--primary-50) 0%, #e1f0f7 100%);
    border-color: var(--primary-500);
    border-width: 2px;
}

.supplier-progress-step.in-progress {
    background: linear-gradient(135deg, #fff8e1 0%, #fff3cd 100%);
    border-color: var(--warning-500);
}

.supplier-step-icon {
    font-size: 1.2em;
    margin-bottom: 4px;
    display: block;
}

.supplier-step-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 2px;
    font-size: 11px;
    line-height: 1.3;
}

.supplier-step-status {
    font-size: 10px;
    color: var(--text-muted);
}

.supplier-step-check {
    position: absolute;
    top: 6px;
    right: 6px;
    width: 16px;
    height: 16px;
    background: var(--success-500);
    border-radius: 50%;
    display: none;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 9px;
    font-weight: 700;
}

.supplier-progress-step.completed .supplier-step-check {
    display: flex;
}

/* Enhanced Section Cards */
.supplier-section-card {
    background: var(--surface-0);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    box-shadow: var(--shadow-card);
    border: 1px solid var(--surface-200);
    display: none;
    animation: supplierFadeIn 0.3s ease-in;
}

.supplier-section-card.active {
    display: block;
}

@keyframes supplierFadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.supplier-section-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--surface-200);
}

.supplier-section-title {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.supplier-section-title-icon {
    font-size: 1.5em;
}

.supplier-section-title h3 {
    color: var(--primary-600);
    font-size: 16px;
    margin: 0 0 2px 0;
    font-weight: 600;
}

.supplier-section-title p {
    color: var(--text-muted);
    font-size: 12px;
    margin: 0;
}

/* Enhanced Form Fields */
.supplier-form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.supplier-form-grid.cols-3 {
    grid-template-columns: repeat(3, 1fr);
}

.supplier-form-field {
    display: flex;
    flex-direction: column;
}

.supplier-form-field.full-width {
    grid-column: 1 / -1;
}

.supplier-form-field label {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
    font-size: 12px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.supplier-form-field label i {
    color: var(--primary-500);
    font-size: 12px;
}

.supplier-form-field input,
.supplier-form-field select,
.supplier-form-field textarea {
    padding: 8px 10px;
    border: 1px solid var(--surface-300);
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-family: inherit;
    transition: all 0.2s;
    background: var(--surface-0);
    width: 100%;
}

.supplier-form-field input:focus,
.supplier-form-field select:focus,
.supplier-form-field textarea:focus {
    outline: none;
    border-color: var(--primary-500);
    box-shadow: 0 0 0 2px rgba(0, 146, 209, 0.1);
}

.supplier-form-field textarea {
    min-height: 60px;
    resize: vertical;
}

.supplier-form-hint {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 3px;
}

/* Info Banner Styles */
.supplier-info-banner {
    background: var(--info-50);
    border-left: 3px solid var(--info-400);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    margin-bottom: var(--spacing-sm);
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-xs);
    font-size: 12px;
}

.supplier-info-banner.warning {
    background: var(--warning-50);
    border-left-color: var(--warning-500);
}

.supplier-info-banner.success {
    background: var(--success-50);
    border-left-color: var(--success-500);
}

.supplier-info-banner-icon {
    font-size: 14px;
    flex-shrink: 0;
}

/* Enhanced Tables - Smart Table Style */
.supplier-smart-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    margin: 24px 0;
    font-size: 12px;
}

.supplier-smart-table thead {
    background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-700) 100%);
}

.supplier-smart-table th {
    color: white !important;
    background: transparent;
    padding: 10px 12px;
    text-align: left;
    font-weight: 600;
    font-size: 11px;
}

.supplier-smart-table td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--surface-200);
    background: white;
    vertical-align: top;
    font-size: 12px;
}

.supplier-smart-table tbody tr:hover td {
    background: var(--surface-50);
}

.supplier-smart-table tbody tr:last-child td {
    border-bottom: none;
}

.supplier-smart-table input,
.supplier-smart-table select,
.supplier-smart-table textarea {
    width: 100%;
    padding: 6px 10px;
    border: 1px solid var(--surface-300);
    border-radius: 4px;
    font-size: 12px;
    background: white;
}

.supplier-smart-table input:focus,
.supplier-smart-table select:focus,
.supplier-smart-table textarea:focus {
    border-color: var(--primary-500);
    outline: none;
}

.supplier-smart-table .prefilled {
    background: white;
    font-weight: 600;
}

.supplier-smart-table .calculated {
    background: white;
    font-weight: 600;
    color: var(--primary-600);
}

/* Section Subsections */
.supplier-subsection {
    margin-bottom: var(--spacing-md);
}

.supplier-subsection-header {
    background: linear-gradient(135deg, var(--surface-50) 0%, var(--surface-100) 100%);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-left: 3px solid var(--primary-500);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    margin-bottom: var(--spacing-sm);
}

.supplier-subsection-header.warning {
    border-left-color: var(--warning-500);
}

.supplier-subsection-header.success {
    border-left-color: var(--success-500);
}

.supplier-subsection-header strong {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--text-primary);
    font-size: 13px;
}

.supplier-subsection-header strong i {
    color: var(--primary-500);
    font-size: 12px;
}

.supplier-subsection-header.warning strong i {
    color: var(--warning-500);
}

/* Partner Cards */
.supplier-partner-card {
    background: var(--surface-50);
    border: 1px solid var(--surface-200);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    position: relative;
}

.supplier-partner-card.lead {
    background: linear-gradient(135deg, var(--primary-50) 0%, #e1f0f7 100%);
    border-color: var(--primary-500);
    border-width: 2px;
}

.supplier-partner-badge {
    position: absolute;
    top: var(--spacing-xs);
    right: var(--spacing-xs);
    background: var(--primary-500);
    color: white;
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
}

.supplier-partner-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: var(--spacing-xs);
    border-bottom: 1px solid var(--surface-200);
    margin-bottom: var(--spacing-xs);
    font-size: 13px;
}

/* Compliance Items */
.supplier-compliance-item {
    background: var(--surface-50);
    border: 1px solid var(--surface-200);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: var(--spacing-sm);
    align-items: start;
    margin-bottom: var(--spacing-xs);
    transition: all 0.2s ease;
    font-size: 12px;
}

.supplier-compliance-item:hover {
    border-color: var(--primary-400);
    background: var(--surface-0);
}

.supplier-compliance-number {
    width: 24px;
    height: 24px;
    background: var(--primary-600);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 11px;
}

.supplier-compliance-content {
    flex: 1;
}

.supplier-compliance-title {
    font-weight: 600;
    margin-bottom: 4px;
    color: var(--text-primary);
    font-size: 12px;
}

.supplier-compliance-description {
    font-size: 11px;
    color: var(--text-muted);
    line-height: 1.5;
}

.supplier-compliance-response {
    display: flex;
    gap: var(--spacing-xs);
}

.supplier-radio-option {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 10px;
    background: var(--surface-0);
    border: 1px solid var(--surface-300);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s;
    font-weight: 500;
    font-size: 11px;
}

.supplier-radio-option:hover {
    border-color: var(--primary-400);
}

.supplier-radio-option input:checked + span {
    font-weight: 700;
    color: var(--primary-600);
}

/* Action Bar */
.supplier-action-bar {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: flex-end;
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--surface-200);
}

.supplier-action-bar .btn {
    padding: 8px 16px;
    font-size: 12px;
}

/* Upload Areas */
.supplier-upload-area {
    border: 2px dashed var(--surface-300);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    text-align: center;
    background: var(--surface-50);
    transition: all 0.2s ease;
    cursor: pointer;
}

.supplier-upload-area:hover {
    border-color: var(--primary-400);
    background: var(--primary-50);
}

.supplier-upload-icon {
    font-size: 1.5em;
    margin-bottom: var(--spacing-xs);
    color: var(--primary-500);
}

.supplier-upload-text {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 2px;
    font-size: 12px;
}

.supplier-upload-hint {
    font-size: 11px;
    color: var(--text-muted);
}

/* Declaration Box */
.supplier-declaration-box {
    border: 1px solid var(--primary-400);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    background: var(--surface-50);
    font-size: 12px;
}

.supplier-declaration-box p {
    font-weight: 600;
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-xs);
    font-size: 12px;
    margin: 0;
}

.supplier-declaration-box p i {
    color: var(--primary-500);
    margin-top: 2px;
    font-size: 12px;
}

.supplier-declaration-box ol {
    font-size: 11px;
    line-height: 1.6;
    padding-left: var(--spacing-md);
    margin: var(--spacing-sm) 0 0 0;
}

.supplier-declaration-box ol li {
    margin-bottom: 4px;
}

.supplier-declaration-list {
    display: grid;
    gap: var(--spacing-xs);
    margin: var(--spacing-sm) 0 0 0;
    padding: 0;
    list-style: none;
}

.supplier-declaration-list li {
    display: flex;
    gap: var(--spacing-xs);
    align-items: flex-start;
    font-size: 11px;
}

.supplier-declaration-list li i {
    color: var(--primary-600);
    margin-top: 2px;
    flex-shrink: 0;
    font-size: 11px;
}

/* Responsive */
@media (max-width: 1200px) {
    .supplier-progress-steps {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 768px) {
    .supplier-progress-steps {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .supplier-form-grid {
        grid-template-columns: 1fr;
    }
    
    .supplier-form-grid.cols-3 {
        grid-template-columns: 1fr;
    }
    
    .supplier-compliance-item {
        grid-template-columns: 1fr;
    }
    
    .supplier-compliance-response {
        flex-direction: column;
    }
}

@media (max-width: 1024px) {
.layout-grid {
grid-template-columns: 1fr;
}

.tender-overview-grid {
grid-template-columns: 1fr;
}

.progress-sidebar {
position: relative;
top: 0;
}

/* Sidebar collapses on smaller screens */
.sidebar {
    width: 60px;
    min-width: 60px;
    max-width: 60px;
}

.sidebar .menu-section-title,
.sidebar .menu-item span:not(.menu-icon),
.sidebar .menu-group-header span:first-child,
.sidebar .menu-group-header i.pi-chevron-down {
    display: none;
}

.sidebar .menu-group-header {
    justify-content: center;
    padding: 8px;
}

.sidebar .menu-item {
    justify-content: center;
    padding: 12px;
}

.sidebar .sidebar-toggle {
    display: none;
}

.sidebar-panel {
width: 100%;
}

.quick-actions-bar {
right: var(--spacing-md);
}

.header-actions {
gap: 4px;
}
.header-action-label {
display: none;
}
.header-action-btn {
padding: 8px;
}
}

@media (max-width: 768px) {
.form-grid {
grid-template-columns: 1fr;
}

.tender-meta {
flex-direction: column;
gap: var(--spacing-md);
}

.action-bar {
flex-direction: column;
gap: var(--spacing-md);
}

.action-buttons {
width: 100%;
flex-direction: column;
}

.btn {
width: 100%;
}

.stats-grid {
grid-template-columns: 1fr;
}

.key-dates-summary {
flex-direction: column;
align-items: flex-start;
padding: var(--spacing-md);
gap: var(--spacing-md);
}

.dates-grid {
flex-direction: column;
align-items: flex-start;
gap: var(--spacing-sm);
width: 100%;
}

.dates-actions {
width: 100%;
}

.dates-actions .btn {
width: 100%;
}
}
</style>
</head>
<body>
<header class="header" role="banner">
    <div class="header-top">
        <div class="logo-container">
            <span class="logo">UNOPS</span>
            <span class="portal-badge">SUPPLIER</span>
            <!-- Dynamic Module Name - Change based on active menu -->
            <span style="color: var(--surface-400); margin: 0 8px; font-size: 18px;">|</span>
            <span id="currentModuleName" style="color: var(--primary-500); font-weight: 600; font-size: 14px;">eTendering</span>
        </div>
        
        <!-- Header Actions -->
        <div class="header-actions">
            <!-- Accessibility Button -->
            <div class="header-action-btn" onclick="openAccessibilityPanel()" title="Accessibility Options" aria-label="Accessibility Options">
                <i class="pi pi-eye" aria-hidden="true"></i>
                <span class="header-action-label">Accessibility</span>
            </div>
            
            <!-- Language Selector -->
            <div class="header-action-btn language-selector" onclick="openLanguageSelector()" title="Change Language" aria-label="Change Language">
                <span class="lang-flag">🌐</span>
                <span class="header-action-label" id="currentLang">EN</span>
                <i class="pi pi-chevron-down" style="font-size: 10px; margin-left: 2px;" aria-hidden="true"></i>
            </div>

            <!-- AI Assistant -->
            <div class="header-action-btn ai-assistant-btn" onclick="openAIAssistant()" title="AI Assistant" aria-label="AI Supplier Assistant">
                <div class="ai-icon-wrapper">
                    <i class="pi pi-bolt" aria-hidden="true"></i>
                </div>
                <span class="header-action-label">AI Help</span>
                <span class="ai-badge">NEW</span>
            </div>

            <!-- Help/Questions -->
            <div class="header-action-btn" onclick="openHelpCenter()" title="Help Center" aria-label="Help Center and Documentation">
                <i class="pi pi-question-circle" aria-hidden="true"></i>
                <span class="header-action-label">Help</span>
            </div>

            <!-- Notifications -->
            <div class="header-action-btn notification-btn" onclick="openNotificationsPanel()" title="Notifications" aria-label="View Notifications">
                <i class="pi pi-bell" aria-hidden="true"></i>
                <span class="notification-badge" id="notificationCount">3</span>
            </div>
        </div>

        <div class="user-menu">
            <div class="user-info">
                <div class="user-role">Supplier</div>
                <div class="user-name">Acme Corporation</div>
            </div>
            <div class="user-avatar">AC</div>
        </div>
    </div>
</header>

<div class="app-container">
    <!-- =====================================================================
         SIDEBAR (COLLAPSIBLE)
         ===================================================================== -->
    <aside class="sidebar" id="mainSidebar">
        <div class="sidebar-toggle" onclick="toggleSidebar()">
            <i class="pi pi-chevron-left"></i>
        </div>
        <nav class="sidebar-menu">
            <!-- Supplier Portal -->
            <div class="menu-section">
                <div class="menu-section-title">Supplier Portal</div>
                
                <a class="menu-item" href="https://valentinar11.github.io/ValentinaRo/supplier-portal-landing.html" data-module="Home">
                    <span class="menu-icon"><i class="pi pi-home"></i></span>
                    <span>Home</span>
                </a>
                <a class="menu-item disabled" href="#" data-module="My Profile">
                    <span class="menu-icon"><i class="pi pi-user"></i></span>
                    <span>My Profile</span>
                </a>
                <a class="menu-item disabled" href="#" data-module="Form Responses">
                    <span class="menu-icon"><i class="pi pi-file-edit"></i></span>
                    <span>Form Responses</span>
                </a>
            </div>
            
            <div class="menu-divider"></div>
            
            <!-- Applications -->
            <div class="menu-section">
                <div class="menu-section-title">Applications</div>
                
                <!-- eTendering -->
                <div class="menu-group">
                    <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                        <span><i class="pi pi-briefcase"></i> eTendering</span>
                        <i class="pi pi-chevron-down"></i>
                    </div>
                    <div class="menu-group-items">
                        <a class="menu-item active" href="https://valentinar11.github.io/ValentinaRo/supplier-bidding-mockup.html" data-module="eTendering" data-view="dashboard"><span class="menu-icon"><i class="pi pi-chart-bar"></i></span><span>Overview</span></a>
                        <a class="menu-item disabled" href="#" data-module="eTendering" data-view="my-tenders"><span class="menu-icon"><i class="pi pi-folder-open"></i></span><span>My Tenders</span></a>
                    </div>
                </div>
                
                <!-- DRiVE -->
                <div class="menu-group collapsed">
                    <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                        <span><i class="pi pi-shield"></i> DRiVE</span>
                        <i class="pi pi-chevron-down"></i>
                    </div>
                    <div class="menu-group-items">
                        <a class="menu-item disabled" href="#" data-module="DRiVE"><span class="menu-icon"><i class="pi pi-chart-bar"></i></span><span>Overview</span></a>
                        <a class="menu-item disabled" href="#" data-module="DRiVE"><span class="menu-icon"><i class="pi pi-check-circle"></i></span><span>Verification</span></a>
                        <a class="menu-item" href="https://valentinar11.github.io/ValentinaRo/capa-supplier-mockup.html" data-module="DRiVE"><span class="menu-icon"><i class="pi pi-exclamation-triangle"></i></span><span>CAPA</span></a>
                    </div>
                </div>
            </div>
        </nav>
    </aside>

<main class="main-area">
<!-- Quick Actions Bar -->
<div class="quick-actions-bar" id="quick-actions" style="display: none;">
<button class="quick-action-btn" onclick="openTenderDetailsSidebar()">
<span>📖</span>
<span class="quick-action-tooltip">View Tender Details</span>
</button>
<button class="quick-action-btn" onclick="openClarificationsSidebar()">
<span>💬</span>
<span class="quick-action-tooltip">Ask Clarification</span>
</button>
</div>

<!-- Tender Details Sidebar -->
<div class="sidebar-panel" id="tender-details-sidebar">
<div class="sidebar-panel-header">
<div>
<div class="sidebar-panel-title">Tender Details</div>
<div style="font-size: 13px; opacity: 0.9;">UNOPS/ITB/2025/001</div>
</div>
<button class="modal-close" style="color: white;" onclick="closeSidebar('tender-details-sidebar')">×</button>
</div>
<div class="sidebar-panel-body">
<!-- General Information - Collapsible -->
<div class="collapsible-section-compact">
<div class="collapsible-header-compact" onclick="toggleCollapseSidebar(this)">
<span><strong>📋 General Information</strong></span>
<span class="collapsible-icon">▼</span>
</div>
<div class="collapsible-content-compact" style="display: block;">
<div class="info-row">
<div class="info-label">Method</div>
<div class="info-value">ITB - Invitation to Bid</div>
</div>
<div class="info-row">
<div class="info-label">Category</div>
<div class="info-value">Goods</div>
</div>
<div class="info-row">
<div class="info-label">Value</div>
<div class="info-value">$250,000 USD</div>
</div>
<div class="info-row">
<div class="info-label">Deadline</div>
<div class="info-value">15 Jan 2025, 23:59 UTC</div>
</div>
</div>
</div>

<!-- Scope - Collapsible -->
<div class="collapsible-section-compact">
<div class="collapsible-header-compact" onclick="toggleCollapseSidebar(this)">
<span><strong>📝 Scope & Description</strong></span>
<span class="collapsible-icon">▼</span>
</div>
<div class="collapsible-content-compact" style="display: block;">
<p style="font-size: 13px; line-height: 1.6; color: var(--text-secondary);">
Supply and delivery of medical equipment and supplies for healthcare facilities in multiple locations. Equipment must meet international standards and include installation and training services.
</p>
</div>
</div>

<!-- Items Being Purchased - Collapsible -->
<div class="collapsible-section-compact">
<div class="collapsible-header-compact" onclick="toggleCollapseSidebar(this)">
<span><strong>📦 Items & Specifications</strong></span>
<span class="collapsible-icon">▼</span>
</div>
<div class="collapsible-content-compact">
<div class="item-spec-card">
<div class="item-spec-header">
<div style="font-weight: 600; font-size: 13px;">Ultrasound Machines</div>
<div style="font-size: 12px; color: var(--text-muted);">UNSPSC: 42182104</div>
</div>
<div class="item-spec-detail">
<span class="spec-label">Quantity:</span>
<span class="spec-value">5 Units</span>
</div>
<div class="item-spec-detail">
<span class="spec-label">Specifications:</span>
<span class="spec-value">Portable, color doppler, minimum 3 probes</span>
</div>
</div>

<div class="item-spec-card">
<div class="item-spec-header">
<div style="font-weight: 600; font-size: 13px;">Patient Monitors</div>
<div style="font-size: 12px; color: var(--text-muted);">UNSPSC: 42182108</div>
</div>
<div class="item-spec-detail">
<span class="spec-label">Quantity:</span>
<span class="spec-value">20 Units</span>
</div>
<div class="item-spec-detail">
<span class="spec-label">Specifications:</span>
<span class="spec-value">Multi-parameter, ECG, SpO2, NIBP, temperature</span>
</div>
</div>

<div class="item-spec-card">
<div class="item-spec-header">
<div style="font-weight: 600; font-size: 13px;">Surgical Lights</div>
<div style="font-size: 12px; color: var(--text-muted);">UNSPSC: 42192201</div>
</div>
<div class="item-spec-detail">
<span class="spec-label">Quantity:</span>
<span class="spec-value">8 Units</span>
</div>
<div class="item-spec-detail">
<span class="spec-label">Specifications:</span>
<span class="spec-value">LED, mobile, minimum 120,000 lux</span>
</div>
</div>

<div class="item-spec-card">
<div class="item-spec-header">
<div style="font-weight: 600; font-size: 13px;">Anesthesia Machines</div>
<div style="font-size: 12px; color: var(--text-muted);">UNSPSC: 42182101</div>
</div>
<div class="item-spec-detail">
<span class="spec-label">Quantity:</span>
<span class="spec-value">3 Units</span>
</div>
<div class="item-spec-detail">
<span class="spec-label">Specifications:</span>
<span class="spec-value">With ventilator, vaporizers, monitoring system</span>
</div>
</div>
</div>
</div>

<!-- Particulars - Collapsible -->
<div class="collapsible-section-compact">
<div class="collapsible-header-compact" onclick="toggleCollapseSidebar(this)">
<span><strong>⚙️ Tender Particulars</strong></span>
<span class="collapsible-icon">▼</span>
</div>
<div class="collapsible-content-compact">
<div class="info-row">
<div class="info-label">Bid Security</div>
<div class="info-value">Required - $5,000</div>
</div>
<div class="info-row">
<div class="info-label">Performance Security</div>
<div class="info-value">10% of contract value</div>
</div>
<div class="info-row">
<div class="info-label">Advance Payment</div>
<div class="info-value">Allowed - Up to 20%</div>
</div>
<div class="info-row">
<div class="info-label">Liquidated Damages</div>
<div class="info-value">0.5% per week, max 10%</div>
</div>
<div class="info-row">
<div class="info-label">Alternative Offers</div>
<div class="info-value">Allowed</div>
</div>
<div class="info-row">
<div class="info-label">Site Visit</div>
<div class="info-value">Not required</div>
</div>
<div class="info-row">
<div class="info-label">Pre-Bid Meeting</div>
<div class="info-value">Optional - 20 Dec 2024</div>
</div>
</div>
</div>

<!-- Key Dates - Collapsible -->
<div class="collapsible-section-compact">
<div class="collapsible-header-compact" onclick="toggleCollapseSidebar(this)">
<span><strong>📅 Key Dates</strong></span>
<span class="collapsible-icon">▼</span>
</div>
<div class="collapsible-content-compact" style="display: block;">
<div class="timeline">
<div class="timeline-item">
<div class="timeline-date">5 Dec 2024</div>
<div class="timeline-content">Published</div>
</div>
<div class="timeline-item">
<div class="timeline-date">20 Dec 2024</div>
<div class="timeline-content">Pre-Bid Meeting (Optional)</div>
</div>
<div class="timeline-item">
<div class="timeline-date">10 Jan 2025</div>
<div class="timeline-content">Clarification Deadline</div>
</div>
<div class="timeline-item">
<div class="timeline-date">15 Jan 2025</div>
<div class="timeline-content">Submission Deadline</div>
</div>
</div>
</div>
</div>

<!-- Amendments - Collapsible -->
<div class="collapsible-section-compact">
<div class="collapsible-header-compact" onclick="toggleCollapseSidebar(this)">
<span><strong>📝 Amendments</strong></span>
<span class="collapsible-icon">▼</span>
</div>
<div class="collapsible-content-compact">
<div class="amendment-item">
<div class="amendment-header">
<span class="amendment-number">Amendment #1</span>
<span class="amendment-date">18 Dec 2024</span>
</div>
<div class="amendment-content">
<p style="font-size: 12px; line-height: 1.5;">Extended clarification deadline from 5 Jan to 10 Jan 2025. All other terms remain unchanged.</p>
</div>
</div>
<div style="font-size: 12px; color: rgba(255, 255, 255, 0.7); text-align: center; padding: var(--spacing-md); font-style: italic;">
No further amendments
</div>
</div>
</div>

<button class="btn btn-primary" style="width: 100%; margin-top: var(--spacing-lg);" onclick="closeSidebar('tender-details-sidebar'); viewTenderDetails('UNOPS/ITB/2025/001')">
View Full Tender Details
</button>
</div>
</div>

<!-- Clarifications Sidebar -->
<div class="sidebar-panel" id="clarifications-sidebar">
<div class="sidebar-panel-header">
<div>
<div class="sidebar-panel-title">Ask Clarification</div>
<div style="font-size: 13px; opacity: 0.9;">UNOPS/ITB/2025/001</div>
</div>
<button class="modal-close" style="color: white;" onclick="closeSidebar('clarifications-sidebar')">×</button>
</div>
<div class="sidebar-panel-body">
<div class="info-box">
<span class="info-box-icon">ℹ️</span>
<strong>Deadline:</strong> 10 January 2025, 23:59 UTC
</div>

<div class="form-group" style="margin-bottom: var(--spacing-lg);">
<label class="form-label">Related Section <span class="required">*</span></label>
<select class="form-select">
<option>Select section...</option>
<option>General Information</option>
<option>Technical Specifications</option>
<option>Pricing</option>
<option>Other</option>
</select>
</div>

<div class="form-group" style="margin-bottom: var(--spacing-lg);">
<label class="form-label">Your Question <span class="required">*</span></label>
<textarea class="form-textarea" placeholder="Type your clarification question here..." style="min-height: 150px;"></textarea>
</div>

<button class="btn btn-primary" style="width: 100%; margin-bottom: var(--spacing-xl);" onclick="submitClarificationQuick()">
Submit Question
</button>

<hr style="border: none; border-top: 1px solid var(--surface-200); margin: var(--spacing-xl) 0;">

<h4 style="font-size: 14px; font-weight: 600; margin-bottom: var(--spacing-md);">Recent Clarifications</h4>

<div class="clarification-item">
<div class="clarification-header">
<span class="clarification-number">Q #003</span>
<span class="clarification-date">9 Dec 2024</span>
</div>
<div class="clarification-question">
<p style="font-size: 13px;">Can ultrasound machines be from different manufacturers?</p>
</div>
<div class="clarification-answer">
<div class="clarification-label">Answer</div>
<p style="font-size: 13px;">Yes, acceptable if meeting ISO standards.</p>
</div>
</div>
</div>
</div>

<div class="view-container">
<!-- Dashboard View -->
<div class="view-section active" id="view-dashboard">
<div id="main-content-dashboard" class="main-content">
<div class="page-header">
<div>
<h1 class="page-title">Dashboard</h1>
<p class="page-subtitle">Welcome back! Here's an overview of your tender activities</p>
</div>
</div>

<div class="stats-grid">
<div class="stat-card">
<div class="stat-icon-wrapper total">
<i class="pi pi-file"></i>
</div>
<div class="stat-content">
<div class="stat-value">8</div>
<div class="stat-label">Total Tenders</div>
</div>
</div>
<div class="stat-card">
<div class="stat-icon-wrapper progress">
<i class="pi pi-pencil"></i>
</div>
<div class="stat-content">
<div class="stat-value">2</div>
<div class="stat-label">Bids in Progress</div>
</div>
</div>
<div class="stat-card">
<div class="stat-icon-wrapper submitted">
<i class="pi pi-send"></i>
</div>
<div class="stat-content">
<div class="stat-value">3</div>
<div class="stat-label">Bids Submitted</div>
</div>
</div>
<div class="stat-card">
<div class="stat-icon-wrapper awarded">
<i class="pi pi-star-fill" style="font-size: 20px; color: #4c9f38;"></i>
</div>
<div class="stat-content">
<div class="stat-value">1</div>
<div class="stat-label">Awarded</div>
</div>
</div>
</div>

<div class="card">
<div class="card-header">
<h2 class="card-title"><i class="pi pi-list"></i>All My Tenders</h2>
<div style="display: flex; gap: var(--spacing-sm); align-items: center;">
<input type="search" placeholder="Search tenders..." style="padding: 8px 12px; border: 1px solid var(--surface-300); border-radius: var(--radius-md); width: 250px; font-size: 14px;">
<select style="padding: 8px 12px; border: 1px solid var(--surface-300); border-radius: var(--radius-md); font-size: 14px;">
<option value="">All Statuses</option>
<option value="open">Open</option>
<option value="submitted">Submitted</option>
<option value="awarded">Awarded</option>
<option value="not-awarded">Not Awarded</option>
<option value="cancelled">Cancelled</option>
</select>
</div>
</div>

<table class="tender-table">
<thead>
<tr>
<th>Reference / Title</th>
<th>Type</th>
<th>Publication</th>
<th>Deadline</th>
<th>Submission Status</th>
<th>Tender Status</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
<tr onclick="viewTenderDetails('UNOPS/ITB/2025/001')">
<td>
<div class="tender-ref">UNOPS/ITB/2025/001</div>
<div class="tender-title-cell">Medical Equipment Supply</div>
</td>
<td><span class="tender-type-badge tender-type-public">Public</span></td>
<td>5 Dec 2024</td>
<td>
<div class="deadline-cell">
<div class="deadline-date">15 Jan 2025</div>
<div class="deadline-remaining deadline-urgent">5 days left</div>
</div>
</td>
<td><span class="status-badge status-in-progress">In Progress</span></td>
<td><span class="status-badge status-open">Open</span></td>
<td><button class="btn btn-primary btn-sm" onclick="event.stopPropagation(); selectTenderForBid('UNOPS/ITB/2025/001')">Continue Bid</button></td>
</tr>
<tr onclick="viewTenderDetails('UNOPS/RFQ/2024/089')">
<td>
<div class="tender-ref">UNOPS/RFQ/2024/089</div>
<div class="tender-title-cell">Office Supplies and Stationery</div>
</td>
<td><span class="tender-type-badge tender-type-limited">Limited</span></td>
<td>15 Oct 2024</td>
<td>
<div class="deadline-cell">
<div class="deadline-date">30 Nov 2024</div>
</div>
</td>
<td><span class="status-badge status-in-progress">In Progress</span></td>
<td><span class="status-badge status-open">Open</span></td>
<td><button class="btn btn-primary btn-sm" onclick="event.stopPropagation(); selectTenderForBid('UNOPS/RFQ/2024/089')">Continue Bid</button></td>
</tr>
<tr onclick="viewTenderDetails('UNOPS/ITB/2024/072')">
<td>
<div class="tender-ref">UNOPS/ITB/2024/072</div>
<div class="tender-title-cell">IT Infrastructure Services</div>
</td>
<td><span class="tender-type-badge tender-type-public">Public</span></td>
<td>1 Sep 2024</td>
<td>
<div class="deadline-cell">
<div class="deadline-date">15 Oct 2024</div>
</div>
</td>
<td><span class="status-badge status-submitted">Submitted</span></td>
<td><span class="status-badge status-not-awarded">Not Awarded</span></td>
<td><button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); viewTenderDetails('UNOPS/ITB/2024/072')">View Details</button></td>
</tr>
<tr onclick="viewTenderDetails('UNOPS/RFP/2024/055')">
<td>
<div class="tender-ref">UNOPS/RFP/2024/055</div>
<div class="tender-title-cell">Consulting Services - Project Management</div>
</td>
<td><span class="tender-type-badge tender-type-public">Public</span></td>
<td>20 Aug 2024</td>
<td>
<div class="deadline-cell">
<div class="deadline-date">25 Sep 2024</div>
</div>
</td>
<td><span class="status-badge status-submitted">Submitted</span></td>
<td><span class="status-badge status-cancelled">Cancelled</span></td>
<td><button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); viewTenderDetails('UNOPS/RFP/2024/055')">View Details</button></td>
</tr>
<tr onclick="viewTenderDetails('UNOPS/ITB/2024/041')">
<td>
<div class="tender-ref">UNOPS/ITB/2024/041</div>
<div class="tender-title-cell">Vehicle Fleet Procurement</div>
</td>
<td><span class="tender-type-badge tender-type-public">Public</span></td>
<td>5 Jul 2024</td>
<td>
<div class="deadline-cell">
<div class="deadline-date">20 Aug 2024</div>
</div>
</td>
<td><span class="status-badge status-submitted">Submitted</span></td>
<td><span class="status-badge status-awarded">Awarded ✓</span></td>
<td><button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); viewTenderDetails('UNOPS/ITB/2024/041')">View Details</button></td>
</tr>
        </tbody>
        </table>
      </div>

      <!-- Open Procurement Events Section -->
      <div class="card" style="margin-top: var(--spacing-lg);">
        <div class="card-header">
          <div>
            <h2 class="card-title"><i class="pi pi-briefcase"></i>Open Procurement Events</h2>
            <p style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Explore new opportunities and express your interest</p>
          </div>
          <div style="display: flex; gap: var(--spacing-sm);">
            <input type="search" placeholder="Search opportunities..." style="padding: 8px 12px; border: 1px solid var(--surface-300); border-radius: var(--radius-md); width: 300px;">
            <select style="padding: 8px 12px; border: 1px solid var(--surface-300); border-radius: var(--radius-md);">
              <option>All Categories</option>
              <option>Goods</option>
              <option>Services</option>
              <option>Works</option>
            </select>
          </div>
        </div>

        <table class="tender-table">
          <thead>
            <tr>
              <th>Reference / Title</th>
              <th>Type</th>
              <th>Category</th>
              <th>Est. Value</th>
              <th>Publication</th>
              <th>Deadline</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr onclick="viewTenderDetails('UNOPS/RFP/2025/015')">
              <td>
                <div class="tender-ref">UNOPS/RFP/2025/015</div>
                <div class="tender-title-cell">IT Infrastructure Services</div>
              </td>
              <td><span class="tender-type-badge tender-type-public">Public</span></td>
              <td>Services</td>
              <td>$500,000</td>
              <td>1 Dec 2024</td>
              <td>
                <div class="deadline-cell">
                  <div class="deadline-date">28 Jan 2025</div>
                  <div class="deadline-remaining">28 days left</div>
                </div>
              </td>
              <td><button class="btn btn-secondary btn-sm" onclick="event.stopPropagation(); expressInterest('UNOPS/RFP/2025/015')">Express Interest</button></td>
            </tr>
            <tr onclick="viewTenderDetails('UNOPS/ITB/2025/002')">
              <td>
                <div class="tender-ref">UNOPS/ITB/2025/002</div>
                <div class="tender-title-cell">Construction Materials Supply</div>
              </td>
              <td><span class="tender-type-badge tender-type-public">Public</span></td>
              <td>Goods</td>
              <td>$1,200,000</td>
              <td>3 Dec 2024</td>
              <td>
                <div class="deadline-cell">
                  <div class="deadline-date">20 Jan 2025</div>
                  <div class="deadline-remaining">20 days left</div>
                </div>
              </td>
              <td><button class="btn btn-secondary btn-sm" onclick="event.stopPropagation(); expressInterest('UNOPS/ITB/2025/002')">Express Interest</button></td>
            </tr>
            <tr onclick="viewTenderDetails('UNOPS/RFQ/2025/033')">
              <td>
                <div class="tender-ref">UNOPS/RFQ/2025/033</div>
                <div class="tender-title-cell">Office Furniture and Equipment</div>
              </td>
              <td><span class="tender-type-badge tender-type-limited">Limited</span></td>
              <td>Goods</td>
              <td>$85,000</td>
              <td>8 Dec 2024</td>
              <td>
                <div class="deadline-cell">
                  <div class="deadline-date">22 Dec 2024</div>
                  <div class="deadline-remaining deadline-urgent">12 days left</div>
                </div>
              </td>
              <td><button class="btn btn-secondary btn-sm" onclick="event.stopPropagation(); expressInterest('UNOPS/RFQ/2025/033')">Express Interest</button></td>
            </tr>
            <tr onclick="viewTenderDetails('UNOPS/ITB/2025/007')">
              <td>
                <div class="tender-ref">UNOPS/ITB/2025/007</div>
                <div class="tender-title-cell">Laboratory Equipment and Supplies</div>
              </td>
              <td><span class="tender-type-badge tender-type-public">Public</span></td>
              <td>Goods</td>
              <td>$350,000</td>
              <td>5 Dec 2024</td>
              <td>
                <div class="deadline-cell">
                  <div class="deadline-date">25 Jan 2025</div>
                  <div class="deadline-remaining">25 days left</div>
                </div>
              </td>
              <td><button class="btn btn-secondary btn-sm" onclick="event.stopPropagation(); expressInterest('UNOPS/ITB/2025/007')">Express Interest</button></td>
            </tr>
            <tr onclick="viewTenderDetails('UNOPS/RFP/2025/019')">
              <td>
                <div class="tender-ref">UNOPS/RFP/2025/019</div>
                <div class="tender-title-cell">Consulting Services - Project Management</div>
              </td>
              <td><span class="tender-type-badge tender-type-public">Public</span></td>
              <td>Services</td>
              <td>$200,000</td>
              <td>10 Dec 2024</td>
              <td>
                <div class="deadline-cell">
                  <div class="deadline-date">5 Feb 2025</div>
                  <div class="deadline-remaining">35 days left</div>
                </div>
              </td>
              <td><button class="btn btn-secondary btn-sm" onclick="event.stopPropagation(); expressInterest('UNOPS/RFP/2025/019')">Express Interest</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Tender Details View -->
<div class="view-section" id="view-tender-details">
<div id="main-content-tender-details" class="main-content">
<!-- Compact Tender Header -->
<div class="tender-header-compact">
  <!-- Main Info Row -->
  <div class="tender-header-main">
    <div class="tender-header-top">
      <div class="tender-header-info">
        <div class="tender-header-ref">UNOPS/ITB/2025/001</div>
        <h2 class="tender-header-title">Supply and Delivery of Medical Equipment and Supplies</h2>
      </div>
      <div class="tender-header-badges">
        <span class="tender-status-badge"><span class="status-dot"></span> Open</span>
        <span class="tender-countdown"><i class="pi pi-clock"></i> 5d 14h left</span>
      </div>
    </div>
    <div class="tender-header-meta">
      <span class="meta-tag">ITB</span>
      <span class="meta-tag-separator">·</span>
      <span class="meta-tag">Goods</span>
      <span class="meta-tag-separator">·</span>
      <span class="meta-tag">$250,000 USD</span>
      <span class="meta-tag-separator">·</span>
      <span class="meta-tag">Myanmar MCO</span>
    </div>
  </div>

  <!-- Compact Timeline Row -->
  <div class="tender-timeline-compact">
    <div class="timeline-compact-wrapper">
      <div class="timeline-compact-track">
        <div class="timeline-compact-progress" style="width: 66%;"></div>
      </div>
      <div class="timeline-compact-points">
        <div class="timeline-compact-point completed"></div>
        <div class="timeline-compact-point completed"></div>
        <div class="timeline-compact-point active"></div>
        <div class="timeline-compact-point"></div>
      </div>
    </div>
    <div class="timeline-compact-labels">
      <span class="completed">Published<br><small>5 Dec</small></span>
      <span class="completed">Clarifications<br><small>10 Jan</small></span>
      <span class="active">Submission<br><small>15 Jan</small></span>
      <span>Award<br><small>15 Feb</small></span>
    </div>
  </div>

  <!-- Action Bar -->
  <div class="tender-action-bar">
    <div class="action-bar-left">
      <button class="btn-back-link" onclick="navigateToView('dashboard')">
        <i class="pi pi-arrow-left"></i> Back to Dashboard
      </button>
    </div>
    <div class="action-bar-right">
      <button class="btn btn-secondary" onclick="openModal('ask-clarification-modal')">
        <i class="pi pi-comment"></i> Ask Question
      </button>
      <button class="btn btn-primary" onclick="selectTenderForBid('UNOPS/ITB/2025/001')">
        <i class="pi pi-send"></i> Continue Bid
      </button>
    </div>
  </div>
</div>

  <!-- Tabs section - inside main-content-tender-details -->
<div class="tender-overview-grid">
    <div class="tender-tabs-container">
  
  <!-- Segmented Toggle Header -->
  <div class="tab-context-header">
    <div class="tab-context-toggle">
      <button class="toggle-btn active" onclick="switchTabContext('info', this)">
        <i class="pi pi-file-edit"></i> Tender Information
      </button>
      <button class="toggle-btn" onclick="switchTabContext('process', this)">
        <i class="pi pi-sync"></i> Process <span class="toggle-badge has-updates">3</span>
      </button>
    </div>
    <div class="tab-context-info" id="tab-context-hint">
      <i class="pi pi-info-circle"></i>
      <span>Reference information from tender authoring</span>
    </div>
  </div>

  <!-- Tender Information Tabs -->
  <div class="tender-tabs-nav" id="tabs-info">
    <button class="tender-tab-btn active" onclick="switchTab('tab-general', this)">
      <i class="pi pi-file"></i> General
    </button>
    <button class="tender-tab-btn" onclick="switchTab('tab-particulars', this)">
      <i class="pi pi-briefcase"></i> Particulars
    </button>
    <button class="tender-tab-btn" onclick="switchTab('tab-scope', this)">
      <i class="pi pi-check-square"></i> Requirements
    </button>
    <button class="tender-tab-btn" onclick="switchTab('tab-evaluation', this)">
      <i class="pi pi-chart-bar"></i> Evaluation
    </button>
    <button class="tender-tab-btn" onclick="switchTab('tab-documents-forms', this)">
      <i class="pi pi-folder"></i> Documents & Forms <span class="tab-badge">7</span>
    </button>
  </div>

  <!-- Process Tabs -->
  <div class="tender-tabs-nav hidden" id="tabs-process">
    <button class="tender-tab-btn" onclick="switchTab('tab-amendments', this)">
      <i class="pi pi-pencil"></i> Amendments <span class="tab-badge">2</span>
    </button>
    <button class="tender-tab-btn" onclick="switchTab('tab-clarifications', this)">
      <i class="pi pi-comments"></i> Clarifications <span class="tab-badge">1</span>
    </button>
    <button class="tender-tab-btn" onclick="switchTab('tab-award', this)">
      <i class="pi pi-trophy"></i> Award Evaluation
    </button>
  </div>

  <!-- Tab Panel: General Information -->
  <div id="tab-general" class="tender-tab-panel active">
    <div class="info-grid-2col">
      <div class="info-row">
        <div class="info-label">Reference</div>
        <div class="info-value">UNOPS/ITB/2025/001</div>
      </div>
      <div class="info-row">
        <div class="info-label">Title</div>
        <div class="info-value">Supply and Delivery of Medical Equipment and Supplies</div>
      </div>
      <div class="info-row">
        <div class="info-label">Event Type</div>
        <div class="info-value">ITB - Invitation to Bid</div>
      </div>
      <div class="info-row">
        <div class="info-label">Type of Requirement</div>
        <div class="info-value"><span class="status-badge status-neutral">Goods</span></div>
      </div>
      <div class="info-row">
        <div class="info-label">Organizational Unit</div>
        <div class="info-value">UNOPS Myanmar Multi-Country Office</div>
      </div>
      <div class="info-row">
        <div class="info-label">Beneficiary Country</div>
        <div class="info-value">
          <div class="country-tags">
            <span class="country-tag">Afghanistan</span>
            <span class="country-tag">Bangladesh</span>
            <span class="country-tag">Ethiopia</span>
          </div>
        </div>
      </div>
    </div>
    <div class="info-description-box" style="margin-top: var(--spacing-md);">
      <div class="info-label" style="margin-bottom: var(--spacing-xs);">Description</div>
      <p style="line-height: 1.6; color: var(--text-secondary); margin: 0;">
        UNOPS requires the supply and delivery of medical equipment for healthcare facilities in three countries. The procurement includes diagnostic equipment, patient monitoring systems, surgical lighting, and anesthesia machines. All equipment must meet international quality standards (ISO 13485, CE marking) and include installation, commissioning, and training services.
      </p>
    </div>
  </div>

  <!-- Tab Panel: Particulars & Tender Details -->
  <div id="tab-particulars" class="tender-tab-panel">
    <div style="font-size: 10px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; margin-bottom: 6px;">Tender Particulars</div>
    <div class="info-grid-2col">
      <div class="info-row">
        <div class="info-label">Scope and objectives of sourcing or solicitation process</div>
        <div class="info-value">To procure high-quality medical equipment for healthcare facilities in three countries as part of the Healthcare Capacity Building Initiative.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Specific requirements, conditions and additional information</div>
        <div class="info-value">All equipment must meet international quality standards (ISO 13485, CE marking) and include installation, commissioning, and training services.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Evaluation of submissions</div>
        <div class="info-value">Technical compliance evaluation followed by price comparison of technically compliant offers.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Instructions</div>
        <div class="info-value">Bidders must submit complete technical and financial proposals through the online portal.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Interpretation of the RFP/ITB</div>
        <div class="info-value">In case of any discrepancy, the English version shall prevail.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Bidder eligibility</div>
        <div class="info-value">Open to all legally registered suppliers with valid business licenses and relevant experience.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Clarifications or pre-bid meeting</div>
        <div class="info-value">Clarification requests must be submitted in writing through the portal by the deadline.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Supplier capacity building initiatives</div>
        <div class="info-value">Training webinars available for first-time bidders on the procurement process.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Number of targeted suppliers</div>
        <div class="info-value">Open competition - no limit</div>
      </div>
      <div class="info-row">
        <div class="info-label">Date and time for pre-bid meeting(s)</div>
        <div class="info-value">20 December 2024, 10:00 AM UTC</div>
      </div>
      <div class="info-row">
        <div class="info-label">Type of pre-bid meeting</div>
        <div class="info-value">Virtual (Microsoft Teams)</div>
      </div>
      <div class="info-row">
        <div class="info-label">Pre-bid meeting details</div>
        <div class="info-value">Meeting link will be shared with registered participants 24 hours before the meeting.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Date for site visit or inspection</div>
        <div class="info-value">15 December 2024</div>
      </div>
      <div class="info-row">
        <div class="info-label">Site visit or inspection details</div>
        <div class="info-value">Optional site visit to healthcare facilities. Transportation will be arranged from UNOPS office.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Exclusivity and/or availability statement details</div>
        <div class="info-value">Bidders must confirm product availability and delivery capability for the specified quantities.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Quotation/Bid/Proposal validity period in days</div>
        <div class="info-value">90 days</div>
      </div>
      <div class="info-row">
        <div class="info-label">Quotation/Bid/Proposal currency(ies)</div>
        <div class="info-value">USD (United States Dollar)</div>
      </div>
      <div class="info-row">
        <div class="info-label">Incoterm(s)</div>
        <div class="info-value">DAP (Delivered at Place)</div>
      </div>
      <div class="info-row">
        <div class="info-label">Duties and taxes</div>
        <div class="info-value">UNOPS is exempt from customs duties and taxes. Supplier to provide prices exclusive of taxes.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Languages of quotations/bids/proposals</div>
        <div class="info-value">English</div>
      </div>
      <div class="info-row">
        <div class="info-label">Evaluation method</div>
        <div class="info-value">Lowest Price Technically Compliant (LPTC)</div>
      </div>
      <div class="info-row">
        <div class="info-label">Evaluation method details</div>
        <div class="info-value">Technical evaluation will be pass/fail. Price evaluation for compliant offers only.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Alternative quotations/offers/proposals</div>
        <div class="info-value"><span class="status-badge status-info">Allowed</span></div>
      </div>
      <div class="info-row">
        <div class="info-label">Type of contract to be awarded</div>
        <div class="info-value">Purchase Order</div>
      </div>
      <div class="info-row">
        <div class="info-label">General Conditions of Contract</div>
        <div class="info-value">UNOPS General Conditions of Contract for the Supply of Goods (Rev. 2023)</div>
      </div>
      <div class="info-row">
        <div class="info-label">Public bid/proposal opening</div>
        <div class="info-value"><span class="status-badge status-info">Yes</span></div>
      </div>
      <div class="info-row">
        <div class="info-label">Opening of bid details (Location, date & time)</div>
        <div class="info-value">16 January 2025, 14:00 UTC - UNOPS Headquarters, Virtual attendance available</div>
      </div>
      <div class="info-row">
        <div class="info-label">Payment Terms</div>
        <div class="info-value">30 days after delivery and acceptance of goods</div>
      </div>
      <div class="info-row">
        <div class="info-label">Advance payment allowed?</div>
        <div class="info-value"><span class="status-badge status-info">Yes - Up to 20%</span></div>
      </div>
      <div class="info-row">
        <div class="info-label">Liquidated or Delay damages</div>
        <div class="info-value"><span class="status-badge status-warning">Applicable</span></div>
      </div>
      <div class="info-row">
        <div class="info-label">Liquidated or Delay damages details</div>
        <div class="info-value">0.5% of contract value per week of delay, maximum 10% of total contract value.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Justification for not applying Liquidated Damages or Delay Damages</div>
        <div class="info-value">N/A - Liquidated damages apply</div>
      </div>
      <div class="info-row">
        <div class="info-label">Performance security</div>
        <div class="info-value"><span class="status-badge status-warning">Required</span> - 10% of contract value</div>
      </div>
      <div class="info-row">
        <div class="info-label">Bid/proposal security</div>
        <div class="info-value"><span class="status-badge status-warning">Required</span></div>
      </div>
      <div class="info-row">
        <div class="info-label">Value of bid/proposal security</div>
        <div class="info-value">$5,000 USD</div>
      </div>
      <div class="info-row">
        <div class="info-label">Bid/proposal security details</div>
        <div class="info-value">Bank guarantee or certified check from a reputable financial institution.</div>
      </div>
      <div class="info-row">
        <div class="info-label">Expected Contract award date</div>
        <div class="info-value">15 February 2025</div>
      </div>
      <div class="info-row">
        <div class="info-label">Additional information</div>
        <div class="info-value">Suppliers are encouraged to register in UNGM (United Nations Global Marketplace) prior to submission.</div>
      </div>
    </div>

    <div style="font-size: 10px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; margin: var(--spacing-md) 0 6px;">Contract</div>
    <div class="info-grid-2col">
      <div class="info-row">
        <div class="info-label">UNOPS General Conditions of Contract</div>
        <div class="info-value">UNOPS General Conditions of Contract for the Supply of Goods (Rev. 2023)</div>
      </div>
      <div class="info-row">
        <div class="info-label">UNOPS Special Conditions of Contract</div>
        <div class="info-value">Special Conditions specific to this procurement, including warranty requirements and training obligations.</div>
      </div>
      <div class="info-row">
        <div class="info-label">UNOPS Sample contract</div>
        <div class="info-value">Available in tender documents section for bidder review.</div>
      </div>
    </div>
  </div>

  <!-- Tab Panel: Requirements -->
  <div id="tab-scope" class="tender-tab-panel">
    <div style="font-size: 10px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; margin-bottom: 6px;">Product Requirements & Specifications (UNSPSC Codes)</div>
              <p style="font-size: 11px; color: var(--text-muted); margin-bottom: var(--spacing-sm);">
                Click on each item to view detailed requirements including attributes, required attachments, and descriptions.
              </p>

              <!-- UNSPSC Item 1: Ultrasound Machines -->
            <div class="collapsible-item-card">
              <div class="collapsible-item-header" onclick="toggleItemCard(this, event)">
                <div style="flex: 1;">
                    <div class="unspsc-header">
                      <span class="unspsc-code">42182104</span>
                      <span class="unspsc-category">Medical diagnostic equipment</span>
                    </div>
                    <div style="font-weight: 600; font-size: 15px; margin: 4px 0;">Ultrasound Machines - Portable Systems</div>
                    <div style="font-size: 12px; color: var(--text-muted);">Quantity: 5 Units • Lot 1: Diagnostic Equipment</div>
                </div>
                <span class="collapsible-arrow">▼</span>
              </div>
              <div class="collapsible-item-content">
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-list"></i> Attributes / Specifications</div>
                    <div class="attributes-table">
                      <div class="attribute-row">
                        <span class="attribute-name">Type</span>
                        <span class="attribute-value">Portable Ultrasound System</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Display</span>
                        <span class="attribute-value">Color Doppler with minimum 15" LED monitor</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Probes</span>
                        <span class="attribute-value">Minimum 3 probes (Convex, Linear, Phased Array)</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Imaging Capability</span>
                        <span class="attribute-value">3D/4D imaging capability</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Connectivity</span>
                        <span class="attribute-value">DICOM compatible</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Power</span>
                        <span class="attribute-value">Battery backup included</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Warranty</span>
                        <span class="attribute-value">Minimum 2 years parts and labor</span>
                      </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Delivery</span>
                        <span class="attribute-value">Within 90 days of contract signing</span>
                      </div>
                    </div>
                  </div>
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-paperclip"></i> Required Attachments</div>
                    <div class="attachment-requirements">
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">CE/FDA Certificate</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
                      </div>
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">Product Technical Datasheet</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
                      </div>
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">Product Brochure</span>
                        <span class="attachment-req-status optional">Optional</span>
                      </div>
                    </div>
                  </div>
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-align-left"></i> Additional Description</div>
                    <p class="requirement-description">
                      Bidders must provide portable ultrasound systems suitable for use in resource-limited healthcare settings. Systems must be robust, easy to maintain, and capable of operating in hot and humid climates. Supplier must provide comprehensive training for medical staff (minimum 3 days on-site training per facility).
                    </p>
                  </div>
              </div>
            </div>

              <!-- UNSPSC Item 2: Patient Monitors -->
            <div class="collapsible-item-card">
              <div class="collapsible-item-header" onclick="toggleItemCard(this, event)">
                <div style="flex: 1;">
                    <div class="unspsc-header">
                      <span class="unspsc-code">42182108</span>
                      <span class="unspsc-category">Patient monitoring systems</span>
                    </div>
                    <div style="font-weight: 600; font-size: 15px; margin: 4px 0;">Multi-Parameter Patient Monitors</div>
                    <div style="font-size: 12px; color: var(--text-muted);">Quantity: 20 Units • Lot 1: Diagnostic Equipment</div>
                </div>
                <span class="collapsible-arrow">▼</span>
              </div>
              <div class="collapsible-item-content">
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-list"></i> Attributes / Specifications</div>
                    <div class="attributes-table">
                      <div class="attribute-row">
                        <span class="attribute-name">Type</span>
                        <span class="attribute-value">Multi-Parameter Patient Monitor</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Display</span>
                        <span class="attribute-value">Minimum 12" TFT color LCD touchscreen</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Parameters</span>
                        <span class="attribute-value">ECG (3/5/12 lead), SpO2, NIBP, Temperature, Respiration Rate</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Optional Parameters</span>
                        <span class="attribute-value">IBP (Invasive Blood Pressure)</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Battery</span>
                        <span class="attribute-value">Built-in rechargeable, minimum 4 hours runtime</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Alarms</span>
                        <span class="attribute-value">Visual and audible with adjustable limits</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Warranty</span>
                        <span class="attribute-value">Minimum 2 years parts and labor</span>
                      </div>
                    </div>
                  </div>
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-paperclip"></i> Required Attachments</div>
                    <div class="attachment-requirements">
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">ISO 13485 Certificate</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
                      </div>
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">CE Marking Certificate</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
                      </div>
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">Technical Specifications Sheet</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
                      </div>
                    </div>
                  </div>
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-align-left"></i> Additional Description</div>
                    <p class="requirement-description">
                      Patient monitors must be suitable for critical care environments including ICU, operating theaters, and emergency departments. Equipment must support networking capabilities for central monitoring stations. Supplier to provide user manuals in English and local languages.
                    </p>
                </div>
              </div>
            </div>

              <!-- UNSPSC Item 3: Surgical Lights -->
            <div class="collapsible-item-card">
              <div class="collapsible-item-header" onclick="toggleItemCard(this, event)">
                <div style="flex: 1;">
                    <div class="unspsc-header">
                      <span class="unspsc-code">42192201</span>
                      <span class="unspsc-category">Surgical lighting equipment</span>
                    </div>
                    <div style="font-weight: 600; font-size: 15px; margin: 4px 0;">LED Surgical Operating Lights</div>
                    <div style="font-size: 12px; color: var(--text-muted);">Quantity: 8 Units • Lot 2: Surgical Equipment</div>
                </div>
                <span class="collapsible-arrow">▼</span>
              </div>
              <div class="collapsible-item-content">
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-list"></i> Attributes / Specifications</div>
                    <div class="attributes-table">
                      <div class="attribute-row">
                        <span class="attribute-name">Type</span>
                        <span class="attribute-value">LED Surgical Operating Light, Mobile</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Illumination</span>
                        <span class="attribute-value">Minimum 120,000 lux at 1m distance</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Color Temperature</span>
                        <span class="attribute-value">4000-5000K, adjustable</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">LED Lifespan</span>
                        <span class="attribute-value">Minimum 50,000 hours</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Mobility</span>
                        <span class="attribute-value">Floor mounted with wheels, brake system, 360° rotation</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Warranty</span>
                        <span class="attribute-value">Minimum 3 years parts and labor</span>
                </div>
                    </div>
                  </div>
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-paperclip"></i> Required Attachments</div>
                    <div class="attachment-requirements">
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">IEC 60601-2-41 Compliance Certificate</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
                      </div>
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">Technical Datasheet</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
                      </div>
                    </div>
                </div>
              </div>
            </div>

              <!-- UNSPSC Item 4: Anesthesia Machines -->
            <div class="collapsible-item-card">
              <div class="collapsible-item-header" onclick="toggleItemCard(this, event)">
                <div style="flex: 1;">
                    <div class="unspsc-header">
                      <span class="unspsc-code">42182101</span>
                      <span class="unspsc-category">Anesthesia delivery equipment</span>
                    </div>
                    <div style="font-weight: 600; font-size: 15px; margin: 4px 0;">Advanced Anesthesia Workstations</div>
                    <div style="font-size: 12px; color: var(--text-muted);">Quantity: 3 Units • Lot 3: Anesthesia Equipment</div>
                </div>
                <span class="collapsible-arrow">▼</span>
              </div>
              <div class="collapsible-item-content">
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-list"></i> Attributes / Specifications</div>
                    <div class="attributes-table">
                      <div class="attribute-row">
                        <span class="attribute-name">Type</span>
                        <span class="attribute-value">Advanced Anesthesia Workstation</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Ventilator</span>
                        <span class="attribute-value">Integrated with volume and pressure control modes</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Vaporizers</span>
                        <span class="attribute-value">Minimum 2 agent-specific (Sevoflurane, Isoflurane)</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Monitoring</span>
                        <span class="attribute-value">Integrated O2, CO2, agent concentration, pressure, flow</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Display</span>
                        <span class="attribute-value">15" color touchscreen with waveform display</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Standards</span>
                        <span class="attribute-value">ISO 80601-2-13 compliant</span>
                </div>
                      <div class="attribute-row">
                        <span class="attribute-name">Warranty</span>
                        <span class="attribute-value">Minimum 2 years parts and labor</span>
                </div>
                </div>
              </div>
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-paperclip"></i> Required Attachments</div>
                    <div class="attachment-requirements">
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">ISO 80601-2-13 Compliance Certificate</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
            </div>
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">CE/FDA Certificate</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
            </div>
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">Installation Requirements Document</span>
                        <span class="attachment-req-status mandatory">Mandatory</span>
          </div>
                      <div class="attachment-req-item">
                        <span class="attachment-req-icon">📄</span>
                        <span class="attachment-req-name">Training Curriculum Proposal</span>
                        <span class="attachment-req-status optional">Optional</span>
            </div>
            </div>
            </div>
                  <div class="requirement-section">
                    <div class="requirement-section-title"><i class="pi pi-align-left"></i> Additional Description</div>
                    <p class="requirement-description">
                      Anesthesia machines must be suitable for general surgery and specialized procedures. Supplier must provide comprehensive training for anesthesiologists and biomedical technicians (minimum 5 days). Equipment must include all necessary accessories and consumables for initial setup.
                    </p>
            </div>
            </div>
            </div>


    <!-- Service Descriptions Section -->
    <div style="font-size: 10px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; margin: var(--spacing-md) 0 6px;">Service Descriptions</div>
    <div class="requirements-table-container">
      <table class="requirements-table">
        <thead>
          <tr>
            <th style="width: 25%;">Name</th>
            <th style="width: 50%;">Description</th>
            <th style="width: 25%;">Apply To</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Installation & Commissioning</strong></td>
            <td>Complete installation, configuration, and commissioning of all equipment at designated healthcare facilities including electrical connections and calibration.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
          <tr>
            <td><strong>User Training</strong></td>
            <td>Comprehensive on-site training for medical staff and technicians on equipment operation, safety protocols, and basic troubleshooting.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
          <tr>
            <td><strong>Technical Support</strong></td>
            <td>24/7 remote technical support via phone and email for the duration of the warranty period, with response time within 24 hours.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
          <tr>
            <td><strong>Preventive Maintenance</strong></td>
            <td>Quarterly preventive maintenance visits during the first year of operation, including inspection, cleaning, and software updates.</td>
            <td><span class="apply-to-badge">Lot 1, Lot 3</span></td>
          </tr>
          <tr>
            <td><strong>Documentation</strong></td>
            <td>Provision of all user manuals, technical documentation, and maintenance guides in English and local languages.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Delivery and Specific Requirements Section -->
    <div style="font-size: 10px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; margin: var(--spacing-md) 0 6px;">Delivery and Specific Requirements</div>
    <div class="requirements-table-container">
      <table class="requirements-table">
        <thead>
          <tr>
            <th style="width: 25%;">Name</th>
            <th style="width: 50%;">Description</th>
            <th style="width: 25%;">Apply To</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Delivery Timeline</strong></td>
            <td>All equipment must be delivered within 90 calendar days from contract signing. Partial deliveries are acceptable with prior approval.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
          <tr>
            <td><strong>Packaging Requirements</strong></td>
            <td>Equipment must be packed in export-quality packaging suitable for sea/air freight and protection against humidity and physical damage.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
          <tr>
            <td><strong>Delivery Location - Afghanistan</strong></td>
            <td>Central Medical Supply Warehouse, Kabul. Supplier responsible for customs clearance coordination with UNOPS.</td>
            <td><span class="apply-to-badge">Lot 1, Lot 2</span></td>
          </tr>
          <tr>
            <td><strong>Delivery Location - Bangladesh</strong></td>
            <td>UNOPS Warehouse, Dhaka. Equipment to be delivered DAP with supplier handling all export documentation.</td>
            <td><span class="apply-to-badge">Lot 1, Lot 3</span></td>
          </tr>
          <tr>
            <td><strong>Delivery Location - Ethiopia</strong></td>
            <td>Ministry of Health Central Warehouse, Addis Ababa. Coordination required with local health authorities.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
          <tr>
            <td><strong>Spare Parts</strong></td>
            <td>Initial spare parts kit must be included with each unit as per manufacturer's recommendation for 2 years of operation.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
          <tr>
            <td><strong>Insurance</strong></td>
            <td>Supplier must provide all-risk cargo insurance covering 110% of equipment value from dispatch until final delivery.</td>
            <td><span class="apply-to-badge">All Lots</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    </div>
   <!-- End tab-scope -->

  <!-- Tab Panel: Evaluation -->
  <div id="tab-evaluation" class="tender-tab-panel">
    <div style="font-size: 10px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; margin-bottom: 6px;">Evaluation Method</div>
    <div class="evaluation-method-card">
      <div class="eval-method-header">
        <span class="eval-method-badge">Lowest Price</span>
        <span class="eval-method-title">Lowest Evaluated Substantially Responsive Bid</span>
            </div>
      <p class="eval-method-description">
        Technical evaluation on a pass/fail basis followed by financial comparison of technically compliant bids. The contract will be awarded to the bidder with the lowest evaluated price among substantially responsive offers.
            </p>
            </div>
    <div style="font-size: 10px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.03em; margin: var(--spacing-md) 0 6px;">Evaluation Criteria</div>
    <!-- Eligibility & Formal Criteria -->
    <div class="eval-criteria-group">
      <div class="eval-criteria-group-header">
        <span class="criteria-group-badge eligibility">Eligibility & Formal</span>
        <span class="criteria-group-type">Pass/Fail</span>
          </div>
      <div class="eval-criteria-table">
        <div class="eval-criteria-row">
          <div class="criteria-id">EF-001</div>
          <div class="criteria-details">
            <div class="criteria-name">Bidder's nationality check</div>
            <div class="criteria-desc">Verification of bidder nationality against eligible countries list</div>
            </div>
          <div class="criteria-scope">Entire Tender</div>
            </div>
        <div class="eval-criteria-row">
          <div class="criteria-id">EF-002</div>
          <div class="criteria-details">
            <div class="criteria-name">Registration completeness</div>
            <div class="criteria-desc">Valid UNGM registration with complete company profile</div>
          </div>
          <div class="criteria-scope">Entire Tender</div>
        </div>
        <div class="eval-criteria-row">
          <div class="criteria-id">EF-003</div>
          <div class="criteria-details">
            <div class="criteria-name">Bid submission form completeness</div>
            <div class="criteria-desc">All mandatory forms submitted and properly signed</div>
          </div>
          <div class="criteria-scope">Entire Tender</div>
        </div>
        <div class="eval-criteria-row">
          <div class="criteria-id">EF-004</div>
          <div class="criteria-details">
            <div class="criteria-name">Bid security submission</div>
            <div class="criteria-desc">Valid bid security of $5,000 USD submitted</div>
          </div>
          <div class="criteria-scope">Entire Tender</div>
        </div>
      </div>
    </div>
    <!-- Technical Criteria -->
    <div class="eval-criteria-group">
      <div class="eval-criteria-group-header">
        <span class="criteria-group-badge technical">Technical</span>
        <span class="criteria-group-type">Pass/Fail</span>
      </div>
      <div class="eval-criteria-table">
        <div class="eval-criteria-row">
          <div class="criteria-id">TC-001</div>
          <div class="criteria-details">
            <div class="criteria-name">Technical specifications compliance</div>
            <div class="criteria-desc">Products meet all mandatory technical specifications</div>
          </div>
          <div class="criteria-scope">Per Lot</div>
        </div>
        <div class="eval-criteria-row">
          <div class="criteria-id">TC-002</div>
          <div class="criteria-details">
            <div class="criteria-name">Quality certifications</div>
            <div class="criteria-desc">Valid ISO 13485 and CE/FDA certifications provided</div>
          </div>
          <div class="criteria-scope">Per Lot</div>
        </div>
        <div class="eval-criteria-row">
          <div class="criteria-id">TC-003</div>
          <div class="criteria-details">
            <div class="criteria-name">Warranty requirements</div>
            <div class="criteria-desc">Minimum warranty period as specified per item category</div>
          </div>
          <div class="criteria-scope">Per Lot</div>
        </div>
        <div class="eval-criteria-row">
          <div class="criteria-id">TC-004</div>
          <div class="criteria-details">
            <div class="criteria-name">Delivery timeline compliance</div>
            <div class="criteria-desc">Proposed delivery within specified timeframes</div>
          </div>
          <div class="criteria-scope">Entire Tender</div>
        </div>
        <div class="eval-criteria-row">
          <div class="criteria-id">TC-005</div>
          <div class="criteria-details">
            <div class="criteria-name">After-sales support capability</div>
            <div class="criteria-desc">Demonstrated capacity for training, installation, and maintenance</div>
          </div>
          <div class="criteria-scope">Entire Tender</div>
        </div>
      </div>
    </div>
    <!-- Financial Criteria -->
    <div class="eval-criteria-group">
      <div class="eval-criteria-group-header">
        <span class="criteria-group-badge financial">Financial</span>
        <span class="criteria-group-type">Comparative</span>
      </div>
      <div class="eval-criteria-table">
        <div class="eval-criteria-row">
          <div class="criteria-id">FC-001</div>
          <div class="criteria-details">
            <div class="criteria-name">Total evaluated price</div>
            <div class="criteria-desc">Lowest total price including delivery, installation, training, and warranty</div>
          </div>
          <div class="criteria-scope">Per Lot / Entire</div>
        </div>
        <div class="eval-criteria-row">
          <div class="criteria-id">FC-002</div>
          <div class="criteria-details">
            <div class="criteria-name">Price reasonableness</div>
            <div class="criteria-desc">Prices aligned with market rates and not abnormally low</div>
          </div>
          <div class="criteria-scope">Entire Tender</div>
        </div>
      </div>
    </div>
    <div class="evaluation-note">
      <i class="pi pi-info-circle"></i>
      <span>Bids must pass all Eligibility & Formal and Technical criteria to proceed to financial evaluation. Award will be made to the lowest priced technically compliant bid.</span>
    </div>
  </div>

  <!-- Tab Panel: Tender Documents & Forms (Merged Content + Submission) -->
  <div id="tab-documents-forms" class="tender-tab-panel">
    
    <!-- SECTION 1: Documents (formerly Content tab) -->
    <div class="documents-forms-section">
      <div style="display: flex; align-items: center; gap: 8px; margin-bottom: var(--spacing-sm);">
        <i class="pi pi-file" style="font-size: 14px; color: var(--primary-500);"></i>
        <span style="font-size: 13px; font-weight: 600; color: var(--text-primary);">Documents</span>
      </div>
      <p style="font-size: 11px; color: var(--text-muted); margin-bottom: var(--spacing-sm);">Tender documents, instructions, and contract templates</p>
      
      <div style="font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; margin-bottom: var(--spacing-sm);">Tender Documentation</div>
      <div class="document-download-list">
        <div class="document-download-item">
          <div class="document-info">
            <span class="document-icon"><i class="pi pi-file-pdf" style="font-size: 16px; color: #e74c3c;"></i></span>
            <div>
              <div class="document-name">Instructions to Bidders (ITB)</div>
              <div class="document-meta">PDF • 2.4 MB • Updated 5 Dec 2024</div>
            </div>
          </div>
          <div class="document-actions">
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); alert('Opening document viewer...')"><i class="pi pi-eye"></i> View</button>
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation();"><i class="pi pi-download"></i> Download</button>
          </div>
        </div>
        <div class="document-download-item">
          <div class="document-info">
            <span class="document-icon"><i class="pi pi-file-pdf" style="font-size: 16px; color: #e74c3c;"></i></span>
            <div>
              <div class="document-name">Technical Specifications</div>
              <div class="document-meta">PDF • 1.8 MB • Updated 5 Dec 2024</div>
            </div>
          </div>
          <div class="document-actions">
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); alert('Opening document viewer...')"><i class="pi pi-eye"></i> View</button>
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation();"><i class="pi pi-download"></i> Download</button>
          </div>
        </div>
        <div class="document-download-item">
          <div class="document-info">
            <span class="document-icon"><i class="pi pi-file-excel" style="font-size: 16px; color: #27ae60;"></i></span>
            <div>
              <div class="document-name">Bill of Quantities</div>
              <div class="document-meta">Excel • 156 KB • Updated 5 Dec 2024</div>
            </div>
          </div>
          <div class="document-actions">
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); alert('Opening document viewer...')"><i class="pi pi-eye"></i> View</button>
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation();"><i class="pi pi-download"></i> Download</button>
          </div>
        </div>
        <div class="document-download-item">
          <div class="document-info">
            <span class="document-icon"><i class="pi pi-file-pdf" style="font-size: 16px; color: #e74c3c;"></i></span>
            <div>
              <div class="document-name">Returnable Bidding Forms</div>
              <div class="document-meta">PDF • 890 KB • Updated 5 Dec 2024</div>
            </div>
          </div>
          <div class="document-actions">
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); alert('Opening document viewer...')"><i class="pi pi-eye"></i> View</button>
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation();"><i class="pi pi-download"></i> Download</button>
          </div>
        </div>
      <div class="document-download-list">
        <div class="document-download-item">
          <div class="document-info">
            <span class="document-icon"><i class="pi pi-file" style="font-size: 16px; color: #8e44ad;"></i></span>
            <div>
              <div class="document-name">General Conditions of Contract (GCC)</div>
              <div class="document-meta">PDF • 1.2 MB</div>
            </div>
          </div>
          <div class="document-actions">
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); alert('Opening document viewer...')"><i class="pi pi-eye"></i> View</button>
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation();"><i class="pi pi-download"></i> Download</button>
          </div>
        </div>
        <div class="document-download-item">
          <div class="document-info">
            <span class="document-icon"><i class="pi pi-file" style="font-size: 16px; color: #8e44ad;"></i></span>
            <div>
              <div class="document-name">Special Conditions of Contract (SCC)</div>
              <div class="document-meta">PDF • 450 KB</div>
            </div>
          </div>
          <div class="document-actions">
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); alert('Opening document viewer...')"><i class="pi pi-eye"></i> View</button>
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation();"><i class="pi pi-download"></i> Download</button>
          </div>
        </div>
        <div class="document-download-item">
          <div class="document-info">
            <span class="document-icon"><i class="pi pi-file" style="font-size: 16px; color: #8e44ad;"></i></span>
            <div>
              <div class="document-name">Contract Agreement Template</div>
              <div class="document-meta">PDF • 320 KB</div>
            </div>
          </div>
          <div class="document-actions">
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation(); alert('Opening document viewer...')"><i class="pi pi-eye"></i> View</button>
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation();"><i class="pi pi-download"></i> Download</button>
          </div>
        </div>
      </div>
      </div>
    </div>
    
    <!-- Divider between sections -->
    <div style="border-top: 1px solid var(--border-light); margin: var(--spacing-lg) 0;"></div>
    
    <!-- SECTION 2: Forms (formerly Submission tab) -->
    <div class="documents-forms-section">
      <div style="display: flex; align-items: center; gap: 8px; margin-bottom: var(--spacing-sm);">
        <i class="pi pi-list" style="font-size: 14px; color: var(--primary-500);"></i>
        <span style="font-size: 13px; font-weight: 600; color: var(--text-primary);">Forms</span>
      </div>
      <p style="font-size: 11px; color: var(--text-muted); margin-bottom: var(--spacing-sm);">Required submission forms and requirements</p>
      
      <div class="submission-form-list">
        <div class="submission-form-item">
          <div class="submission-form-header">
            <div class="submission-form-name"><i class="pi pi-users"></i>Form A: JV Partner Info</div>
            <span class="form-status-badge conditional">If JV</span>
          </div>
          <div class="attachment-summary">
            <span class="attachment-count required"><i class="pi pi-paperclip"></i> 2 docs</span>
          </div>
        </div>
        <div class="submission-form-item">
          <div class="submission-form-header">
            <div class="submission-form-name"><i class="pi pi-file-edit"></i>Form B: Bid Submission</div>
            <span class="form-status-badge required">Required</span>
          </div>
          <div class="attachment-summary">
            <span class="attachment-count required"><i class="pi pi-paperclip"></i> 1 doc</span>
            <span class="attachment-count from-profile"><i class="pi pi-star-fill"></i> 2 from profile</span>
          </div>
        </div>
        <div class="submission-form-item">
          <div class="submission-form-header">
            <div class="submission-form-name"><i class="pi pi-dollar"></i>Form C: Price Schedule</div>
            <span class="form-status-badge required">Required</span>
          </div>
          <div class="attachment-summary">
            <span class="attachment-count required"><i class="pi pi-paperclip"></i> 1 doc</span>
          </div>
        </div>
        <div class="submission-form-item">
          <div class="submission-form-header">
            <div class="submission-form-name"><i class="pi pi-cog"></i>Form D: Technical Bid</div>
            <span class="form-status-badge required">Required</span>
          </div>
          <div class="attachment-summary">
            <span class="attachment-count required"><i class="pi pi-paperclip"></i> 3 docs</span>
          </div>
        </div>
        <div class="submission-form-item">
          <div class="submission-form-header">
            <div class="submission-form-name"><i class="pi pi-chart-line"></i>Form G: Performance</div>
            <span class="form-status-badge required">Required</span>
          </div>
          <div class="attachment-summary">
            <span class="attachment-count from-profile"><i class="pi pi-star-fill"></i> 1 from profile</span>
          </div>
        </div>
        <div class="submission-form-item">
          <div class="submission-form-header">
            <div class="submission-form-name"><i class="pi pi-check-square"></i>Form H: Self Disclosure</div>
            <span class="form-status-badge required">Required</span>
          </div>
          <div class="attachment-summary">
            <span style="color: var(--text-muted); font-size: 11px;">No attachments</span>
          </div>
        </div>
        <div class="submission-form-item">
          <div class="submission-form-header">
            <div class="submission-form-name"><i class="pi pi-shield"></i>DRiVE Assessment</div>
            <span class="form-status-badge required">Required</span>
          </div>
          <div class="attachment-summary">
            <span class="attachment-count required"><i class="pi pi-paperclip"></i> 1 doc</span>
            <span class="attachment-count from-profile"><i class="pi pi-star-fill"></i> 1 from profile</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tab Panel: Amendments -->
  <div id="tab-amendments" class="tender-tab-panel">
            <div class="amendment-list">
              <div class="amendment-card">
                <div class="amendment-header-card">
                  <span class="amendment-badge"><i class="pi pi-pencil" style="font-size: 9px; margin-right: 4px;"></i>Amendment #2</span>
                  <span class="amendment-date-card">18 Dec 2024</span>
                </div>
                <div class="amendment-title">Clarification Deadline Extension</div>
                <p class="amendment-description">The clarification deadline has been extended from 5 January 2025 to 10 January 2025.</p>
                <div class="amendment-actions">
                  <button class="btn btn-link btn-sm"><i class="pi pi-file" style="font-size: 11px;"></i> View Notice</button>
                </div>
              </div>
              <div class="amendment-card">
                <div class="amendment-header-card">
                  <span class="amendment-badge"><i class="pi pi-pencil" style="font-size: 9px; margin-right: 4px;"></i>Amendment #1</span>
                  <span class="amendment-date-card">12 Dec 2024</span>
                </div>
                <div class="amendment-title">Technical Specification Update</div>
                <p class="amendment-description">Updated specifications for Patient Monitors (Item 2) - IBP monitoring now optional.</p>
                <div class="amendment-actions">
            <button class="btn btn-link btn-sm"><i class="pi pi-file" style="font-size: 11px;"></i> View Notice</button>
            <button class="btn btn-link btn-sm"><i class="pi pi-list" style="font-size: 11px;"></i> View Specs</button>
              </div>
            </div>
            </div>
          </div>


  <!-- Tab Panel: Clarifications -->
  <div id="tab-clarifications" class="tender-tab-panel">
    <div style="display: flex; justify-content: flex-end; margin-bottom: var(--spacing-sm);">
      <button class="btn btn-link btn-sm" onclick="openModal('ask-clarification-modal')"><i class="pi pi-plus" style="font-size: 10px;"></i> Ask a Question</button>
</div>
<div class="clarification-item">
<div class="clarification-header">
        <span class="clarification-number"><i class="pi pi-question-circle" style="font-size: 10px; margin-right: 4px;"></i>Q #003</span>
<span class="clarification-date">9 Dec 2024</span>
</div>
<div class="clarification-question">
        <div class="clarification-label"><i class="pi pi-question" style="font-size: 9px; margin-right: 3px;"></i>Question</div>
        <p>Can ultrasound machines be from different manufacturers?</p>
</div>
<div class="clarification-answer">
        <div class="clarification-label"><i class="pi pi-check" style="font-size: 9px; margin-right: 3px;"></i>Answer</div>
        <p>Yes, acceptable if meeting ISO standards.</p>
</div>
</div>
  </div> <!-- End tab-clarifications -->

  <!-- Tab Panel: Award Evaluation -->
  <div id="tab-award" class="tender-tab-panel">
    <div class="empty-state" style="text-align: center; padding: var(--spacing-2xl);">
      <div style="font-size: 48px; margin-bottom: var(--spacing-md); opacity: 0.3;">
        <i class="pi pi-trophy"></i>
      </div>
      <h3 style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Award Evaluation Not Available</h3>
      <p style="font-size: 13px; color: var(--text-muted); max-width: 400px; margin: 0 auto;">
        Award evaluation information will be available once the evaluation process has been completed and a decision has been made.
      </p>
    </div>
  </div> <!-- End tab-award -->

    </div> <!-- End tender-tabs-container -->
  </div> <!-- End tender-overview-grid -->

  <!-- Sidebar hidden - all content now in tabs -->
  <div class="overview-sidebar" style="display: none;">
<div class="overview-section">
<h3 class="overview-section-title">
<i class="pi pi-calendar overview-section-icon"></i>
Key Dates
</h3>
<div class="timeline">
<div class="timeline-item">
<div class="timeline-date">5 Dec 2024</div>
<div class="timeline-content">Published</div>
</div>
<div class="timeline-item">
<div class="timeline-date">10 Jan 2025</div>
<div class="timeline-content">Clarification Deadline</div>
</div>
<div class="timeline-item">
<div class="timeline-date">15 Jan 2025</div>
<div class="timeline-content">Submission Deadline</div>
</div>
</div>
</div>

<div class="overview-section">
<h3 class="overview-section-title">
<i class="pi pi-upload overview-section-icon"></i>
Submission Requirements
</h3>
<div class="info-box-compact">
<i class="pi pi-star-fill" style="color: var(--success-500);"></i>
<span>= auto-filled from profile</span>
</div>

<div class="submission-summary-compact">
  <span><i class="pi pi-file-edit"></i> 7 forms</span>
  <span class="divider">•</span>
  <span><i class="pi pi-paperclip"></i> 12 docs</span>
  <span class="divider">•</span>
  <span class="from-profile"><i class="pi pi-star-fill"></i> 4 auto</span>
</div>

<div class="submission-form-list">
<div class="submission-form-item">
<div class="submission-form-header">
  <div class="submission-form-name"><i class="pi pi-users"></i>Form A: JV Partner Info</div>
  <span class="form-status-badge conditional">If JV</span>
</div>
<div class="attachment-summary">
  <span class="attachment-count required"><i class="pi pi-paperclip"></i> 2 docs</span>
</div>
</div>

<div class="submission-form-item">
<div class="submission-form-header">
  <div class="submission-form-name"><i class="pi pi-file-edit"></i>Form B: Bid Submission</div>
  <span class="form-status-badge required">Required</span>
</div>
<div class="attachment-summary">
  <span class="attachment-count required"><i class="pi pi-paperclip"></i> 1 doc</span>
  <span class="attachment-count from-profile"><i class="pi pi-star-fill"></i> 2 from profile</span>
</div>
</div>

<div class="submission-form-item">
<div class="submission-form-header">
  <div class="submission-form-name"><i class="pi pi-dollar"></i>Form C: Price Schedule</div>
  <span class="form-status-badge required">Required</span>
</div>
<div class="attachment-summary">
  <span class="attachment-count required"><i class="pi pi-paperclip"></i> 1 doc</span>
</div>
</div>

<div class="submission-form-item">
<div class="submission-form-header">
  <div class="submission-form-name"><i class="pi pi-cog"></i>Form D: Technical Bid</div>
  <span class="form-status-badge required">Required</span>
</div>
<div class="attachment-summary">
  <span class="attachment-count required"><i class="pi pi-paperclip"></i> 3 docs</span>
</div>
</div>

<div class="submission-form-item">
<div class="submission-form-header">
  <div class="submission-form-name"><i class="pi pi-chart-line"></i>Form G: Performance</div>
  <span class="form-status-badge required">Required</span>
</div>
<div class="attachment-summary">
  <span class="attachment-count from-profile"><i class="pi pi-star-fill"></i> 1 from profile</span>
</div>
</div>

<div class="submission-form-item">
<div class="submission-form-header">
  <div class="submission-form-name"><i class="pi pi-check-square"></i>Form H: Self Disclosure</div>
  <span class="form-status-badge required">Required</span>
</div>
<div class="attachment-summary">
  <span style="color: var(--text-muted); font-size: 11px;">No attachments</span>
</div>
</div>

<div class="submission-form-item">
<div class="submission-form-header">
  <div class="submission-form-name"><i class="pi pi-shield"></i>DRiVE Assessment</div>
  <span class="form-status-badge required">Required</span>
</div>
<div class="attachment-summary">
  <span class="attachment-count required"><i class="pi pi-paperclip"></i> 1 doc</span>
  <span class="attachment-count from-profile"><i class="pi pi-star-fill"></i> 1 from profile</span>
</div>
</div>
</div>
  </div> <!-- End overview-section -->
  </div> <!-- End overview-sidebar -->
</div> <!-- End main-content-tender-details -->
</div> <!-- End view-tender-details -->

<!-- Bid Submission View -->
<div class="view-section" id="view-bid-submission">
  <div id="main-content-bid-submission" class="main-content">
          <div class="tender-info-banner">
  <div class="tender-banner-ref">📋 Reference: UNOPS/ITB/2025/001</div>
  <h2 class="tender-banner-title">Supply and Delivery of Medical Equipment and Supplies</h2>
  <div class="tender-meta">
  <div class="meta-item">
  <span class="meta-label">📄 Tender Type</span>
  <span class="meta-value">ITB - Invitation to Bid</span>
  </div>
  <div class="meta-item">
  <span class="meta-label">📦 Category</span>
  <span class="meta-value">Goods</span>
  </div>
  <div class="meta-item">
  <span class="meta-label">🌐 Competition</span>
  <span class="meta-value">Public Competition</span>
  </div>
  <div class="meta-item">
  <span class="meta-label">💰 Estimated Value</span>
  <span class="meta-value">$250,000 USD</span>
  </div>
  <div class="meta-item">
  <span class="meta-label">🌍 Language</span>
  <span class="meta-value">English</span>
  </div>
  <div class="meta-item">
  <span class="meta-label">⏳ Bid Validity</span>
  <span class="meta-value">90 days from deadline</span>
  </div>
  </div>
  </div>
  
  <!-- Compact Tender Timeline for Bid Submission -->
  <div class="tender-timeline-banner compact">
    <div class="timeline-banner-header">
      <!-- Action Bar at Top -->

      <div style="display: flex; align-items: center; gap: 6px;">
        <button class="btn btn-ghost" style="padding: 6px 12px; font-size: 12px; font-weight: 600;"><i class="pi pi-save" style="margin-right: 4px; font-size: 12px;"></i>Save</button>
        <button class="btn btn-primary" style="padding: 6px 12px; font-size: 12px; font-weight: 600;" disabled><i class="pi pi-send" style="margin-right: 4px; font-size: 12px;"></i>Submit</button>
        <div class="timeline-remaining" style="margin-left: var(--spacing-sm);">
        <i class="pi pi-clock"></i>
        <span class="timeline-remaining-text">5d 14h to submission</span>
        </div>
      </div>
    </div>
    
    <div class="horizontal-timeline compact">
      <div class="timeline-track">
        <div class="timeline-progress" style="width: 72%;"></div>
        <div class="timeline-today-marker" style="left: 72%;">
          <div class="today-marker-label">Today</div>
          <div class="today-marker-dot"></div>
        </div>
        <div class="timeline-points">
          <div class="timeline-point completed" style="left: 0%;">
            <div class="timeline-point-dot"></div>
            <div class="timeline-point-content">
              <div class="timeline-point-label">Published</div>
              <div class="timeline-point-date">5 Dec</div>
            </div>
          </div>
          <div class="timeline-point completed" style="left: 18%;">
            <div class="timeline-point-dot"></div>
            <div class="timeline-point-content">
              <div class="timeline-point-label">Site Visit</div>
              <div class="timeline-point-date">15 Dec</div>
            </div>
          </div>
          <div class="timeline-point completed" style="left: 55%;">
            <div class="timeline-point-dot"></div>
            <div class="timeline-point-content">
              <div class="timeline-point-label">Clarifications</div>
              <div class="timeline-point-date">10 Jan</div>
            </div>
          </div>
          <div class="timeline-point active" style="left: 80%;">
            <div class="timeline-point-dot"></div>
            <div class="timeline-point-content">
              <div class="timeline-point-label">Submission</div>
              <div class="timeline-point-date">15 Jan</div>
            </div>
          </div>
          <div class="timeline-point future" style="left: 88%;">
            <div class="timeline-point-dot"></div>
            <div class="timeline-point-content">
              <div class="timeline-point-label">Bid Opening</div>
              <div class="timeline-point-date">16 Jan</div>
            </div>
          </div>
          <div class="timeline-point future" style="left: 100%;">
            <div class="timeline-point-dot"></div>
            <div class="timeline-point-content">
              <div class="timeline-point-label">Award</div>
              <div class="timeline-point-date">15 Feb</div>
            </div>
          </div>
        </div>
      </div>
  </div>
  </div>
  
  <!-- =====================================================================
       ENHANCED SUPPLIER BID FORMS - PROGRESS TRACKER LAYOUT
       ===================================================================== -->
  <div id="enhanced-supplier-bid-forms">
    
    <!-- Progress Tracker -->
    <div class="supplier-progress-tracker">
      <div class="supplier-progress-header">
        <h2><i class="pi pi-check-square" style="margin-right: 6px;"></i>Your Bid Progress</h2>
        <div class="supplier-progress-stats">
          <div class="supplier-progress-stat">
            <span class="supplier-progress-stat-value" id="supplierProgressPercent">0%</span>
            <span>Complete</span>
          </div>
          <div class="supplier-progress-stat">
            <span class="supplier-progress-stat-value" id="supplierProgressSteps">0/6</span>
            <span>Sections</span>
          </div>
    </div>
  </div>
  
      <div class="supplier-progress-steps">
        <div class="supplier-progress-step active" onclick="showSupplierSection('bidder-info')">
          <div class="supplier-step-check">✓</div>
          <span class="supplier-step-icon">👤</span>
          <div class="supplier-step-title">Bidder's Information</div>
          <div class="supplier-step-status">In progress</div>
        </div>

        <div class="supplier-progress-step" onclick="showSupplierSection('technical-bid')">
          <div class="supplier-step-check">✓</div>
          <span class="supplier-step-icon">⚙️</span>
          <div class="supplier-step-title">Technical Bid</div>
          <div class="supplier-step-status">Not started</div>
        </div>

        <div class="supplier-progress-step" onclick="showSupplierSection('financial-bid')">
          <div class="supplier-step-check">✓</div>
          <span class="supplier-step-icon">💰</span>
          <div class="supplier-step-title">Financial Bid</div>
          <div class="supplier-step-status">Not started</div>
        </div>

        <div class="supplier-progress-step" onclick="showSupplierSection('qualification')">
          <div class="supplier-step-check">✓</div>
          <span class="supplier-step-icon">🎯</span>
          <div class="supplier-step-title">Qualification & Eligibility</div>
          <div class="supplier-step-status">Not started</div>
        </div>

        <div class="supplier-progress-step" onclick="showSupplierSection('other-forms')">
          <div class="supplier-step-check">✓</div>
          <span class="supplier-step-icon">📋</span>
          <div class="supplier-step-title">Other Forms</div>
          <div class="supplier-step-status">Not started</div>
        </div>

        <div class="supplier-progress-step" onclick="showSupplierSection('compliance')">
          <div class="supplier-step-check">✓</div>
          <span class="supplier-step-icon">✅</span>
          <div class="supplier-step-title">Compliance & Declarations</div>
          <div class="supplier-step-status">Not started</div>
        </div>
      </div>
    </div>

    <!-- ========== SECTION 1: BIDDER'S INFORMATION ========== -->
    <div class="supplier-section-card active" id="supplier-section-bidder-info">
      <div class="supplier-section-header">
        <div class="supplier-section-title">
          <span class="supplier-section-title-icon">👤</span>
          <div>
            <h3>Bidder's Information</h3>
            <p>Provide your company details and contact information</p>
          </div>
        </div>
      </div>

      <!-- Bidding For Selection -->
      <div style="background: var(--surface-50); padding: var(--spacing-sm); border: 1px solid var(--surface-200); border-radius: var(--radius-sm); margin-bottom: var(--spacing-md);">
        <label style="font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block; font-size: 12px;">
          <i class="pi pi-list" style="margin-right: 6px; font-size: 12px;"></i> Bidding for <span style="color: var(--danger-500);">*</span>
        </label>
        <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 6px;">
          <div style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: white; border: 1px solid var(--surface-300); border-radius: var(--radius-sm); cursor: pointer;">
            <input type="radio" name="biddingFor" id="biddingForEntireTender" value="entire-tender" checked onchange="toggleBiddingForSelection(this)" style="width: 14px; height: 14px; accent-color: var(--primary-500);">
            <label for="biddingForEntireTender" style="cursor: pointer; font-weight: 500; color: var(--text-secondary); font-size: 12px; flex: 1;">
              <i class="pi pi-check-circle" style="margin-right: 4px; font-size: 11px;"></i> Entire Tender
            </label>
          </div>
          <div style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: white; border: 1px solid var(--surface-300); border-radius: var(--radius-sm); cursor: pointer;">
            <input type="checkbox" name="biddingForLot1" id="biddingForLot1" value="lot-1" onchange="toggleBiddingForSelection(this)" style="width: 14px; height: 14px; accent-color: var(--primary-500);">
            <label for="biddingForLot1" style="cursor: pointer; font-weight: 500; color: var(--text-secondary); font-size: 12px; flex: 1;">
              <i class="pi pi-box" style="margin-right: 4px; font-size: 11px;"></i> Lot 1: Diagnostic Equipment
              <span style="color: var(--success-600); font-weight: 600; margin-left: 8px;">$100,000</span>
            </label>
          </div>
          <div style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: white; border: 1px solid var(--surface-300); border-radius: var(--radius-sm); cursor: pointer;">
            <input type="checkbox" name="biddingForLot2" id="biddingForLot2" value="lot-2" onchange="toggleBiddingForSelection(this)" style="width: 14px; height: 14px; accent-color: var(--primary-500);">
            <label for="biddingForLot2" style="cursor: pointer; font-weight: 500; color: var(--text-secondary); font-size: 12px; flex: 1;">
              <i class="pi pi-box" style="margin-right: 4px; font-size: 11px;"></i> Lot 2: Surgical Supplies
              <span style="color: var(--success-600); font-weight: 600; margin-left: 8px;">$150,000</span>
            </label>
          </div>
        </div>
        
        <!-- Reason for not bidding all items (hidden by default) -->
        <div id="notBiddingAllReason" style="display: none; margin-top: var(--spacing-sm); padding-top: var(--spacing-sm); border-top: 1px dashed var(--surface-300);">
          <label style="font-weight: 600; color: var(--warning-600); margin-bottom: 6px; display: block; font-size: 12px;">
            <i class="pi pi-info-circle" style="margin-right: 6px; font-size: 12px;"></i> Reason for not bidding on all items <span style="color: var(--danger-500);">*</span>
          </label>
          <select id="notBiddingReasonSelect" style="width: 100%; padding: 8px 12px; border: 1px solid var(--surface-300); border-radius: var(--radius-sm); font-size: 12px; background: white; color: var(--text-primary);">
            <option value="">-- Select a reason --</option>
            <option value="not-in-range">The requirements were not within our range of supply</option>
            <option value="not-competitive">We are unable to submit a competitive offer for the requirements at the moment</option>
            <option value="capacity-constraints">Current capacity constraints prevent us from fulfilling all requirements</option>
            <option value="technical-limitations">Technical limitations for certain items/lots</option>
            <option value="geographic-restrictions">Geographic or delivery restrictions for certain items/lots</option>
            <option value="regulatory-compliance">Regulatory or compliance issues with certain items/lots</option>
            <option value="other">Other (please specify)</option>
          </select>
          <div id="otherReasonContainer" style="display: none; margin-top: 8px;">
            <textarea id="otherReasonText" placeholder="Please specify your reason..." rows="2" style="width: 100%; padding: 8px 12px; border: 1px solid var(--surface-300); border-radius: var(--radius-sm); font-size: 12px; resize: vertical;"></textarea>
          </div>
        </div>
      </div>

      <!-- Pre-bid Meeting Participation -->
      <div style="background: var(--surface-50); padding: var(--spacing-sm); border: 1px solid var(--surface-200); border-radius: var(--radius-sm); margin-bottom: var(--spacing-md);">
        <label style="font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block; font-size: 12px;">
          <i class="pi pi-calendar" style="margin-right: 6px; font-size: 12px;"></i> Pre-bid Meeting
        </label>
        <div style="display: flex; align-items: center; gap: 8px; margin-top: 6px; padding: 8px 12px; background: white; border: 1px solid var(--surface-300); border-radius: var(--radius-sm);">
          <input type="checkbox" name="preBidMeeting" id="preBidMeetingParticipation" value="yes" style="width: 16px; height: 16px; accent-color: var(--primary-500);">
          <label for="preBidMeetingParticipation" style="cursor: pointer; font-weight: 500; color: var(--text-secondary); font-size: 12px;">
            <i class="pi pi-users" style="margin-right: 4px; font-size: 11px;"></i> I intend to participate in the pre-bid meeting
          </label>
        </div>
        <p style="font-size: 11px; color: var(--text-muted); margin-top: 6px; margin-bottom: 0;">
          <i class="pi pi-info-circle" style="margin-right: 4px;"></i> 
          The pre-bid meeting allows bidders to ask questions and seek clarifications about the tender requirements.
        </p>
      </div>

      <!-- Bidding As Selection -->


      <div style="background: var(--surface-50); padding: var(--spacing-sm); border: 1px solid var(--surface-200); border-radius: var(--radius-sm); margin-bottom: var(--spacing-md);">
        <label style="font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block; font-size: 12px;">
          <i class="pi pi-briefcase" style="margin-right: 6px; font-size: 12px;"></i> Bidding as <span style="color: var(--danger-500);">*</span>
        </label>
        <div style="display: flex; gap: 12px; margin-top: 6px;">
          <div style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: white; border: 1px solid var(--surface-300); border-radius: var(--radius-sm); cursor: pointer;">
            <input type="radio" name="supplierBidType" id="supplierSingle" value="single" checked onchange="toggleSupplierConsortium()" style="width: 14px; height: 14px; accent-color: var(--primary-500);">
            <label for="supplierSingle" style="cursor: pointer; font-weight: 500; color: var(--text-secondary); font-size: 12px;"><i class="pi pi-building" style="margin-right: 4px; font-size: 11px;"></i> Single Company</label>
          </div>
          <div style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: white; border: 1px solid var(--surface-300); border-radius: var(--radius-sm); cursor: pointer;">
            <input type="radio" name="supplierBidType" id="supplierConsortium" value="consortium" onchange="toggleSupplierConsortium()" style="width: 14px; height: 14px; accent-color: var(--primary-500);">
            <label for="supplierConsortium" style="cursor: pointer; font-weight: 500; color: var(--text-secondary); font-size: 12px;"><i class="pi pi-users" style="margin-right: 4px; font-size: 11px;"></i> Joint Venture / Consortium</label>
          </div>
        </div>
      </div>

      <!-- Single Company Section -->
      <div id="supplierSingleCompanySection">
        <div class="supplier-subsection-header">
          <strong><i class="pi pi-building"></i> Company Details</strong>
        </div>

        <div class="supplier-form-grid">
          <div class="supplier-form-field">
            <label><i class="pi pi-id-card"></i> Company Legal Name <span style="color: var(--danger-500);">*</span></label>
            <input type="text" placeholder="Enter full legal name">
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-verified"></i> UNGM Vendor ID <span style="color: var(--text-muted); font-weight: 400;">(if registered)</span></label>
            <div style="display: flex; gap: 8px;">
              <input type="text" placeholder="UNGM-XXXXXX" style="flex: 1;">
              <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;"><i class="pi pi-search"></i> Verify</button>
            </div>
          </div>
        </div>

        <div class="supplier-form-field full-width" style="margin-bottom: var(--spacing-sm);">
          <label><i class="pi pi-map-marker"></i> Full Business Address <span style="color: var(--danger-500);">*</span></label>
          <textarea placeholder="Street address, City, State/Province, Postal Code, Country" rows="2"></textarea>
        </div>

        <div class="supplier-form-grid">
          <div class="supplier-form-field">
            <label><i class="pi pi-envelope"></i> Primary Contact Email <span style="color: var(--danger-500);">*</span></label>
            <input type="email" placeholder="contact@company.com">
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-phone"></i> Phone Number <span style="color: var(--danger-500);">*</span></label>
            <input type="tel" placeholder="+X-XXX-XXX-XXXX">
          </div>
        </div>
      </div>

      <!-- Consortium Section (hidden by default) -->
      <div id="supplierConsortiumSection" style="display: none;">
        <div class="supplier-subsection-header warning">
          <strong><i class="pi pi-users" style="color: var(--warning-500);"></i> JV / Consortium / Association Information</strong>
        </div>

        <div class="supplier-form-field" style="margin-bottom: var(--spacing-sm);">
          <label><i class="pi pi-sitemap"></i> JV / Consortium / Association Name <span style="color: var(--danger-500);">*</span></label>
          <input type="text" placeholder="Enter the name of the Joint Venture, Consortium, or Association">
          
        </div>

        <div class="supplier-info-banner">
          <span class="supplier-info-banner-icon">ℹ️</span>
          <div>
            Add all partners in the Joint Venture/Consortium/Association below. For each partner, provide complete contact information and specify their share of responsibility. One partner must be designated as the <strong>Leading Partner</strong> who will have authority to bind the JV during the bidding process and contract execution.
          </div>
        </div>

        <div id="supplierPartnerCards">
          <!-- Partner cards will be added here dynamically -->
        </div>

        <div style="background: var(--surface-100); border: 1px solid var(--surface-200); border-radius: var(--radius-md); padding: var(--spacing-md); margin: var(--spacing-md) 0; display: flex; justify-content: space-between; align-items: center;">
          <span style="font-weight: 600; font-size: 12px;">Total Share: <span id="supplierTotalShare" style="color: var(--primary-600); font-size: 13px;">0%</span></span>
          <span id="supplierShareStatus" style="color: var(--warning-500);">⚠ Must equal 100%</span>
        </div>

        <button class="btn btn-secondary" onclick="addSupplierPartner()" style="width: 100%; padding: 8px; border-style: dashed; font-size: 12px;">
          <i class="pi pi-plus" style="margin-right: 6px; font-size: 11px;"></i> Add Partner
        </button>

        <div class="supplier-info-banner warning" style="margin-top: var(--spacing-sm);">
          <span class="supplier-info-banner-icon">⚠️</span>
          <div>
            We hereby confirm that if the contract is awarded, all parties of the Joint Venture/Consortium/Association shall be jointly and severally liable to UNOPS for the fulfillment of the provisions of the Contract.
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-sm); margin-top: var(--spacing-md);">
          <button class="btn btn-primary" style="width: 100%; font-size: 12px; padding: 8px;">
            <i class="pi pi-download" style="margin-right: 6px; font-size: 11px;"></i> Download Form as PDF
          </button>
          <div class="supplier-upload-area" style="padding: var(--spacing-sm);">
            <div style="color: var(--primary-600); font-size: 2em; margin-bottom: 8px;"><i class="pi pi-upload"></i></div>
            <div class="supplier-upload-text">Upload Signed Document</div>
            <div class="supplier-upload-hint">Click or drag file here</div>
          </div>
        </div>
      </div>

      <div class="supplier-action-bar">
        <button class="btn btn-ghost"><i class="pi pi-save" style="margin-right: 6px;"></i> Save Draft</button>
        <button class="btn btn-primary" onclick="nextSupplierSection('technical-bid')">Continue to Technical Bid <i class="pi pi-arrow-right" style="margin-left: 6px;"></i></button>
      </div>
    </div>

    <!-- ========== SECTION 2: TECHNICAL BID ========== -->
    <div class="supplier-section-card" id="supplier-section-technical-bid">
      <div class="supplier-section-header">
        <div class="supplier-section-title">
          <span class="supplier-section-title-icon">⚙️</span>
          <div>
            <h3>Technical Bid</h3>
            <p id="tech-bid-description">Demonstrate how your products meet our technical specifications</p>
          </div>
        </div>
      </div>

      <!-- Offer Tabs Navigation -->
      <div class="offer-tabs-container" id="technical-bid-offer-tabs">
        <div class="offer-tabs-header">
          <div class="offer-tabs-title">
            <i class="pi pi-folder-open"></i> Select Offer to Edit
          </div>
          <div style="font-size: 11px; color: var(--text-muted);">
            <i class="pi pi-info-circle" style="margin-right: 4px;"></i>
            Alternate offers duplicate all Technical &amp; Financial bid content
          </div>
        </div>
        <div class="offer-tabs">
          <div class="offer-tab main-offer active" data-offer-id="main" onclick="switchOffer('technical', 'main')">
            <i class="pi pi-check-circle"></i>
            <span>Main Offer</span>
          </div><div id="technical-alternate-tabs" style="display: contents;"></div>
          <button type="button" class="add-alternate-offer-global-btn" onclick="addGlobalAlternateOffer()">
            <i class="pi pi-plus-circle"></i> Add Alternate Offer
          </button>
        </div>
      </div>

      <!-- Offer Content Wrapper -->
      <div class="offer-content-wrapper" id="technical-offer-content-wrapper">
        <!-- Main Offer Content -->
        <div class="offer-content-panel active" id="technical-offer-main" data-offer-id="main">

      <!-- SIMPLIFIED TECHNICAL BID (for RFQ/2024/089) - Hidden by default -->
      <div id="technical-bid-simplified" style="display: none;">
        <!-- Instructions Alert -->
        <div style="background: var(--info-50); border: 1px solid var(--info-200); border-left: 4px solid var(--info-500); border-radius: var(--radius-sm); padding: var(--spacing-md); margin-bottom: var(--spacing-lg);">
          <div style="display: flex; align-items: flex-start; gap: var(--spacing-sm);">
            <i class="pi pi-info-circle" style="color: var(--info-500); font-size: 16px; margin-top: 2px;"></i>
            <div style="font-size: 12px; color: var(--info-700); line-height: 1.5;">
              <strong>Instructions:</strong> For each section below, download the Excel template using the link provided, complete all required fields in the spreadsheet, and upload the completed file. Do not modify column headers or structure.
            </div>
          </div>
        </div>

        <!-- 1. Technical Specifications for Goods -->
        <div class="supplier-form-field" style="margin-bottom: var(--spacing-lg);">
          <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
            <i class="pi pi-list" style="color: var(--primary-500);"></i>
            <span style="font-weight: 600;">Technical Specifications for Goods – Comparative Data Table</span>
            <span style="color: var(--danger-500);">*</span>
          </label>
          <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px; padding: 10px; background: var(--surface-50); border-radius: var(--radius-sm); border-left: 3px solid var(--primary-500);">
            Complete the comparative data table with your product specifications against UNOPS requirements.
            <a href="#" style="color: var(--primary-600); font-weight: 600; text-decoration: none; margin-left: 8px;" onclick="event.preventDefault(); alert('Downloading: Technical_Specifications_CDT.xlsx')">
              <i class="pi pi-download" style="font-size: 11px;"></i> Download Template (Technical_Specifications_CDT.xlsx)
            </a>
          </div>
          <div class="supplier-upload-area" style="padding: var(--spacing-md);">
            <div style="color: var(--primary-500); font-size: 1.5em; margin-bottom: 6px;"><i class="pi pi-cloud-upload"></i></div>
            <div class="supplier-upload-text">Upload Completed Technical Specifications</div>
            <div class="supplier-upload-hint">Accepted formats: .xlsx, .xls • Max size: 10MB</div>
          </div>
        </div>

        <!-- 2. Delivery Requirements -->
        <div class="supplier-form-field" style="margin-bottom: var(--spacing-lg);">
          <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
            <i class="pi pi-truck" style="color: var(--success-500);"></i>
            <span style="font-weight: 600;">Delivery Requirements – Comparative Data Table</span>
            <span style="color: var(--danger-500);">*</span>
          </label>
          <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px; padding: 10px; background: var(--surface-50); border-radius: var(--radius-sm); border-left: 3px solid var(--success-500);">
            Provide delivery timelines, shipping details, and logistics information as per UNOPS requirements.
            <a href="#" style="color: var(--success-600); font-weight: 600; text-decoration: none; margin-left: 8px;" onclick="event.preventDefault(); alert('Downloading: Delivery_Requirements_CDT.xlsx')">
              <i class="pi pi-download" style="font-size: 11px;"></i> Download Template (Delivery_Requirements_CDT.xlsx)
            </a>
          </div>
          <div class="supplier-upload-area" style="padding: var(--spacing-md);">
            <div style="color: var(--success-500); font-size: 1.5em; margin-bottom: 6px;"><i class="pi pi-cloud-upload"></i></div>
            <div class="supplier-upload-text">Upload Completed Delivery Requirements</div>
            <div class="supplier-upload-hint">Accepted formats: .xlsx, .xls • Max size: 10MB</div>
          </div>
        </div>

        <!-- 3. Related Services Requirements - BOQ -->
        <div class="supplier-form-field" style="margin-bottom: var(--spacing-lg);">
          <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
            <i class="pi pi-cog" style="color: var(--warning-500);"></i>
            <span style="font-weight: 600;">Related Services Requirements – Bill of Quantities (BOQ)</span>
            <span style="color: var(--danger-500);">*</span>
          </label>
          <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px; padding: 10px; background: var(--surface-50); border-radius: var(--radius-sm); border-left: 3px solid var(--warning-500);">
            Complete the BOQ for all related services including installation, training, and warranty terms.
            <a href="#" style="color: var(--warning-600); font-weight: 600; text-decoration: none; margin-left: 8px;" onclick="event.preventDefault(); alert('Downloading: Related_Services_BOQ.xlsx')">
              <i class="pi pi-download" style="font-size: 11px;"></i> Download Template (Related_Services_BOQ.xlsx)
            </a>
          </div>
          <div class="supplier-upload-area" style="padding: var(--spacing-md);">
            <div style="color: var(--warning-500); font-size: 1.5em; margin-bottom: 6px;"><i class="pi pi-cloud-upload"></i></div>
            <div class="supplier-upload-text">Upload Completed BOQ</div>
            <div class="supplier-upload-hint">Accepted formats: .xlsx, .xls • Max size: 10MB</div>
          </div>
        </div>
      </div>
      <!-- END SIMPLIFIED TECHNICAL BID -->

      <!-- DEFAULT TECHNICAL BID (for ITB/2025/001) -->
      <div id="technical-bid-default">
      <!-- Item 1: Technical Specifications -->
      <div class="product-technical-section" data-product-id="42182104" data-product-name="Ultrasound Machines" style="background: var(--surface-50); padding: var(--spacing-sm); border-radius: var(--radius-sm); margin-bottom: var(--spacing-sm); border: 1px solid var(--surface-200);">
        <div style="font-weight: 600; margin-bottom: var(--spacing-sm); color: var(--primary-700); background: var(--surface-100); padding: var(--spacing-xs) var(--spacing-sm); border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: space-between; font-size: 12px;">
          <div style="display: flex; align-items: center; gap: 6px;">
            <i class="pi pi-tag" style="font-size: 11px;"></i> UNSPSC Code: 42182104 - Ultrasound Machines <span style="margin-left: 8px; background: var(--info-100); color: var(--info-700); padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600;">Qty: 5</span>
          </div>
          <!-- Per-product alternate offers removed - now using global alternate offer approach -->
          <span style="font-size: 10px; color: var(--text-muted);"><i class="pi pi-info-circle"></i> Use tabs above for alternate offers</span>
        </div>

        <div class="supplier-form-grid">
          <div class="supplier-form-field">
            <label><i class="pi pi-box"></i> Model / Product Name <span style="color: var(--danger-500);">*</span></label>
            <input type="text" placeholder="Enter full model name">
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-globe"></i> Country of Origin <span style="color: var(--danger-500);">*</span></label>
            <input type="text" placeholder="Manufacturing country">
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-building"></i> Manufacturer <span style="color: var(--danger-500);">*</span></label>
            <div style="display: flex; gap: 8px;">
              <input type="text" placeholder="Manufacturer name" style="flex: 1;">
              <button class="btn btn-ghost" style="padding: 6px 10px; font-size: 10px; white-space: nowrap; color: var(--primary-600);" onclick="openReplicateManufacturerModal(this)" title="Apply to other items"><i class="pi pi-copy" style="margin-right: 3px;"></i> Apply to...</button>
            </div>
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-verified"></i> Manufacturer UNGM ID <span style="color: var(--text-muted); font-weight: 400;">(if available)</span></label>
            <input type="text" placeholder="UNGM-XXXXXX">
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-file-check"></i> Manufacturer's Authorization <span style="color: var(--danger-500);">*</span></label>
            <div style="display: flex; align-items: center; gap: 8px; margin-top: 4px;">
              <button class="btn btn-secondary btn-sm" style="font-size: 10px; padding: 4px 10px; white-space: nowrap;"><i class="pi pi-download" style="margin-right: 4px; font-size: 9px;"></i> Template</button>
              <div style="flex: 1; border: 1px dashed var(--surface-300); border-radius: var(--radius-sm); padding: 6px 10px; background: var(--surface-50); display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 10px; color: var(--text-muted);">
                <i class="pi pi-upload" style="font-size: 10px; color: var(--primary-500);"></i> Upload completed form
              </div>
            </div>
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-map-marker"></i> Manufacturer Address</label>
            <textarea placeholder="Full address" rows="2"></textarea>
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-link"></i> Product Documentation URL</label>
            <input type="url" placeholder="https://manufacturer.com/product-specs">
            
          </div>
        </div>

        <!-- Subcontractors Section -->
        <div class="subcontractors-section" style="margin-top: var(--spacing-md); padding: var(--spacing-sm); background: var(--surface-100); border-radius: var(--radius-sm); border: 1px dashed var(--surface-300);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--spacing-sm);">
            <div style="font-weight: 600; font-size: 12px; color: var(--text-secondary); display: flex; align-items: center; gap: 6px;">
              <i class="pi pi-users" style="font-size: 11px;"></i> Subcontractors <span style="font-weight: 400; color: var(--text-muted);">(if applicable)</span>
            </div>
            <button type="button" class="btn btn-secondary btn-sm" onclick="addSubcontractor(this)" style="padding: 4px 10px; font-size: 10px; display: flex; align-items: center; gap: 4px;">
              <i class="pi pi-plus" style="font-size: 9px;"></i> Add Subcontractor
            </button>
          </div>
          <div class="subcontractors-list">
            <div class="subcontractor-entry" style="background: var(--surface-0); padding: var(--spacing-xs); border-radius: var(--radius-sm); border: 1px solid var(--surface-200); margin-bottom: var(--spacing-xs);">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xs);">
                <span style="font-size: 10px; font-weight: 600; color: var(--primary-600);"><i class="pi pi-user" style="margin-right: 4px;"></i> Subcontractor 1</span>
                <button type="button" class="btn btn-ghost btn-sm" onclick="removeSubcontractor(this)" style="padding: 2px 6px; font-size: 9px; color: var(--danger-500);" title="Remove">
                  <i class="pi pi-trash" style="font-size: 10px;"></i>
                </button>
              </div>
              <div class="supplier-form-grid cols-3" style="gap: var(--spacing-xs);">
                <div class="supplier-form-field" style="margin-bottom: 0;">
                  <label style="font-size: 10px;"><i class="pi pi-building"></i> Company Name</label>
                  <input type="text" placeholder="Subcontractor company name" style="font-size: 11px; padding: 6px 8px;">
                </div>
                <div class="supplier-form-field" style="margin-bottom: 0;">
                  <label style="font-size: 10px;"><i class="pi pi-phone"></i> Contact</label>
                  <input type="text" placeholder="Phone / Email" style="font-size: 11px; padding: 6px 8px;">
                </div>
                <div class="supplier-form-field" style="margin-bottom: 0;">
                  <label style="font-size: 10px;"><i class="pi pi-map-marker"></i> Address</label>
                  <input type="text" placeholder="Full address" style="font-size: 11px; padding: 6px 8px;">
                </div>
              </div>
            </div>
          </div>
          <div style="font-size: 9px; color: var(--text-muted); margin-top: var(--spacing-xs);">
            <i class="pi pi-info-circle" style="margin-right: 4px;"></i> List any subcontractors that will be involved in fulfilling this product/service.
          </div>
        </div>

        <!-- Specification Compliance Table -->
        <div class="supplier-subsection-header" style="margin-top: var(--spacing-xl);">
          <strong><i class="pi pi-list"></i> Specification Compliance</strong>
        </div>

        <table class="supplier-smart-table">
          <thead>
            <tr>
              <th style="width: 5%;">#</th>
              <th style="width: 35%;">Item Specification (UNOPS Requirements)</th>
              <th style="width: 15%;">Is quotation compliant?</th>
              <th>Details of goods offered</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="text-align: center; font-weight: 600;">1</td>
              <td class="prefilled">Portable ultrasound system with color Doppler capability</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec1"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec1"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your product's specifications" rows="2"></textarea></td>
            </tr>
            <tr>
              <td style="text-align: center; font-weight: 600;">2</td>
              <td class="prefilled">15" or larger high-resolution LED display, minimum 1920x1080 pixels</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec2"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec2"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your product's specifications" rows="2"></textarea></td>
            </tr>
            <tr>
              <td style="text-align: center; font-weight: 600;">3</td>
              <td class="prefilled">Minimum 3 probe connectors with simultaneous probe operation capability</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec3"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec3"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your product's specifications" rows="2"></textarea></td>
            </tr>
            <tr>
              <td style="text-align: center; font-weight: 600;">4</td>
              <td class="prefilled">Built-in battery with minimum 60 minutes operation time</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec4"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec4"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your product's specifications" rows="2"></textarea></td>
            </tr>
            <tr>
              <td style="text-align: center; font-weight: 600;">5</td>
              <td class="prefilled">CE and/or FDA approved medical device certification</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec5"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="techSpec5"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your product's specifications" rows="2"></textarea></td>
            </tr>
          </tbody>
        </table>

        <div class="supplier-form-field" style="margin-top: var(--spacing-lg);">
          <label><i class="pi pi-exclamation-circle" style="color: var(--warning-500);"></i> Any Deviations from Requirements?</label>
          <textarea placeholder="List any deviations or alternative specifications offered" rows="3"></textarea>
          
        </div>
      </div>

      <!-- Legacy per-product alternate offers container (no longer used - see global alternate offer tabs above) -->
      <div id="alternate-offers-container-42182104" class="alternate-offers-container" style="display: none;"></div>

      <!-- Service Descriptions -->
      <div class="supplier-subsection-header">
        <strong><i class="pi pi-briefcase"></i> Service Descriptions</strong>
      </div>

      <div style="overflow-x: auto;">
        <table class="supplier-smart-table">
          <thead>
            <tr>
              <th style="width: 5%;">#</th>
              <th style="width: 18%;">Name</th>
              <th style="width: 30%;">Description</th>
              <th style="width: 12%;">Apply To</th>
              <th style="width: 12%;">Is Compliant?</th>
              <th>Details Offered</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="prefilled" style="font-size: 12px; font-weight: 600; text-align: center;">1</td>
              <td class="prefilled" style="font-size: 12px; font-weight: 600;">Installation Services</td>
              <td class="prefilled" style="font-size: 12px;">Complete on-site installation of all equipment including setup, calibration, and integration with existing systems.</td>
              <td class="prefilled" style="font-size: 12px;"><span style="background: var(--info-100); color: var(--info-700); padding: 2px 8px; border-radius: 10px; font-weight: 600;">All Lots</span></td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="service1"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="service1"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Provide service details" rows="2" style="font-size: 12px;"></textarea></td>
            </tr>
            <tr>
              <td class="prefilled" style="font-size: 12px; font-weight: 600; text-align: center;">2</td>
              <td class="prefilled" style="font-size: 12px; font-weight: 600;">Training</td>
              <td class="prefilled" style="font-size: 12px;">Comprehensive training for end-users and technical staff on equipment operation and maintenance (minimum 3 days).</td>
              <td class="prefilled" style="font-size: 12px;"><span style="background: var(--primary-100); color: var(--primary-700); padding: 2px 8px; border-radius: 10px; font-weight: 600;">Lot 1</span></td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="service2"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="service2"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Provide service details" rows="2" style="font-size: 12px;"></textarea></td>
            </tr>
            <tr>
              <td class="prefilled" style="font-size: 12px; font-weight: 600; text-align: center;">3</td>
              <td class="prefilled" style="font-size: 12px; font-weight: 600;">Warranty Support</td>
              <td class="prefilled" style="font-size: 12px;">24-month warranty with on-site support response within 48 hours for critical issues.</td>
              <td class="prefilled" style="font-size: 12px;"><span style="background: var(--success-100); color: var(--success-700); padding: 2px 8px; border-radius: 10px; font-weight: 600;">Lot 2</span></td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="service3"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="service3"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Provide service details" rows="2" style="font-size: 12px;"></textarea></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Delivery and Specific Requirements (Merged) -->
      <div class="supplier-subsection-header" style="margin-top: var(--spacing-xl);">
        <strong><i class="pi pi-truck"></i> Delivery and Specific Requirements</strong>
      </div>

      <div style="overflow-x: auto;">
        <table class="supplier-smart-table">
          <thead>
            <tr>
              <th style="width: 5%;">#</th>
              <th style="width: 18%;">Name</th>
              <th style="width: 30%;">Description</th>
              <th style="width: 12%;">Apply To</th>
              <th style="width: 12%;">Is Compliant?</th>
              <th>Details Offered</th>
            </tr>
          </thead>
          <tbody>
            <!-- Delivery Requirements -->
            <tr>
              <td class="prefilled" style="font-size: 12px; font-weight: 600; text-align: center;">1</td>
              <td class="prefilled" style="font-size: 12px; font-weight: 600;">Delivery Timeline (Lot 1)</td>
              <td class="prefilled" style="font-size: 12px;">Within 60 days ARO (FCA) / Within 90 days ARO (DPU) to UNOPS Copenhagen Hub, Marmorvej 51, 2100 Copenhagen.</td>
              <td class="prefilled" style="font-size: 12px;"><span style="background: var(--primary-100); color: var(--primary-700); padding: 2px 8px; border-radius: 10px; font-weight: 600;">Lot 1</span></td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec1"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec1"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Provide delivery details, any deviations, or alternative proposals" rows="2" style="font-size: 12px;"></textarea></td>
            </tr>
            <tr>
              <td class="prefilled" style="font-size: 12px; font-weight: 600; text-align: center;">2</td>
              <td class="prefilled" style="font-size: 12px; font-weight: 600;">Delivery Timeline (Lot 2)</td>
              <td class="prefilled" style="font-size: 12px;">Within 45 days ARO (FCA) / Within 75 days ARO (DPU) to UNOPS Kenya Office, UN Complex, Gigiri, Nairobi.</td>
              <td class="prefilled" style="font-size: 12px;"><span style="background: var(--success-100); color: var(--success-700); padding: 2px 8px; border-radius: 10px; font-weight: 600;">Lot 2</span></td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec2"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec2"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Provide delivery details, any deviations, or alternative proposals" rows="2" style="font-size: 12px;"></textarea></td>
            </tr>
            <!-- Specific Requirements -->
            <tr>
              <td class="prefilled" style="font-size: 12px; font-weight: 600; text-align: center;">3</td>
              <td class="prefilled" style="font-size: 12px; font-weight: 600;">Insurance Certificate</td>
              <td class="prefilled" style="font-size: 12px;">Valid product liability insurance with minimum coverage of USD 1,000,000.</td>
              <td class="prefilled" style="font-size: 12px;"><span style="background: var(--info-100); color: var(--info-700); padding: 2px 8px; border-radius: 10px; font-weight: 600;">All Lots</span></td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec3"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec3"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Provide details or reference to attached documents" rows="2" style="font-size: 12px;"></textarea></td>
            </tr>
            <tr>
              <td class="prefilled" style="font-size: 12px; font-weight: 600; text-align: center;">4</td>
              <td class="prefilled" style="font-size: 12px; font-weight: 600;">CE/FDA Certification</td>
              <td class="prefilled" style="font-size: 12px;">All medical equipment must have valid CE marking or FDA approval for the intended use.</td>
              <td class="prefilled" style="font-size: 12px;"><span style="background: var(--primary-100); color: var(--primary-700); padding: 2px 8px; border-radius: 10px; font-weight: 600;">Lot 1</span></td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec4"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec4"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Provide details or reference to attached documents" rows="2" style="font-size: 12px;"></textarea></td>
            </tr>
            <tr>
              <td class="prefilled" style="font-size: 12px; font-weight: 600; text-align: center;">5</td>
              <td class="prefilled" style="font-size: 12px; font-weight: 600;">Local Service Partner</td>
              <td class="prefilled" style="font-size: 12px;">Bidder must have an authorized local service partner in the destination country for after-sales support.</td>
              <td class="prefilled" style="font-size: 12px;"><span style="background: var(--success-100); color: var(--success-700); padding: 2px 8px; border-radius: 10px; font-weight: 600;">Lot 2</span></td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec5"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 12px;"><input type="radio" name="delspec5"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Provide details or reference to attached documents" rows="2" style="font-size: 12px;"></textarea></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Custom Forms Section (Author-defined) -->
      <div class="supplier-subsection-header" style="margin-top: var(--spacing-xl);">
        <strong><i class="pi pi-file-edit"></i> Additional Forms</strong>
        <span style="font-size: 11px; color: var(--text-muted); font-weight: 400; margin-left: 8px;">(Custom forms defined by the tender author)</span>
      </div>

      <!-- Custom Form A -->
      <div style="border: 1px solid var(--surface-200); border-radius: var(--radius-md); margin-bottom: var(--spacing-sm); overflow: hidden;">
        <div onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'; this.querySelector('.custom-form-arrow').style.transform = this.nextElementSibling.style.display === 'none' ? 'rotate(0deg)' : 'rotate(180deg)';" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-sm) var(--spacing-md); background: var(--surface-50); cursor: pointer; transition: background 0.2s;">
          <div style="display: flex; align-items: center; gap: 10px;">
            <i class="pi pi-file" style="color: var(--primary-500);"></i>
            <span style="font-weight: 600; font-size: 13px;">Custom Form A: Equipment Specifications Checklist</span>
            <span style="background: var(--warning-100); color: var(--warning-700); padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600;">CUSTOM</span>
          </div>
          <i class="pi pi-chevron-down custom-form-arrow" style="font-size: 12px; color: var(--text-muted); transition: transform 0.2s;"></i>
        </div>
        <div style="display: none; padding: var(--spacing-md); background: white; border-top: 1px solid var(--surface-200);">
          <div style="color: var(--text-muted); font-size: 12px; font-style: italic; text-align: center; padding: var(--spacing-lg);">
            <i class="pi pi-info-circle" style="margin-right: 6px;"></i>
            Custom form content defined by tender author will appear here.
          </div>
        </div>
      </div>

      <!-- Custom Form B -->
      <div style="border: 1px solid var(--surface-200); border-radius: var(--radius-md); margin-bottom: var(--spacing-sm); overflow: hidden;">
        <div onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'; this.querySelector('.custom-form-arrow').style.transform = this.nextElementSibling.style.display === 'none' ? 'rotate(0deg)' : 'rotate(180deg)';" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-sm) var(--spacing-md); background: var(--surface-50); cursor: pointer; transition: background 0.2s;">
          <div style="display: flex; align-items: center; gap: 10px;">
            <i class="pi pi-file" style="color: var(--primary-500);"></i>
            <span style="font-weight: 600; font-size: 13px;">Custom Form B: Environmental Compliance Declaration</span>
            <span style="background: var(--warning-100); color: var(--warning-700); padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600;">CUSTOM</span>
          </div>
          <i class="pi pi-chevron-down custom-form-arrow" style="font-size: 12px; color: var(--text-muted); transition: transform 0.2s;"></i>
        </div>
        <div style="display: none; padding: var(--spacing-md); background: white; border-top: 1px solid var(--surface-200);">
          <div style="color: var(--text-muted); font-size: 12px; font-style: italic; text-align: center; padding: var(--spacing-lg);">
            <i class="pi pi-info-circle" style="margin-right: 6px;"></i>
            Custom form content defined by tender author will appear here.
          </div>
        </div>
      </div>

      <!-- Custom Form C -->
      <div style="border: 1px solid var(--surface-200); border-radius: var(--radius-md); margin-bottom: var(--spacing-sm); overflow: hidden;">
        <div onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'; this.querySelector('.custom-form-arrow').style.transform = this.nextElementSibling.style.display === 'none' ? 'rotate(0deg)' : 'rotate(180deg)';" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-sm) var(--spacing-md); background: var(--surface-50); cursor: pointer; transition: background 0.2s;">
          <div style="display: flex; align-items: center; gap: 10px;">
            <i class="pi pi-file" style="color: var(--primary-500);"></i>
            <span style="font-weight: 600; font-size: 13px;">Custom Form C: Quality Assurance Questionnaire</span>
            <span style="background: var(--warning-100); color: var(--warning-700); padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600;">CUSTOM</span>
          </div>
          <i class="pi pi-chevron-down custom-form-arrow" style="font-size: 12px; color: var(--text-muted); transition: transform 0.2s;"></i>
        </div>
        <div style="display: none; padding: var(--spacing-md); background: white; border-top: 1px solid var(--surface-200);">
          <div style="color: var(--text-muted); font-size: 12px; font-style: italic; text-align: center; padding: var(--spacing-lg);">
            <i class="pi pi-info-circle" style="margin-right: 6px;"></i>
            Custom form content defined by tender author will appear here.
          </div>
        </div>
      </div>

      </div>
      <!-- END DEFAULT TECHNICAL BID -->

        </div><!-- End Main Offer Content Panel -->
        
        <!-- Alternate Offer Panels Container -->
        <div id="technical-alternate-panels"></div>
        
      </div><!-- End Offer Content Wrapper -->

      <div class="supplier-action-bar">
        <button class="btn btn-ghost" onclick="prevSupplierSection('bidder-info')"><i class="pi pi-arrow-left" style="margin-right: 6px;"></i> Back</button>
        <button class="btn btn-ghost"><i class="pi pi-save" style="margin-right: 6px;"></i> Save Draft</button>
        <button class="btn btn-primary" onclick="nextSupplierSection('financial-bid')">Continue to Financial Bid <i class="pi pi-arrow-right" style="margin-left: 6px;"></i></button>
      </div>
    </div>

    <!-- ========== SECTION 3: FINANCIAL BID ========== -->
    <div class="supplier-section-card" id="supplier-section-financial-bid">
      <div class="supplier-section-header">
        <div class="supplier-section-title">
          <span class="supplier-section-title-icon">💰</span>
          <div>
            <h3>Financial Bid</h3>
            <p>Provide your pricing for all items and services</p>
          </div>
        </div>
      </div>

      <!-- Offer Tabs Navigation -->
      <div class="offer-tabs-container" id="financial-bid-offer-tabs">
        <div class="offer-tabs-header">
          <div class="offer-tabs-title">
            <i class="pi pi-folder-open"></i> Select Offer to Edit
          </div>
          <div style="font-size: 11px; color: var(--text-muted);">
            <i class="pi pi-info-circle" style="margin-right: 4px;"></i>
            Alternate offers duplicate all Technical &amp; Financial bid content
          </div>
        </div>
        <div class="offer-tabs">
          <div class="offer-tab main-offer active" data-offer-id="main" onclick="switchOffer('financial', 'main')">
            <i class="pi pi-check-circle"></i>
            <span>Main Offer</span>
          </div><div id="financial-alternate-tabs" style="display: contents;"></div>
          <button type="button" class="add-alternate-offer-global-btn" onclick="addGlobalAlternateOffer()">
            <i class="pi pi-plus-circle"></i> Add Alternate Offer
          </button>
        </div>
      </div>

      <!-- Offer Content Wrapper -->
      <div class="offer-content-wrapper" id="financial-offer-content-wrapper">
        <!-- Main Offer Content -->
        <div class="offer-content-panel active" id="financial-offer-main" data-offer-id="main">

      <!-- Bid Currency Selection -->
      <div class="supplier-subsection-header">
        <strong><i class="pi pi-money-bill"></i> Bid Currency</strong>
      </div>

      <div style="background: var(--surface-50); padding: var(--spacing-md); border-radius: var(--radius-sm); border: 1px solid var(--surface-200); margin-bottom: var(--spacing-md);">
        <div style="display: flex; align-items: center; gap: var(--spacing-md);">
          <div style="flex: 0 0 auto;">
            <label style="font-size: 12px; font-weight: 600; color: var(--text-primary); display: flex; align-items: center; gap: 6px;">
              <i class="pi pi-globe" style="color: var(--primary-600);"></i>
              Select Currency for this Offer
            </label>
          </div>
          <div style="flex: 0 0 200px;">
            <select class="bid-currency-select" style="width: 100%; padding: 10px 12px; border: 1px solid var(--surface-300); border-radius: var(--radius-sm); font-size: 14px; font-weight: 600; background: var(--surface-0); color: var(--text-primary); cursor: pointer;" onchange="updateBidCurrency(this)">
              <option value="USD" selected>USD - US Dollar</option>
              <option value="EUR">EUR - Euro</option>
              <option value="GBP">GBP - British Pound</option>
              <option value="CHF">CHF - Swiss Franc</option>
              <option value="JPY">JPY - Japanese Yen</option>
              <option value="CAD">CAD - Canadian Dollar</option>
              <option value="AUD">AUD - Australian Dollar</option>
            </select>
          </div>
          <div style="flex: 1; font-size: 11px; color: var(--text-secondary); display: flex; align-items: center; gap: 6px;">
            <i class="pi pi-info-circle"></i>
            <span>All prices in this offer will be quoted in the selected currency. Alternate offers may use a different currency.</span>
          </div>
        </div>
      </div>

      <!-- Bid Summary -->
      <div class="supplier-subsection-header">
        <strong><i class="pi pi-calculator"></i> Bid Summary</strong>
      </div>

      <div style="background: var(--info-50); padding: var(--spacing-sm); border-radius: var(--radius-sm); border: 1px solid var(--info-200); margin-bottom: var(--spacing-md);">
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-sm);">
          <div>
            <div style="font-size: 10px; color: var(--text-muted); margin-bottom: 2px;">Total Bid Value (FCA)</div>
            <div id="total-fca" class="total-display" style="font-size: 16px; font-weight: 700; color: var(--primary-600);">USD 0.00</div>
          </div>
          <div>
            <div style="font-size: 10px; color: var(--text-muted); margin-bottom: 2px;">Total Bid Value (CPT)</div>
            <div id="total-cpt" class="total-display" style="font-size: 16px; font-weight: 700; color: var(--primary-600);">USD 0.00</div>
          </div>
          <div>
            <div style="font-size: 10px; color: var(--text-muted); margin-bottom: 2px;">Total Bid Value (DPU)</div>
            <div id="total-dpu" class="total-display" style="font-size: 16px; font-weight: 700; color: var(--primary-600);">USD 0.00</div>
          </div>
        </div>

        <!-- Collapsible Price Breakdown by Lot -->
        <div style="margin-top: var(--spacing-sm); border-top: 1px solid var(--info-200); padding-top: var(--spacing-sm);">
          <div onclick="toggleLotBreakdown()" style="cursor: pointer; display: flex; align-items: center; justify-content: space-between; padding: 6px 0;">
            <span style="font-size: 12px; font-weight: 600; color: var(--primary-700); display: flex; align-items: center; gap: 6px;">
              <i class="pi pi-chart-pie" style="font-size: 11px;"></i> Price Breakdown by Lot
            </span>
            <i id="lot-breakdown-arrow" class="pi pi-chevron-down" style="font-size: 10px; color: var(--primary-600); transition: transform 0.2s;"></i>
          </div>
          
          <div id="lot-breakdown-content" style="display: none; margin-top: var(--spacing-xs);">
            <table style="width: 100%; border-collapse: collapse; font-size: 11px; background: var(--surface-0); border-radius: var(--radius-sm); overflow: hidden;">
              <thead>
                <tr style="background: var(--surface-100);">
                  <th style="padding: 8px 10px; text-align: left; font-weight: 600; border-bottom: 1px solid var(--surface-200);">Lot</th>
                  <th style="padding: 8px 10px; text-align: right; font-weight: 600; border-bottom: 1px solid var(--surface-200);">Goods (FCA)</th>
                  <th style="padding: 8px 10px; text-align: right; font-weight: 600; border-bottom: 1px solid var(--surface-200);">Services</th>
                  <th style="padding: 8px 10px; text-align: right; font-weight: 600; border-bottom: 1px solid var(--surface-200);">Total</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding: 8px 10px; border-bottom: 1px solid var(--surface-100);">
                    <span style="background: var(--primary-100); color: var(--primary-700); padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600;">Lot 1</span>
                    <span style="margin-left: 6px; color: var(--text-secondary);">Medical Imaging Equipment</span>
                  </td>
                  <td id="lot1-goods" style="padding: 8px 10px; text-align: right; border-bottom: 1px solid var(--surface-100);">USD 0.00</td>
                  <td id="lot1-services" style="padding: 8px 10px; text-align: right; border-bottom: 1px solid var(--surface-100);">USD 0.00</td>
                  <td id="lot1-total" style="padding: 8px 10px; text-align: right; font-weight: 700; color: var(--primary-600); border-bottom: 1px solid var(--surface-100);">USD 0.00</td>
                </tr>
                <tr>
                  <td style="padding: 8px 10px; border-bottom: 1px solid var(--surface-100);">
                    <span style="background: var(--success-100); color: var(--success-700); padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600;">Lot 2</span>
                    <span style="margin-left: 6px; color: var(--text-secondary);">Surgical Equipment</span>
                  </td>
                  <td id="lot2-goods" style="padding: 8px 10px; text-align: right; border-bottom: 1px solid var(--surface-100);">USD 0.00</td>
                  <td id="lot2-services" style="padding: 8px 10px; text-align: right; border-bottom: 1px solid var(--surface-100);">USD 0.00</td>
                  <td id="lot2-total" style="padding: 8px 10px; text-align: right; font-weight: 700; color: var(--success-600); border-bottom: 1px solid var(--surface-100);">USD 0.00</td>
                </tr>
                <tr style="background: var(--surface-50);">
                  <td style="padding: 8px 10px; font-weight: 600;">Grand Total</td>
                  <td id="grand-goods" style="padding: 8px 10px; text-align: right; font-weight: 600;">USD 0.00</td>
                  <td id="grand-services" style="padding: 8px 10px; text-align: right; font-weight: 600;">USD 0.00</td>
                  <td id="grand-total" style="padding: 8px 10px; text-align: right; font-weight: 700; color: var(--primary-700);">USD 0.00</td>
                </tr>
              </tbody>
            </table>
            
            <div style="font-size: 9px; color: var(--info-600); margin-top: var(--spacing-xs); display: flex; align-items: flex-start; gap: 4px;">
              <i class="pi pi-info-circle" style="font-size: 10px; margin-top: 1px;"></i>
              <span>Services marked "All Lots" are split equally among applicable lots.</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Prices for Items -->
      <div class="supplier-subsection-header" style="display: flex; justify-content: space-between; align-items: center;">
        <strong><i class="pi pi-shopping-cart"></i> Prices for Items</strong>
        <div style="display: flex; gap: 8px;">
          <button class="btn btn-ghost btn-sm" title="Download Price Template" onclick="alert('Downloading price template...');">
            <i class="pi pi-download"></i> Download Template
          </button>
          <button class="btn btn-ghost btn-sm" title="Upload Prices" onclick="alert('Upload price template with filled prices...');">
            <i class="pi pi-upload"></i> Upload Prices
          </button>
        </div>
      </div>

      <table class="supplier-smart-table" id="prices-for-goods-table">
        <thead>
          <tr>
            <th style="width: 5%;">#</th>
            <th style="width: 35%;">Item Description</th>
            <th style="width: 15%;">Lot</th>
            <th style="width: 10%;">Qty</th>
            <th style="width: 18%;">Unit Price</th>
            <th style="width: 17%;">Total</th>
          </tr>
        </thead>
        <tbody id="prices-for-goods-tbody">
          <tr data-product-id="42182104" data-lot="lot1" data-is-original="true">
            <td style="font-weight: 600;">1</td>
            <td><strong>Ultrasound Machines</strong><div style="font-size: 0.85em; color: var(--text-muted);">UNSPSC: 42182104</div></td>
            <td class="prefilled" style="text-align: center;"><span style="background: var(--primary-100); color: var(--primary-700); padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 600;">Lot 1</span></td>
            <td class="prefilled qty-cell" style="text-align: center; font-weight: 600;">5</td>
            <td><input type="number" placeholder="0.00" step="0.01" class="price-fca" oninput="calculateFinancialBid()"></td>
            <td class="calculated row-total">0.00</td>
          </tr>
          <tr data-product-id="42182108" data-lot="lot1" data-is-original="true">
            <td style="font-weight: 600;">2</td>
            <td><strong>Patient Monitors</strong><div style="font-size: 0.85em; color: var(--text-muted);">UNSPSC: 42182108</div></td>
            <td class="prefilled" style="text-align: center;"><span style="background: var(--primary-100); color: var(--primary-700); padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 600;">Lot 1</span></td>
            <td class="prefilled qty-cell" style="text-align: center; font-weight: 600;">20</td>
            <td><input type="number" placeholder="0.00" step="0.01" class="price-fca" oninput="calculateFinancialBid()"></td>
            <td class="calculated row-total">0.00</td>
          </tr>
          <tr data-product-id="42192201" data-lot="lot2" data-is-original="true">
            <td style="font-weight: 600;">3</td>
            <td><strong>Surgical Lights</strong><div style="font-size: 0.85em; color: var(--text-muted);">UNSPSC: 42192201</div></td>
            <td class="prefilled" style="text-align: center;"><span style="background: var(--success-100); color: var(--success-700); padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 600;">Lot 2</span></td>
            <td class="prefilled qty-cell" style="text-align: center; font-weight: 600;">8</td>
            <td><input type="number" placeholder="0.00" step="0.01" class="price-fca" oninput="calculateFinancialBid()"></td>
            <td class="calculated row-total">0.00</td>
          </tr>
          <tr data-product-id="42182101" data-lot="lot2" data-is-original="true">
            <td style="font-weight: 600;">4</td>
            <td><strong>Anesthesia Machines</strong><div style="font-size: 0.85em; color: var(--text-muted);">UNSPSC: 42182101</div></td>
            <td class="prefilled" style="text-align: center;"><span style="background: var(--success-100); color: var(--success-700); padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 600;">Lot 2</span></td>
            <td class="prefilled qty-cell" style="text-align: center; font-weight: 600;">3</td>
            <td><input type="number" placeholder="0.00" step="0.01" class="price-fca" oninput="calculateFinancialBid()"></td>
            <td class="calculated row-total">0.00</td>
          </tr>
          <tr id="prices-for-goods-total-row" style="background: var(--surface-100);">
            <td colspan="5" style="text-align: right; font-weight: 600; padding-right: var(--spacing-md);">Total Price of Items →</td>
            <td class="calculated" style="font-weight: 700;">0.00</td>
          </tr>
        </tbody>
      </table>

      <!-- Prices for Related Services -->
      <div class="supplier-subsection-header" style="margin-top: var(--spacing-xl);">
        <strong><i class="pi pi-wrench"></i> Prices for Related Services</strong>
      </div>

      <table class="supplier-smart-table">
        <thead>
          <tr>
            <th style="width: 5%;">#</th>
            <th style="width: 18%;">Name</th>
            <th style="width: 32%;">Description</th>
            <th style="width: 12%;">Apply To</th>
            <th style="width: 18%;">Unit Price</th>
            <th style="width: 15%;">Total</th>
          </tr>
        </thead>
        <tbody id="services-tbody">
          <tr data-apply-to="all">
            <td style="font-weight: 600;">1</td>
            <td class="prefilled" style="font-weight: 600;">Installation and Configuration</td>
            <td class="prefilled" style="font-size: 12px;">Complete on-site installation of all equipment including setup, calibration, and integration with existing systems.</td>
            <td class="prefilled" style="text-align: center;"><span style="background: var(--info-100); color: var(--info-700); padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 600;">All Lots</span></td>
            <td><input type="number" placeholder="0.00" step="0.01" onchange="calculateFinancialBid()" oninput="calculateFinancialBid()"></td>
            <td class="calculated">0.00</td>
          </tr>
          <tr data-apply-to="lot1">
            <td style="font-weight: 600;">2</td>
            <td class="prefilled" style="font-weight: 600;">Training</td>
            <td class="prefilled" style="font-size: 12px;">Comprehensive training for end-users and technical staff on equipment operation and maintenance (minimum 3 days, 10 persons).</td>
            <td class="prefilled" style="text-align: center;"><span style="background: var(--primary-100); color: var(--primary-700); padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 600;">Lot 1</span></td>
            <td><input type="number" placeholder="0.00" step="0.01" onchange="calculateFinancialBid()" oninput="calculateFinancialBid()"></td>
            <td class="calculated">0.00</td>
          </tr>
          <tr data-apply-to="lot2">
            <td style="font-weight: 600;">3</td>
            <td class="prefilled" style="font-weight: 600;">Extended Warranty</td>
            <td class="prefilled" style="font-size: 12px;">24-month extended warranty with on-site support response within 48 hours for critical issues.</td>
            <td class="prefilled" style="text-align: center;"><span style="background: var(--success-100); color: var(--success-700); padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 600;">Lot 2</span></td>
            <td><input type="number" placeholder="0.00" step="0.01" onchange="calculateFinancialBid()" oninput="calculateFinancialBid()"></td>
            <td class="calculated">0.00</td>
          </tr>
          <tr style="background: var(--surface-100);">
            <td colspan="5" style="text-align: right; font-weight: 600; padding-right: var(--spacing-md);">Total Price of Related Services →</td>
            <td id="services-total" class="calculated" style="font-weight: 700;">0.00</td>
          </tr>
        </tbody>
      </table>

      <!-- Shipment & Delivery Information -->
      <div class="supplier-subsection-header" style="margin-top: var(--spacing-xl);">
        <strong><i class="pi pi-truck"></i> Shipment & Delivery Information</strong>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); margin-bottom: var(--spacing-md);">
        <div class="supplier-form-field">
          <label><i class="pi pi-box"></i> Freight Cost per 20/40 ft. container <span style="color: var(--text-muted); font-weight: 400;">(if applicable)</span></label>
          <input type="text" placeholder="Enter freight cost per container">
        </div>
        <div class="supplier-form-field">
          <label><i class="pi pi-file-export"></i> Customs clearance costs <span style="color: var(--text-muted); font-weight: 400;">(if applicable)</span></label>
          <input type="text" placeholder="Enter customs clearance costs">
        </div>
      </div>

      <table class="supplier-smart-table">
        <thead>
          <tr>
            <th>Item</th>
            <th>FCA Point(s) of Delivery</th>
            <th>Shipment dimensions<br><small style="font-weight: 400;">(Including package)</small></th>
            <th>Gross weight</th>
            <th>Containers - Number</th>
            <th>Containers - Size</th>
            <th>Total volume</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="prefilled" style="font-weight: 600;">Ultrasound Machines</td>
            <td><input type="text" placeholder="City, Country"></td>
            <td><input type="text" placeholder="L×W×H cm"></td>
            <td><input type="text" placeholder="kg"></td>
            <td><input type="text" placeholder="Number"></td>
            <td><input type="text" placeholder="L×W×H cm"></td>
            <td><input type="text" placeholder="m³"></td>
          </tr>
          <tr>
            <td class="prefilled" style="font-weight: 600;">Patient Monitors</td>
            <td><input type="text" placeholder="City, Country"></td>
            <td><input type="text" placeholder="L×W×H cm"></td>
            <td><input type="text" placeholder="kg"></td>
            <td><input type="text" placeholder="Number"></td>
            <td><input type="text" placeholder="L×W×H cm"></td>
            <td><input type="text" placeholder="m³"></td>
          </tr>
          <tr>
            <td class="prefilled" style="font-weight: 600;">Surgical Lights</td>
            <td><input type="text" placeholder="City, Country"></td>
            <td><input type="text" placeholder="L×W×H cm"></td>
            <td><input type="text" placeholder="kg"></td>
            <td><input type="text" placeholder="Number"></td>
            <td><input type="text" placeholder="L×W×H cm"></td>
            <td><input type="text" placeholder="m³"></td>
          </tr>
          <tr>
            <td class="prefilled" style="font-weight: 600;">Anesthesia Machines</td>
            <td><input type="text" placeholder="City, Country"></td>
            <td><input type="text" placeholder="L×W×H cm"></td>
            <td><input type="text" placeholder="kg"></td>
            <td><input type="text" placeholder="Number"></td>
            <td><input type="text" placeholder="L×W×H cm"></td>
            <td><input type="text" placeholder="m³"></td>
          </tr>
        </tbody>
      </table>

      <!-- Discounts Offered -->
      <div class="supplier-subsection-header" style="margin-top: var(--spacing-md); display: flex; justify-content: space-between; align-items: center;">
        <strong><i class="pi pi-percentage"></i> Discounts Offered</strong>
        <button class="btn btn-secondary btn-sm" onclick="addDiscountRow()" style="font-size: 11px;">
          <i class="pi pi-plus" style="font-size: 10px;"></i> Add Discount
        </button>
      </div>

      <table class="supplier-smart-table" id="discounts-table">
        <thead>
          <tr>
            <th style="width: 5%;">#</th>
            <th style="width: 25%;">Discount Type</th>
            <th style="width: 30%;">Description / Methodology</th>
            <th style="width: 12%;">Apply To</th>
            <th style="width: 12%;">Discount %</th>
            <th style="width: 12%;">Discount Amount</th>
            <th style="width: 4%;"></th>
          </tr>
        </thead>
        <tbody id="discounts-tbody">
          <tr>
            <td style="font-weight: 600;">1</td>
            <td>
              <select style="width: 100%; font-size: 12px; padding: 6px;">
                <option value="">Select type...</option>
                <option value="volume">Volume Discount</option>
                <option value="early-payment">Early Payment Discount</option>
                <option value="bundle">Bundle Discount</option>
                <option value="loyalty">Loyalty Discount</option>
                <option value="seasonal">Seasonal Discount</option>
                <option value="other">Other</option>
              </select>
            </td>
            <td><textarea placeholder="Describe discount terms and methodology" rows="2" style="font-size: 12px;"></textarea></td>
            <td>
              <select style="width: 100%; font-size: 12px; padding: 6px;">
                <option value="all">All Lots</option>
                <option value="lot1">Lot 1</option>
                <option value="lot2">Lot 2</option>
                <option value="goods">Goods Only</option>
                <option value="services">Services Only</option>
              </select>
            </td>
            <td><input type="number" placeholder="0" step="0.1" min="0" max="100" style="font-size: 12px;"></td>
            <td><input type="number" placeholder="0.00" step="0.01" min="0" style="font-size: 12px;"></td>
            <td style="text-align: center;">
              <button class="btn btn-ghost btn-sm" onclick="removeDiscountRow(this)" style="padding: 4px; color: var(--danger-500);">
                <i class="pi pi-trash" style="font-size: 11px;"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <div style="font-size: 11px; color: var(--text-muted); margin-top: var(--spacing-xs);">
        <i class="pi pi-info-circle" style="margin-right: 4px;"></i> Add any discounts you are offering. Fill either Discount % or Discount Amount, not both.
      </div>

        </div><!-- End Main Offer Content Panel -->
        
        <!-- Alternate Offer Panels Container -->
        <div id="financial-alternate-panels"></div>
        
      </div><!-- End Offer Content Wrapper -->

      <div class="supplier-action-bar">
        <button class="btn btn-ghost" onclick="prevSupplierSection('technical-bid')"><i class="pi pi-arrow-left" style="margin-right: 6px;"></i> Back</button>
        <button class="btn btn-ghost"><i class="pi pi-save" style="margin-right: 6px;"></i> Save Draft</button>
        <button class="btn btn-primary" onclick="nextSupplierSection('qualification')">Continue to Qualifications <i class="pi pi-arrow-right" style="margin-left: 6px;"></i></button>
      </div>
    </div>

    <!-- ========== SECTION 4: QUALIFICATION & ELIGIBILITY ========== -->
    <div class="supplier-section-card" id="supplier-section-qualification">
      <div class="supplier-section-header">
        <div class="supplier-section-title">
          <span class="supplier-section-title-icon">🎯</span>
          <div>
            <h3>Qualifications & Eligibility</h3>
            <p>Demonstrate your capability to deliver this project</p>
          </div>
        </div>
      </div>



      <!-- Section 1: Performance Statement -->
      <div class="supplier-subsection-header">
        <strong><i class="pi pi-chart-line"></i> Section 1: Performance Statement</strong>
      </div>

      <div class="supplier-partner-card" style="margin-bottom: var(--spacing-sm);">
        <div class="supplier-partner-header">
          <span style="font-size: 12px; font-weight: 600; color: var(--primary-500);"><i class="pi pi-briefcase" style="margin-right: 6px; font-size: 11px;"></i> Reference 1</span>
        </div>
        
        <div class="supplier-form-grid">
          <div class="supplier-form-field">
            <label><i class="pi pi-user"></i> Order placed by <span style="color: var(--danger-500);">*</span></label>
            <input type="text" placeholder="Name of purchaser/organization">
          </div>
          <div class="supplier-form-field">
            <label><i class="pi pi-map-marker"></i> Full address of purchaser <span style="color: var(--danger-500);">*</span></label>
            <textarea placeholder="Complete address" rows="2"></textarea>
          </div>
        </div>
        
        <div class="supplier-form-grid">
          <div class="supplier-form-field">
            <label><i class="pi pi-file"></i> Order no <span style="color: var(--danger-500);">*</span></label>
            <input type="text" placeholder="Order/Contract number">
          </div>
          <div class="supplier-form-field">
            <label><i class="pi pi-calendar"></i> Date <span style="color: var(--danger-500);">*</span></label>
            <input type="date">
          </div>
        </div>
        
        <div class="supplier-form-field" style="margin: var(--spacing-xs) 0;">
          <label><i class="pi pi-list"></i> Description & quantity of ordered items <span style="color: var(--danger-500);">*</span></label>
          <textarea placeholder="Describe the items ordered and their quantities" rows="2"></textarea>
        </div>
        
        <div class="supplier-form-grid cols-3">
          <div class="supplier-form-field">
            <label><i class="pi pi-dollar"></i> Value of Order <span style="color: var(--danger-500);">*</span></label>
            <input type="text" placeholder="USD 0.00">
          </div>
          <div class="supplier-form-field">
            <label><i class="pi pi-calendar"></i> Date of completion of Delivery<br><small style="font-weight: 400; color: var(--text-muted);">As per Contract</small></label>
            <input type="date" placeholder="As per contract">
          </div>
          <div class="supplier-form-field">
            <label><i class="pi pi-calendar-times"></i> Date of completion of Delivery<br><small style="font-weight: 400; color: var(--text-muted);">Actual</small></label>
            <input type="date" placeholder="Actual date">
          </div>
        </div>
        
        <div class="supplier-form-grid" style="margin-top: var(--spacing-xs);">
          <div class="supplier-form-field">
            <label><i class="pi pi-comment"></i> Remarks indicating reasons of late delivery, if any</label>
            <textarea placeholder="Explain any delays in delivery" rows="2"></textarea>
          </div>
          <div class="supplier-form-field">
            <label><i class="pi pi-check-circle"></i> Was the supplies of goods satisfactory? <span style="color: var(--danger-500);">*</span></label>
            <select>
              <option value="">Select</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
              <option value="partial">Partially</option>
            </select>
          </div>
        </div>
      </div>

      <button class="btn btn-secondary" style="width: 100%; padding: 8px; border-style: dashed; margin-bottom: var(--spacing-md); font-size: 12px;">
        <i class="pi pi-plus" style="margin-right: 6px; font-size: 11px;"></i> Add Another Reference
      </button>

      <!-- Section 2: Bid Security Form -->
      <div class="supplier-subsection-header warning">
        <strong><i class="pi pi-shield" style="color: var(--warning-500);"></i> Section 2: Bid Security Form</strong>

      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
        <div style="border: 1px solid var(--surface-200); border-radius: var(--radius-sm); padding: var(--spacing-sm); background: var(--surface-0); text-align: center;">
          <div style="color: var(--warning-500); font-size: 1.3em; margin-bottom: 6px;"><i class="pi pi-download"></i></div>
          <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 3px; font-size: 12px;">Download Template</div>
          <div style="font-size: 10px; color: var(--text-muted); margin-bottom: 8px;">Bid Security Form Template</div>
          <button class="btn btn-secondary btn-sm" style="font-size: 11px; padding: 4px 10px;"><i class="pi pi-download" style="margin-right: 4px; font-size: 10px;"></i> Download</button>
        </div>
        <div class="supplier-upload-area" style="padding: var(--spacing-sm);">
          <div style="color: var(--warning-500); font-size: 1.3em; margin-bottom: 6px;"><i class="pi pi-upload"></i></div>
          <div class="supplier-upload-text">Upload Completed Form</div>
          <div class="supplier-upload-hint">Click or drag file here</div>
        </div>
      </div>

      <div class="supplier-form-field" style="margin-bottom: var(--spacing-md);">
        <label><i class="pi pi-calendar-times"></i> Bid security expiry date <span style="color: var(--danger-500);">*</span></label>
        <input type="date" style="max-width: 250px;">
      </div>

      <!-- Section 3: Financial Statements -->
      <div class="supplier-subsection-header">
        <strong><i class="pi pi-chart-bar"></i> Section 3: Financial Statements</strong>

      </div>

      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-xs); margin-bottom: var(--spacing-md);">
        <div class="supplier-upload-area" style="padding: var(--spacing-xs);">
          <div style="color: var(--info-400); font-size: 1.2em; margin-bottom: 4px;"><i class="pi pi-file-pdf"></i></div>
          <div class="supplier-upload-text">Year 2023</div>
          <div class="supplier-upload-hint">Upload PDF</div>
        </div>
        <div class="supplier-upload-area" style="padding: var(--spacing-xs);">
          <div style="color: var(--info-400); font-size: 1.2em; margin-bottom: 4px;"><i class="pi pi-file-pdf"></i></div>
          <div class="supplier-upload-text">Year 2024</div>
          <div class="supplier-upload-hint">Upload PDF</div>
        </div>
        <div class="supplier-upload-area" style="padding: var(--spacing-xs);">
          <div style="color: var(--info-400); font-size: 1.2em; margin-bottom: 4px;"><i class="pi pi-file-pdf"></i></div>
          <div class="supplier-upload-text">Year 2025</div>
          <div class="supplier-upload-hint">Upload PDF</div>
        </div>
      </div>

      <div class="supplier-action-bar">
        <button class="btn btn-ghost" onclick="prevSupplierSection('financial-bid')"><i class="pi pi-arrow-left" style="margin-right: 6px;"></i> Back</button>
        <button class="btn btn-ghost"><i class="pi pi-save" style="margin-right: 6px;"></i> Save Draft</button>
        <button class="btn btn-primary" onclick="nextSupplierSection('other-forms')">Continue to Other Forms <i class="pi pi-arrow-right" style="margin-left: 6px;"></i></button>
      </div>
    </div>

    <!-- ========== SECTION 5: OTHER FORMS ========== -->
    <div class="supplier-section-card" id="supplier-section-other-forms">
      <div class="supplier-section-header">
        <div class="supplier-section-title">
          <span class="supplier-section-title-icon">📋</span>
          <div>
            <h3>Other Forms</h3>
            <p>Complete additional forms required for this tender</p>
          </div>
        </div>
      </div>



      <!-- DRiVE Assessment Form -->


      <div style="background: var(--surface-50); border: 1px solid var(--surface-200); border-radius: var(--radius-sm); padding: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
            <div style="width: 36px; height: 36px; background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%); border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; color: white;">
              <i class="pi pi-shield" style="font-size: 14px;"></i>
            </div>
            <div>
              <div style="font-weight: 600; font-size: 12px; color: var(--text-primary);">DRiVE Assessment Form</div>
              <div style="font-size: 10px; color: var(--text-muted);">Due Diligence Risk Verification Exercise</div>
            </div>
          </div>
          <div style="display: flex; align-items: center; gap: var(--spacing-xs);">
            <span style="background: var(--info-100); color: var(--info-600); padding: 2px 8px; border-radius: 10px; font-size: 9px; font-weight: 600;">FROM LAST SUBMISSION</span>
            <span style="background: var(--danger-100); color: var(--danger-600); padding: 2px 6px; border-radius: 8px; font-size: 9px;">REQUIRED</span>
          </div>
        </div>
        <div style="margin-top: var(--spacing-sm); padding-top: var(--spacing-sm); border-top: 1px dashed var(--surface-300);">
          <div style="display: flex; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-xs);">
            <i class="pi pi-check-circle" style="color: var(--success-500); font-size: 12px;"></i>
            <span style="font-size: 11px; color: var(--text-secondary);">Pre-filled from your last DRiVE form response (submitted Dec 15, 2025)</span>
          </div>
          <div style="display: flex; gap: var(--spacing-xs); margin-top: var(--spacing-sm);">
            <button class="btn btn-secondary btn-sm" style="font-size: 11px; padding: 5px 12px;"><i class="pi pi-eye" style="margin-right: 4px; font-size: 10px;"></i> View</button>
            <button class="btn btn-primary btn-sm" style="font-size: 11px; padding: 5px 12px;"><i class="pi pi-pencil" style="margin-right: 4px; font-size: 10px;"></i> Start Submission</button>
          </div>
        </div>
      </div>


      <!-- Custom Form 1: Environmental Compliance Statement -->
      <div style="background: var(--surface-50); border: 1px solid var(--surface-200); border-radius: var(--radius-sm); padding: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
            <div style="width: 36px; height: 36px; background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%); border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; color: white;">
              <i class="pi pi-globe" style="font-size: 14px;"></i>
            </div>
            <div>
              <div style="font-weight: 600; font-size: 12px; color: var(--text-primary);">Environmental Compliance Statement</div>
              <div style="font-size: 10px; color: var(--text-muted);">Declaration of adherence to environmental standards</div>
            </div>
          </div>
          <div style="display: flex; align-items: center; gap: var(--spacing-xs);">
            <span style="background: var(--danger-100); color: var(--danger-600); padding: 2px 6px; border-radius: 8px; font-size: 9px;">REQUIRED</span>
          </div>
        </div>
        <div style="margin-top: var(--spacing-sm); padding-top: var(--spacing-sm); border-top: 1px dashed var(--surface-300);">
          <div style="display: flex; gap: var(--spacing-xs); margin-top: var(--spacing-sm);">
            <button class="btn btn-secondary btn-sm" style="font-size: 11px; padding: 5px 12px;"><i class="pi pi-eye" style="margin-right: 4px; font-size: 10px;"></i> View</button>
            <button class="btn btn-primary btn-sm" style="font-size: 11px; padding: 5px 12px;"><i class="pi pi-pencil" style="margin-right: 4px; font-size: 10px;"></i> Start Submission</button>
          </div>
        </div>
      </div>

      <!-- Custom Form 2: Local Content Declaration -->
      <div style="background: var(--surface-50); border: 1px solid var(--surface-200); border-radius: var(--radius-sm); padding: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
            <div style="width: 36px; height: 36px; background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%); border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; color: white;">
              <i class="pi pi-map-marker" style="font-size: 14px;"></i>
            </div>
            <div>
              <div style="font-weight: 600; font-size: 12px; color: var(--text-primary);">Local Content Declaration</div>
              <div style="font-size: 10px; color: var(--text-muted);">Details of local sourcing and employment plans</div>
            </div>
          </div>
          <div style="display: flex; align-items: center; gap: var(--spacing-xs);">
            <span style="background: var(--surface-200); color: var(--text-muted); padding: 2px 6px; border-radius: 8px; font-size: 9px;">OPTIONAL</span>
          </div>
        </div>

          <div style="display: flex; gap: var(--spacing-xs); margin-top: var(--spacing-sm);">
            <button class="btn btn-secondary btn-sm" style="font-size: 11px; padding: 5px 12px;"><i class="pi pi-eye" style="margin-right: 4px; font-size: 10px;"></i> View</button>
            <button class="btn btn-primary btn-sm" style="font-size: 11px; padding: 5px 12px;"><i class="pi pi-pencil" style="margin-right: 4px; font-size: 10px;"></i> Start Submission</button>
          </div>
        </div>
      </div>

      <!-- Forms Summary -->



    <!-- ========== SECTION 6: COMPLIANCE & DECLARATIONS ========== -->
    <div class="supplier-section-card" id="supplier-section-compliance">
      <div class="supplier-section-header">
        <div class="supplier-section-title">
          <span class="supplier-section-title-icon">✅</span>
          <div>
            <h3>Compliance & Declarations</h3>
            <p>Confirm your organization meets UNOPS requirements</p>
          </div>
        </div>
      </div>


      <!-- Section 1: Self Disclosure Form -->
      <div class="supplier-subsection-header warning">
        <strong><i class="pi pi-exclamation-triangle" style="color: var(--warning-500);"></i> Section 1: Self Disclosure Form</strong>
      </div>

      <div class="supplier-compliance-item">
        <div class="supplier-compliance-number">1</div>
        <div class="supplier-compliance-content">
          <div class="supplier-compliance-title">Bankruptcy or Legal Proceedings</div>
          <div class="supplier-compliance-description">Has the entity or individual declared bankruptcy, or been involved in bankruptcy or receivership proceedings, or is there any judgment or pending legal action against them?</div>
        </div>
        <div class="supplier-compliance-response">
          <label class="supplier-radio-option"><input type="radio" name="disclosure1" value="no"><span>No</span></label>
          <label class="supplier-radio-option"><input type="radio" name="disclosure1" value="yes"><span>Yes</span></label>
        </div>
      </div>

      <div class="supplier-compliance-item">
        <div class="supplier-compliance-number">2</div>
        <div class="supplier-compliance-content">
          <div class="supplier-compliance-title">Tax and Social Security</div>
          <div class="supplier-compliance-description">Has the entity or individual been found in breach of obligations relating to the payment of taxes or social security contributions?</div>
        </div>
        <div class="supplier-compliance-response">
          <label class="supplier-radio-option"><input type="radio" name="disclosure2" value="no"><span>No</span></label>
          <label class="supplier-radio-option"><input type="radio" name="disclosure2" value="yes"><span>Yes</span></label>
        </div>
      </div>

      <div class="supplier-compliance-item">
        <div class="supplier-compliance-number">3</div>
        <div class="supplier-compliance-content">
          <div class="supplier-compliance-title">Misconduct and Ethical Violations</div>
          <div class="supplier-compliance-description">Has the entity or individual been found guilty of misconduct for the violation of applicable laws, regulations or ethical standards?</div>
        </div>
        <div class="supplier-compliance-response">
          <label class="supplier-radio-option"><input type="radio" name="disclosure3" value="no"><span>No</span></label>
          <label class="supplier-radio-option"><input type="radio" name="disclosure3" value="yes"><span>Yes</span></label>
        </div>
      </div>

      <div class="supplier-compliance-item">
        <div class="supplier-compliance-number">4</div>
        <div class="supplier-compliance-content">
          <div class="supplier-compliance-title">Proscribed Practices</div>
          <div class="supplier-compliance-description">Has the entity or individual engaged in any Proscribed Practices (corrupt practice, fraudulent practice, coercive practice, collusive practice, unethical practice, obstruction)?</div>
        </div>
        <div class="supplier-compliance-response">
          <label class="supplier-radio-option"><input type="radio" name="disclosure4" value="no"><span>No</span></label>
          <label class="supplier-radio-option"><input type="radio" name="disclosure4" value="yes"><span>Yes</span></label>
        </div>
      </div>

      <div class="supplier-compliance-item">
        <div class="supplier-compliance-number">5</div>
        <div class="supplier-compliance-content">
          <div class="supplier-compliance-title">Conflict of Interest</div>
          <div class="supplier-compliance-description">Does the entity or individual have a conflict of interest that may prevent them from entering into an agreement with UNOPS?</div>
        </div>
        <div class="supplier-compliance-response">
          <label class="supplier-radio-option"><input type="radio" name="disclosure5" value="no"><span>No</span></label>
          <label class="supplier-radio-option"><input type="radio" name="disclosure5" value="yes"><span>Yes</span></label>
        </div>
      </div>

      <div class="supplier-compliance-item">
        <div class="supplier-compliance-number">6</div>
        <div class="supplier-compliance-content">
          <div class="supplier-compliance-title">Serious Offences</div>
          <div class="supplier-compliance-description">Has the entity or individual been found to be involved in: Fraudulent practice, Corrupt practice, Money laundering, Terrorist financing, Child labour, or Human trafficking?</div>
        </div>
        <div class="supplier-compliance-response">
          <label class="supplier-radio-option"><input type="radio" name="disclosure6" value="no"><span>No</span></label>
          <label class="supplier-radio-option"><input type="radio" name="disclosure6" value="yes"><span>Yes</span></label>
        </div>
      </div>

      <div class="supplier-compliance-item">
        <div class="supplier-compliance-number">7</div>
        <div class="supplier-compliance-content">
          <div class="supplier-compliance-title">Performance Issues</div>
          <div class="supplier-compliance-description">Has the entity or individual had significant performance issues that led to early termination of a contract or application of penalties?</div>
        </div>
        <div class="supplier-compliance-response">
          <label class="supplier-radio-option"><input type="radio" name="disclosure7" value="no"><span>No</span></label>
          <label class="supplier-radio-option"><input type="radio" name="disclosure7" value="yes"><span>Yes</span></label>
        </div>
      </div>

      <!-- Section 2: Bid Submission Declaration -->
      <div class="supplier-subsection-header" style="margin-top: var(--spacing-xl);">
        <strong><i class="pi pi-file-edit"></i> Section 2: Bid Submission Declaration</strong>
      </div>

      <div class="supplier-declaration-box" style="margin-bottom: var(--spacing-md);">
        <p style="font-weight: 600; margin-bottom: var(--spacing-xs); font-size: 12px;">We, the undersigned, declare that:</p>
        <ol style="line-height: 1.5; padding-left: var(--spacing-sm); margin: 0; font-size: 11px;">
          <li style="margin-bottom: 3px;">We have examined and have no reservations to the bidding documents, including amendments:
            <span style="background: var(--info-50); padding: 2px 6px; border-radius: 3px; margin-left: 4px; font-size: 10px;">No. 01 - Dec 5, 2025</span>
          </li>
          <li style="margin-bottom: 3px;">We offer to supply in conformity with the bidding documents, including the UNOPS General Conditions of Contract;</li>
          <li style="margin-bottom: 3px;">The total price of our bid, excluding any discounts offered below, is: 
            <span style="background: var(--info-50); padding: 2px 6px; border-radius: 3px; margin: 0 3px; font-weight: 600; font-size: 10px;">USD 0.00</span>
          </li>
          <li style="margin-bottom: 3px;">Our bid shall be valid for the period of time of <span style="background: var(--info-50); padding: 1px 4px; border-radius: 3px; font-size: 10px;">90</span> days from the date fixed for the bid submission deadline;</li>
          <li style="margin-bottom: 3px;">If our bid is accepted, we commit to obtain a performance security in accordance with the General Conditions;</li>
          <li style="margin-bottom: 3px;">We have no conflict of interest in any activity that would put us in conflict with UNOPS;</li>
          <li style="margin-bottom: 3px;">We have not declared bankruptcy, are not involved in bankruptcy proceedings;</li>
          <li style="margin-bottom: 3px;">Our firm confirms that we have not been associated with the preparation of these tender documents;</li>
          <li style="margin-bottom: 3px;">We embrace the principles of the United Nations Supplier Code of Conduct;</li>
          <li style="margin-bottom: 3px;">Our firm has not been declared ineligible by UNOPS or included in UN suspension lists;</li>
          <li style="margin-bottom: 3px;">We have not offered and will not offer any gifts or favours in exchange for this ITB;</li>
          <li>We understand that you are not bound to accept the lowest evaluated bid.</li>
        </ol>
      </div>

      <!-- Authorized Signature -->
      <div class="supplier-subsection-header" style="margin-top: var(--spacing-xl);">
        <strong><i class="pi pi-pencil"></i> Authorized Signature</strong>
      </div>

      <div class="supplier-form-grid">
        <div class="supplier-form-field">
          <label><i class="pi pi-user"></i> Full Name <span style="color: var(--danger-500);">*</span></label>
          <input type="text" placeholder="Name of authorized signatory">
        </div>

        <div class="supplier-form-field">
          <label><i class="pi pi-briefcase"></i> Title/Position <span style="color: var(--danger-500);">*</span></label>
          <input type="text" placeholder="e.g., CEO, Managing Director">
        </div>

        <div class="supplier-form-field">
          <label><i class="pi pi-envelope"></i> Email <span style="color: var(--danger-500);">*</span></label>
          <input type="email" placeholder="signatory@company.com">
        </div>

        <div class="supplier-form-field">
          <label><i class="pi pi-calendar"></i> Date <span style="color: var(--danger-500);">*</span></label>
          <input type="date">
        </div>
      </div>

      <div class="supplier-form-field full-width" style="margin-top: var(--spacing-sm);">
        <label><i class="pi pi-pencil"></i> Digital Signature <span style="color: var(--danger-500);">*</span></label>
        <div class="supplier-upload-area" style="padding: var(--spacing-sm);">
          <div style="font-size: 1.3em; margin-bottom: 6px;">✍️</div>
          <div class="supplier-upload-text">Click to sign or upload signature</div>
          <div class="supplier-upload-hint">Accepted formats: PDF, PNG, JPG</div>
        </div>
      </div>

      <!-- Final Declaration -->
      <div class="supplier-declaration-box" style="margin-top: var(--spacing-sm);">
        <p><i class="pi pi-check-square"></i> I, the undersigned, hereby declare that the information provided is true and correct. I also understand that any willful dishonesty may result in the refusal of this submission. I understand that engagement in any of the above critical areas may, at the discretion of UNOPS, automatically result in the exclusion from this procurement process.</p>
      </div>

      <div class="supplier-action-bar">
        <button class="btn btn-ghost" onclick="prevSupplierSection('other-forms')"><i class="pi pi-arrow-left" style="margin-right: 6px;"></i> Back</button>
        <button class="btn btn-ghost"><i class="pi pi-save" style="margin-right: 6px;"></i> Save Draft</button>
        <button class="btn btn-success" onclick="submitSupplierBid()"><i class="pi pi-send" style="margin-right: 6px;"></i> Submit Bid</button>
      </div>
    </div>

  </div>
  <!-- END: ENHANCED SUPPLIER BID FORMS -->
  
          <div class="layout-grid" style="display: none;">
  <aside class="progress-sidebar">
  <div class="progress-card">
  <div class="progress-header">Your Progress</div>
  <div class="progress-bar">
  <div class="progress-fill" style="width: 70%;"></div>
  </div>
  <div class="progress-text">70% Complete</div>
  </div>
  
  <nav class="section-nav">
  <a href="#" class="section-nav-item completed" data-section="bid-details">
  <span class="section-icon">✓</span>
  <span>Bid Details</span>
  </a>
  <a href="#" class="section-nav-item completed" data-section="company">
  <span class="section-icon">✓</span>
  <span>Company Info</span>
  </a>
  <a href="#" class="section-nav-item active" data-section="submission">
  <span class="section-icon">📋</span>
  <span>Submission</span>
  </a>
  <a href="#" class="section-nav-item" data-section="review">
  <span class="section-icon">👁️</span>
  <span>Review & Submit</span>
  </a>
  </nav>
  </aside>
  
  <div class="content-area">
  <!-- Bid Details Section -->
  <section class="section-block hidden" id="section-bid-details">
  <div class="section-header">
  <div class="section-title">
  <div class="title-icon">📝</div>
  <span>Bid Participation Details</span>
  </div>
  <span class="section-status status-complete">Complete</span>
  </div>
  
  <div class="info-box">
  <span class="info-box-icon">💡</span>
  Specify your participation scope and what you will be offering.
  </div>
  
  <div class="form-grid">
  <div class="form-group full-width">
  <label class="form-label">Bidding for <span class="required">*</span></label>
  <div class="lot-selector">
  <div class="lot-card selected">
  <div class="lot-title">Entire Tender</div>
  <div class="lot-desc">All items</div>
  </div>
  <div class="lot-card">
  <div class="lot-title">Lot 1: Diagnostic Equipment</div>
  <div class="lot-desc">$100,000</div>
  </div>
  <div class="lot-card">
  <div class="lot-title">Lot 2: Surgical Supplies</div>
  <div class="lot-desc">$150,000</div>
  </div>
  </div>
  </div>
  
  <div class="form-group full-width">
  <label class="form-label">Brief Overview of Your Offering <span class="required">*</span></label>
  <textarea class="form-textarea" placeholder="Describe what you will offer...">We are offering comprehensive medical equipment solution with high-quality products, installation, training, and 3-year warranty.</textarea>
  </div>
  
  <div class="form-group">
  <label class="form-label">Delivery Timeline</label>
  <input type="text" class="form-input" value="90 days from contract signing">
  </div>
  
  <div class="form-group">
  <label class="form-label">Country of Supply</label>
  <select class="form-select">
  <option selected>United States</option>
  <option>Germany</option>
  <option>Japan</option>
  </select>
  </div>
  </div>
  </section>
  
  <!-- Company Information Section -->
  <section class="section-block hidden" id="section-company">
  <div class="section-header">
  <div class="section-title">
  <div class="title-icon">🏢</div>
  <span>Company Information</span>
  </div>
  <div>
  <button class="btn btn-ghost btn-sm" onclick="alert('Redirecting to Supplier Profile...')">
  <span>✏️</span> Edit Profile
  </button>
  <span class="section-status status-complete">Complete</span>
  </div>
  </div>
  
  <div class="info-box">
  <span class="info-box-icon">ℹ️</span>
  All company information is managed at the profile level. To update, please visit your supplier profile.
  </div>
  
  <h3 style="font-size: 16px; font-weight: 600; margin: var(--spacing-xl) 0 var(--spacing-md);">Company Details</h3>
  
  <div class="form-grid">
  <div class="form-group full-width">
  <label class="form-label">Company Legal Name</label>
  <input type="text" class="form-input" value="Acme Corporation Ltd." disabled>
  </div>
  
  <div class="form-group">
  <label class="form-label">UNGM Number</label>
  <input type="text" class="form-input" value="UNGM-123456" disabled>
  </div>
  
  <div class="form-group">
  <label class="form-label">Country</label>
  <input type="text" class="form-input" value="United States" disabled>
  </div>
  </div>
  
  <h3 style="font-size: 16px; font-weight: 600; margin: var(--spacing-xl) 0 var(--spacing-md);">Main Contact for This Bid <span class="required">*</span></h3>
  
  <div class="form-grid">
  <div class="form-group">
  <label class="form-label">Contact Name <span class="required">*</span></label>
  <input type="text" class="form-input" value="John Doe">
  </div>
  
  <div class="form-group">
  <label class="form-label">Email <span class="required">*</span></label>
  <input type="email" class="form-input" value="john.doe@acmecorp.com">
  </div>
  
  <div class="form-group">
  <label class="form-label">Phone <span class="required">*</span></label>
  <input type="tel" class="form-input" value="+1 (555) 123-4567">
  </div>
  
  <div class="form-group">
  <label class="form-label">Title <span class="required">*</span></label>
  <input type="text" class="form-input" value="Business Development Manager">
  </div>
  </div>
  
  <h3 style="font-size: 16px; font-weight: 600; margin: var(--spacing-xl) 0 var(--spacing-md);">Subsidiaries / Branch Offices</h3>
  
  <div class="info-box">
  <span class="info-box-icon">🏢</span>
  Subsidiary information is managed at the profile level.
  </div>
  
  <div class="subsidiary-item">
  <div class="subsidiary-info">
  <div class="subsidiary-name">Acme Medical Solutions Inc.</div>
  <div class="subsidiary-ungm">UNGM-123457 • United States • Medical Equipment Division</div>
  </div>
  <span style="font-size: 12px; color: var(--text-muted);">From Profile</span>
  </div>
  
  <h3 style="font-size: 16px; font-weight: 600; margin: var(--spacing-xl) 0 var(--spacing-md);">Joint Venture / Consortium</h3>
  
  <div class="checkbox-group">
  <input type="checkbox" id="jv-checkbox" onchange="toggleJVForm(this.checked)">
  <label for="jv-checkbox">I would like to bid as a Joint Venture / Consortium</label>
  </div>
  </section>
  
  <!-- Submission Section (renamed from Bid Proposal) -->
  <section class="section-block" id="section-submission">
  <div class="section-header">
  <div class="section-title">
  <div class="title-icon">📋</div>
  <span>Submission</span>
  </div>
  <div style="display: flex; gap: var(--spacing-md); align-items: center;">
  <button class="btn btn-secondary btn-sm" onclick="openModal('add-alternate-offer-modal')">
  <span>📑</span> Add Alternative Offer
  </button>
  <span class="section-status status-incomplete">In Progress</span>
  </div>
  </div>
  
  <div class="info-box">
  <span class="info-box-icon">📝</span>
  Complete all required forms below. Click each form to expand and fill in your information.
  </div>
  
  <!-- Form C: Price Schedule -->
  <div class="collapsible-form">
  <div class="collapsible-form-header" onclick="toggleForm(this)">
  <div class="collapsible-form-title">
  <div class="form-icon">💰</div>
  <span>Form C: Price Schedule Form</span>
  </div>
  <div class="collapsible-form-meta">
  <span class="form-completion">0% Complete</span>
  <span class="section-status status-incomplete">Not Started</span>
  <span class="collapse-icon">▼</span>
  </div>
  </div>
  <div class="collapsible-form-body">
  <div class="info-box" style="margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">📋</span>
  Fill in these Price Schedule Forms in accordance with the instructions. Tables are adapted according to the Schedule of Requirements and applicable Incoterms rules.
  </div>
  
  <!-- Bid Summary Section -->
  <h4 style="color: var(--primary-600); margin: var(--spacing-lg) 0 var(--spacing-md) 0; padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-500);">Bid Summary</h4>
  
  <div class="info-box" style="background: var(--info-50); border-left-color: var(--info-500); margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">💡</span>
  <strong>Calculated fields</strong> are automatically computed from the pricing tables below. Currency is restricted to: <strong>USD, EUR</strong>
  </div>
  
  <div class="table-responsive">
  <table class="data-table">
  <tbody>
  <tr>
  <td style="font-weight: 600; width: 60%;">Bidder's Total prices <strong>FCA</strong> (Price of goods FCA + Related Services)</td>
  <td style="background: var(--info-50);">
  <div style="display: flex; gap: 10px; align-items: center;">
  <select class="form-select" style="width: 100px;" disabled>
  <option>USD</option><option>EUR</option>
  </select>
  <input type="text" class="form-input" value="0.00" readonly style="flex: 1; background: var(--info-50);">
  </div>
  <small style="color: var(--text-muted);">Auto-calculated from prices table</small>
  </td>
  </tr>
  <tr>
  <td style="font-weight: 600;">Bidder's Total prices <strong>DPU</strong> (Price of goods DPU + Related Services)</td>
  <td style="background: var(--info-50);">
  <div style="display: flex; gap: 10px; align-items: center;">
  <select class="form-select" style="width: 100px;" disabled>
  <option>USD</option><option>EUR</option>
  </select>
  <input type="text" class="form-input" value="0.00" readonly style="flex: 1; background: var(--info-50);">
  </div>
  <small style="color: var(--text-muted);">Auto-calculated from prices table</small>
  </td>
  </tr>
  <tr style="border-top: 2px solid var(--surface-300);">
  <td style="font-weight: 600;">Total Price of Goods <strong>FCA</strong></td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);">
  </td>
  </tr>
  <tr>
  <td style="font-weight: 600;">Total Price of Goods <strong>DPU</strong></td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);">
  </td>
  </tr>
  <tr style="border-top: 2px solid var(--surface-300);">
  <td style="font-weight: 600;">Total Price of Related Services</td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);">
  </td>
  </tr>
  </tbody>
  </table>
  </div>
  
  <!-- Prices for Goods Section -->
  <h4 style="color: var(--primary-600); margin: var(--spacing-xl) 0 var(--spacing-md) 0; padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-500);">Prices for Goods</h4>
  
  <div class="info-box" style="background: var(--info-50); border-left-color: var(--info-500); margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">💡</span>
  Price columns shown based on selected Incoterms. Total prices auto-calculated. Currency dropdown limited to: <strong>USD, EUR</strong>
  </div>
  
  <div class="table-responsive">
  <table class="data-table">
  <thead>
  <tr>
  <th style="width: 5%;">Item</th>
  <th style="width: 25%;">Description</th>
  <th style="width: 8%;">Qty</th>
  <th style="width: 10%;">Currency</th>
  <th style="width: 13%;">Unit price FCA</th>
  <th style="width: 13%;">Unit price DPU</th>
  <th style="width: 13%;">Total FCA</th>
  <th style="width: 13%;">Total DPU</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td>1.</td>
  <td>Ultrasound Machines (UNSPSC: 42182104)</td>
  <td style="text-align: center;">5</td>
  <td><select class="form-select"><option>USD</option><option>EUR</option></select></td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  </tr>
  <tr>
  <td>2.</td>
  <td>Patient Monitors (UNSPSC: 42182108)</td>
  <td style="text-align: center;">20</td>
  <td><select class="form-select"><option>USD</option><option>EUR</option></select></td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  </tr>
  <tr>
  <td>3.</td>
  <td>Surgical Lights (UNSPSC: 42192201)</td>
  <td style="text-align: center;">8</td>
  <td><select class="form-select"><option>USD</option><option>EUR</option></select></td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  </tr>
  <tr>
  <td>4.</td>
  <td>Anesthesia Machines (UNSPSC: 42182101)</td>
  <td style="text-align: center;">3</td>
  <td><select class="form-select"><option>USD</option><option>EUR</option></select></td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  </tr>
  <tr style="font-weight: 600; background: var(--surface-100);">
  <td colspan="6" style="text-align: right; padding-right: var(--spacing-md);">Total Price of Goods →</td>
  <td style="background: var(--info-100);"><input type="text" class="form-input" value="0.00" readonly style="font-weight: 700; background: var(--info-100);"></td>
  <td style="background: var(--info-100);"><input type="text" class="form-input" value="0.00" readonly style="font-weight: 700; background: var(--info-100);"></td>
  </tr>
  </tbody>
  </table>
  </div>
  
  <!-- Prices for Related Services Section -->
  <h4 style="color: var(--primary-600); margin: var(--spacing-xl) 0 var(--spacing-md) 0; padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-500);">Prices for Related Services</h4>
  
  <div class="info-box" style="background: var(--info-50); border-left-color: var(--info-500); margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">💡</span>
  Service descriptions and quantities are <strong>pre-populated</strong> from the Schedule of Requirements. Only unit prices need to be entered.
  </div>
  
  <div class="table-responsive">
  <table class="data-table">
  <thead>
  <tr>
  <th>Item</th>
  <th>Description of services</th>
  <th>Quantity / Physical Unit</th>
  <th>Unit price (if applicable)</th>
  <th>Total price per service</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td>1.</td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="Installation and Configuration" readonly style="background: var(--info-50);">
  <small style="color: var(--text-muted);">Pre-populated from tender requirements</small>
  </td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="1 service" readonly style="background: var(--info-50);">
  </td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  </tr>
  <tr>
  <td>2.</td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="Training (3 days)" readonly style="background: var(--info-50);">
  <small style="color: var(--text-muted);">Pre-populated from tender requirements</small>
  </td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="10 persons" readonly style="background: var(--info-50);">
  </td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  </tr>
  <tr>
  <td>3.</td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="Extended Warranty (2 years)" readonly style="background: var(--info-50);">
  <small style="color: var(--text-muted);">Pre-populated from tender requirements</small>
  </td>
  <td style="background: var(--info-50);">
  <input type="text" class="form-input" value="All items" readonly style="background: var(--info-50);">
  </td>
  <td><input type="number" class="form-input" step="0.01" placeholder="0.00"></td>
  <td style="background: var(--info-50);"><input type="text" class="form-input" value="0.00" readonly style="background: var(--info-50);"></td>
  </tr>
  <tr style="font-weight: 600; background: var(--surface-100);">
  <td colspan="4" style="text-align: right; padding-right: var(--spacing-md);">Total Price of Related Services →</td>
  <td style="background: var(--info-100);"><input type="text" class="form-input" value="0.00" readonly style="font-weight: 700; background: var(--info-100);"></td>
  </tr>
  </tbody>
  </table>
  </div>
  
  <!-- Shipment & Delivery Information Section -->
  <h4 style="color: var(--primary-600); margin: var(--spacing-xl) 0 var(--spacing-md) 0; padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-500);">Shipment & Delivery Information</h4>
  
  <div class="table-responsive">
  <table class="data-table">
  <thead>
  <tr>
  <th>Item</th>
  <th>FCA Point(s) of Delivery</th>
  <th>Shipment dimensions<br><small>(Including package)</small></th>
  <th>Gross weight</th>
  <th>Containers - Number</th>
  <th>Containers - Size</th>  
  <th>Total volume</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td style="font-weight: 600;">Ultrasound Machines</td>
  <td><input type="text" class="form-input" placeholder="City, Country"></td>
  <td><input type="text" class="form-input" placeholder="L×W×H cm"></td>
  <td><input type="text" class="form-input" placeholder="kg"></td>
  <td><input type="text" class="form-input" placeholder="Number"></td>
  <td><input type="text" class="form-input" placeholder="L×W×H cm"></td>    
  <td><input type="text" class="form-input" placeholder="m³"></td>
  </tr>
  <tr>
  <td style="font-weight: 600;">Patient Monitors</td>
  <td><input type="text" class="form-input" placeholder="City, Country"></td>
  <td><input type="text" class="form-input" placeholder="L×W×H cm"></td>
  <td><input type="text" class="form-input" placeholder="kg"></td>
  <td><input type="text" class="form-input" placeholder="Number"></td>
  <td><input type="text" class="form-input" placeholder="L×W×H cm"></td>  
  <td><input type="text" class="form-input" placeholder="m³"></td>
  </tr>
  <tr>
  <td style="font-weight: 600;">Surgical Lights</td>
  <td><input type="text" class="form-input" placeholder="City, Country"></td>
  <td><input type="text" class="form-input" placeholder="L×W×H cm"></td>
  <td><input type="text" class="form-input" placeholder="kg"></td>
  <td><input type="text" class="form-input" placeholder="Number"></td>
  <td><input type="text" class="form-input" placeholder="L×W×H cm"></td>  
  <td><input type="text" class="form-input" placeholder="m³"></td>
  </tr>
  <tr>
  <td style="font-weight: 600;">Anesthesia Machines</td>
  <td><input type="text" class="form-input" placeholder="City, Country"></td>
  <td><input type="text" class="form-input" placeholder="L×W×H cm"></td>
  <td><input type="text" class="form-input" placeholder="kg"></td>
  <td><input type="text" class="form-input" placeholder="Number"></td>
  <td><input type="text" class="form-input" placeholder="L×W×H cm"></td>  
  <td><input type="text" class="form-input" placeholder="m³"></td>
  </tr>
  </tbody>
  </table>
  </div>
  </div>
  </div>
  
  <!-- Form D: Technical Bid Form -->
  <div class="collapsible-form">
  <div class="collapsible-form-header" onclick="toggleForm(this)">
  <div class="collapsible-form-title">
  <div class="form-icon">📋</div>
  <span>Form D: Technical Bid Form</span>
  </div>
  <div class="collapsible-form-meta">
  <span class="form-completion">0% Complete</span>
  <span class="section-status status-incomplete">Not Started</span>
  <span class="collapse-icon">▼</span>
  </div>
  </div>
  <div class="collapsible-form-body">
  <div class="info-box" style="margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">📋</span>
  Complete the <strong>Comparative Data Tables</strong> to demonstrate compliance with UNOPS requirements. Bidders are NOT allowed to make any changes in the "UNOPS requirements" columns.
  </div>
  
  <div class="info-box" style="background: var(--warning-50); border-left-color: var(--warning-500); margin-bottom: var(--spacing-lg);">
  <span class="info-box-icon">⚠️</span>
  Fill in all coloured cells to demonstrate compliance. Changes to "UNOPS requirements" columns might disqualify your bid.
  </div>
  
  <!-- Technical Specifications Table for Item 1 -->
  <h4 style="color: var(--primary-600); margin: var(--spacing-lg) 0 var(--spacing-md) 0; padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-500);">Technical specifications for goods – Comparative Data Table</h4>
  
  <div style="font-weight: 600; margin: var(--spacing-md) 0; color: var(--primary-700); background: var(--surface-100); padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-sm);">UNSPSC Code: 42182104 - Ultrasound Machines</div>
  
  <!-- Model/Manufacturer Info -->
  <div class="table-responsive" style="margin-bottom: var(--spacing-md);">
  <table class="data-table">
  <tbody>
  <tr>
  <td style="font-weight: 600; width: 30%;">Model (full name)</td>
  <td><input type="text" class="form-input" placeholder="Insert model name"></td>
  </tr>
  <tr>
  <td style="font-weight: 600;">Manufacturer</td>
  <td>
  <div style="display: flex; gap: 10px; align-items: center;">
  <input type="text" class="form-input" placeholder="Full legal name" style="flex: 1;">
  <input type="text" class="form-input" placeholder="UNGM ID (optional)" style="width: 150px;">
  </div>
  </td>
  </tr>
  <tr>
  <td style="font-weight: 600;">Manufacturer Address</td>
  <td><textarea class="form-textarea" placeholder="Full address" rows="2"></textarea></td>
  </tr>
  <tr>
  <td style="font-weight: 600;">Country of Origin</td>
  <td><input type="text" class="form-input" placeholder="Insert country"></td>
  </tr>
  </tbody>
  </table>
  </div>
  
  <!-- Comparative Data Table -->
  <div class="table-responsive">
  <table class="data-table">
  <thead>
  <tr>
  <th style="width: 40px;">#</th>
  <th style="width: 40%;">Item Specification<br><small>(UNOPS Requirements)</small></th>
  <th style="width: 15%;">Is quotation compliant?<br><small>Bidder to complete</small></th>
  <th>Details of goods offered<br><small>Bidder to complete</small></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td style="text-align: center; font-weight: 600; background: var(--surface-100);">1</td>
  <td style="background: var(--surface-50);">Portable ultrasound system with color Doppler capability</td>
  <td style="background: var(--warning-50);">
  <div style="display: flex; flex-direction: column; gap: 4px;">
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec1"> Yes</label>
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec1"> No</label>
  </div>
  </td>
  <td style="background: var(--warning-50);"><textarea class="form-textarea" placeholder="Insert details of goods offered, including specifications and references to manuals" rows="2"></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600; background: var(--surface-100);">2</td>
  <td style="background: var(--surface-50);">15" or larger high-resolution LED display, minimum 1920x1080 pixels</td>
  <td style="background: var(--warning-50);">
  <div style="display: flex; flex-direction: column; gap: 4px;">
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec2"> Yes</label>
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec2"> No</label>
  </div>
  </td>
  <td style="background: var(--warning-50);"><textarea class="form-textarea" placeholder="Insert details of goods offered" rows="2"></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600; background: var(--surface-100);">3</td>
  <td style="background: var(--surface-50);">Minimum 3 probe connectors with simultaneous probe operation capability</td>
  <td style="background: var(--warning-50);">
  <div style="display: flex; flex-direction: column; gap: 4px;">
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec3"> Yes</label>
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec3"> No</label>
  </div>
  </td>
  <td style="background: var(--warning-50);"><textarea class="form-textarea" placeholder="Insert details of goods offered" rows="2"></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600; background: var(--surface-100);">4</td>
  <td style="background: var(--surface-50);">Built-in battery with minimum 60 minutes operation time</td>
  <td style="background: var(--warning-50);">
  <div style="display: flex; flex-direction: column; gap: 4px;">
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec4"> Yes</label>
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec4"> No</label>
  </div>
  </td>
  <td style="background: var(--warning-50);"><textarea class="form-textarea" placeholder="Insert details of goods offered" rows="2"></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600; background: var(--surface-100);">5</td>
  <td style="background: var(--surface-50);">CE and/or FDA approved medical device certification</td>
  <td style="background: var(--warning-50);">
  <div style="display: flex; flex-direction: column; gap: 4px;">
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec5"> Yes</label>
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="spec5"> No</label>
  </div>
  </td>
  <td style="background: var(--warning-50);"><textarea class="form-textarea" placeholder="Insert details of goods offered" rows="2"></textarea></td>
  </tr>
  </tbody>
  </table>
  </div>
  
  <div class="form-group" style="margin-top: var(--spacing-md);">
  <label class="form-label"><strong>ANY DEVIATION MUST BE LISTED BELOW:</strong></label>
  <textarea class="form-textarea" rows="3" placeholder="List any deviations from requirements for Ultrasound Machines"></textarea>
  </div>
  
  <!-- Delivery Requirements Table -->
  <h4 style="color: var(--primary-600); margin: var(--spacing-xl) 0 var(--spacing-md) 0; padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-500);">Delivery requirements – Comparative Data Table</h4>
  
  <div class="table-responsive">
  <table class="data-table">
  <thead>
  <tr>
  <th style="width: 40%;">Delivery Requirement<br><small>(UNOPS Requirements)</small></th>
  <th style="width: 15%;">Is quotation compliant?<br><small>Bidder to complete</small></th>
  <th>Details<br><small>Bidder to complete</small></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td style="background: var(--surface-50);">
  <strong>Delivery time for the goods</strong><br>
  Bidder shall make the goods available at FCA within 60 days and deliver to DPU within 90 days after Contract signature.
  </td>
  <td style="background: var(--warning-50);">
  <div style="display: flex; flex-direction: column; gap: 4px;">
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="delivery1"> Yes</label>
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="delivery1"> No</label>
  </div>
  </td>
  <td style="background: var(--warning-50);"><textarea class="form-textarea" placeholder="Insert details" rows="2"></textarea></td>
  </tr>
  <tr>
  <td style="background: var(--surface-50);">
  <strong>Delivery place and Incoterms rules</strong><br>
  Bidder's quoted FCA point – FCA (Incoterms2020)<br>
  Final destination – DPU (Incoterms2020)
  </td>
  <td style="background: var(--warning-50);">
  <div style="display: flex; flex-direction: column; gap: 4px;">
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="delivery2"> Yes</label>
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="delivery2"> No</label>
  </div>
  </td>
  <td style="background: var(--warning-50);"><textarea class="form-textarea" placeholder="Insert details" rows="2"></textarea></td>
  </tr>
  <tr>
  <td style="background: var(--surface-50);">
  <strong>Consignee details</strong><br>
  United Nations Office for Project Services (UNOPS)<br>
  [Address as specified in tender documents]
  </td>
  <td style="background: var(--warning-50);">
  <div style="display: flex; flex-direction: column; gap: 4px;">
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="delivery3"> Yes</label>
  <label style="display: flex; align-items: center; gap: 6px;"><input type="radio" name="delivery3"> No</label>
  </div>
  </td>
  <td style="background: var(--warning-50);"><textarea class="form-textarea" placeholder="Insert details" rows="2"></textarea></td>
  </tr>
  </tbody>
  </table>
  </div>
  
  <!-- Supporting Documents -->
  <h4 style="color: var(--primary-600); margin: var(--spacing-xl) 0 var(--spacing-md) 0; padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-500);">Supporting Documents</h4>
  
  <div class="file-upload-area" style="padding: var(--spacing-lg);">
  <div class="file-upload-options">
  <button class="upload-option-btn" onclick="openModal('select-from-profile-modal')">
  📁 Select from Profile
  </button>
  <button class="upload-option-btn">
  📤 Upload New
  </button>
  </div>
  <div class="upload-text" style="margin-top: var(--spacing-sm);">Upload: Product brochures, technical data sheets, certifications (ISO 13485, CE, FDA)</div>
  </div>
  </div>
  </div>
  
  <!-- DRiVE Questionnaire Form -->
  <div class="collapsible-form">
  <div class="collapsible-form-header" onclick="toggleForm(this)">
  <div class="collapsible-form-title">
  <div class="form-icon">🔗</div>
  <span>DRiVE Self-Assessment Questionnaire</span>
  </div>
  <div class="collapsible-form-meta">
  <span class="section-status status-complete">Linked</span>
  <span class="collapse-icon">▼</span>
  </div>
  </div>
  <div class="collapsible-form-body">
  <div class="info-box" style="background: var(--success-50); border-left-color: var(--success-500);">
  <span class="info-box-icon">✓</span>
  <strong>DRiVE Assessment Linked:</strong> Your current DRiVE questionnaire submission (completed on 15 Nov 2024) will be linked to this tender. The assessment is valid and will be included as part of your bid documentation.
  </div>
  
  <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-md);">
  <button class="btn btn-secondary btn-sm">Review DRiVE Assessment</button>
  <button class="btn btn-ghost btn-sm">Complete New Assessment</button>
  </div>
  </div>
  </div>
  
  <!-- Form A: JV/Consortium Partner Information (conditional) -->
  <div class="collapsible-form collapsed" id="jv-form-section" style="display: none;">
  <div class="collapsible-form-header" onclick="toggleForm(this)">
  <div class="collapsible-form-title">
  <div class="form-icon">🤝</div>
  <span>Form A: Joint Venture Partner Information</span>
  </div>
  <div class="collapsible-form-meta">
  <span class="optional-badge">Conditional</span>
  <span class="collapse-icon">▼</span>
  </div>
  </div>
  <div class="collapsible-form-body">
  <div class="info-box" style="margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">📋</span>
  To be completed and returned with your Bid if the Bid is submitted as a Joint Venture/Consortium/Association.
  </div>
  
  <div class="form-group" style="margin-bottom: var(--spacing-lg);">
  <label class="form-label">JV / Consortium / Association Name <span class="required">*</span></label>
  <input type="text" class="form-input" id="jvNameInput" placeholder="Enter the name of the Joint Venture, Consortium, or Association">
  </div>
  
  <div class="info-box" style="background: var(--info-50); border-left-color: var(--info-500); margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">ℹ️</span>
  Add all partners in the JV/Consortium/Association below. One partner must be designated as the <strong>Leading Partner</strong> who will have authority to bind the JV.
  </div>
  
  <div id="jvPartnersContainer"></div>
  
  <div style="background: var(--surface-100); border: 1px solid var(--surface-200); border-radius: var(--radius-sm); padding: var(--spacing-md); margin: var(--spacing-md) 0; display: flex; justify-content: space-between; align-items: center;" id="jvPercentageSummary">
  <span style="font-weight: 600;">Total Share: <span id="totalJVPercentage">0</span>%</span>
  <span id="jvPercentageStatus" style="color: var(--warning-500);">Must equal 100%</span>
  </div>
  
  <button class="btn btn-secondary btn-sm" onclick="addJVPartnerBidding()">
  <span>➕</span> Add Partner
  </button>
  
  <div class="info-box" style="margin-top: var(--spacing-lg);">
  <span class="info-box-icon">📝</span>
  We hereby confirm that if the contract is awarded, all parties shall be jointly and severally liable to UNOPS for the fulfillment of the Contract.
  </div>
  
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); margin-top: var(--spacing-lg);">
  <div>
  <button class="btn btn-secondary" onclick="downloadFormAPDF()" style="width: 100%;">
  📥 Download Form A as PDF for Signatures
  </button>
  </div>
  <div class="file-upload-area" style="padding: var(--spacing-md); text-align: center;">
  <label for="form-a-upload-bid" style="cursor: pointer; display: block;">
  <div style="font-size: 1.5em; margin-bottom: var(--spacing-xs);">📤</div>
  <div style="font-weight: 600;">Upload Signed Document</div>
  <div style="font-size: 12px; color: var(--text-muted);">Click or drag file here</div>
  <input type="file" id="form-a-upload-bid" accept=".pdf,.jpg,.png" style="display: none;">
  </label>
  </div>
  </div>
  </div>
  </div>
  
  <!-- Form B: Bid Submission Form -->
  <div class="collapsible-form">
  <div class="collapsible-form-header" onclick="toggleForm(this)">
  <div class="collapsible-form-title">
  <div class="form-icon">📄</div>
  <span>Form B: Bid Submission Form</span>
  </div>
  <div class="collapsible-form-meta">
  <span class="form-completion">0% Complete</span>
  <span class="section-status status-incomplete">Not Started</span>
  <span class="collapse-icon">▼</span>
  </div>
  </div>
  <div class="collapsible-form-body">
  <div class="info-box" style="margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">📋</span>
  Complete this form and sign it as part of your bid submission. No alterations to its format shall be permitted.
  </div>
  
  <div class="info-box" style="background: var(--info-50); border-left-color: var(--info-500); margin-bottom: var(--spacing-lg);">
  <span class="info-box-icon">ℹ️</span>
  Fields highlighted in blue are <strong>pre-populated</strong> from previous steps and tender configuration.
  </div>
  
  <div style="background: var(--surface-50); border: 2px solid var(--primary-500); padding: var(--spacing-lg); border-radius: var(--radius-md); margin-bottom: var(--spacing-lg);">
  <p style="font-weight: 600; margin-bottom: var(--spacing-md);">We, the undersigned, declare that:</p>
  
  <ol style="margin-left: var(--spacing-lg); line-height: 1.8;">
  <li style="margin-bottom: var(--spacing-md);">We have examined and have no reservations to the bidding documents, including amendments:
  <div style="display: inline-flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
  <span style="background: var(--info-50); padding: 4px 10px; border-radius: 4px; border: 1px solid var(--info-300); font-weight: 600;">No. 01 - Dec 5, 2024</span>
  </div>
  </li>
  
  <li style="margin-bottom: var(--spacing-md);">We offer to supply in conformity with the bidding documents, including the UNOPS General Conditions of Contract;</li>
  
  <li style="margin-bottom: var(--spacing-md);">The total price of our bid, excluding any discounts offered in item (d) below, is:
  <span style="background: var(--info-50); padding: 4px 10px; border-radius: 4px; border: 1px solid var(--info-300); font-weight: 600;">USD <span id="bidTotalPrice">0.00</span></span>
  </li>
  
  <li style="margin-bottom: var(--spacing-md);">The discounts offered and the methodology for their application are:
  <div class="form-group" style="margin-top: var(--spacing-sm);">
  <label class="form-label">Discounts Offered</label>
  <textarea class="form-textarea" placeholder="Enter any discounts you wish to offer..." rows="3"></textarea>
  </div>
  <div class="form-group">
  <label class="form-label">Methodology of Application</label>
  <textarea class="form-textarea" placeholder="Describe how discounts will be applied..." rows="3"></textarea>
  </div>
  </li>
  
  <li style="margin-bottom: var(--spacing-md);">Our bid shall be valid for the period of
  <input type="number" class="form-input" value="90" readonly style="width: 80px; display: inline-block; background: var(--info-50); text-align: center;"> days
  from the date fixed for the bid submission deadline;</li>
  
  <li style="margin-bottom: var(--spacing-md);">If our bid is accepted, we commit to obtain a performance security in accordance with Instructions to Bidders;</li>
  
  <li style="margin-bottom: var(--spacing-md);">We have no conflict of interest in any activity that would put us in a conflict with UNOPS;</li>
  
  <li style="margin-bottom: var(--spacing-md);">We have not declared bankruptcy, are not involved in bankruptcy proceedings;</li>
  
  <li style="margin-bottom: var(--spacing-md);">Our firm confirms that we have not been associated with the preparation of the design or documents used in this solicitation;</li>
  
  <li style="margin-bottom: var(--spacing-md);">We embrace the principles of the United Nations Supplier Code of Conduct and adhere to the UN Global Compact;</li>
  
  <li style="margin-bottom: var(--spacing-md);">Our firm, affiliates, or subsidiaries have not been declared ineligible by UNOPS or listed by the UN Security Council;</li>
  
  <li style="margin-bottom: var(--spacing-md);">We have not offered and will not offer fees, gifts or favours in exchange for this ITB;</li>
  
  <li style="margin-bottom: var(--spacing-md);">We understand that you are not bound to accept the lowest evaluated bid or any other bid.</li>
  </ol>
  </div>
  </div>
  </div>
  
  <!-- Form G: Performance Statement -->
  <div class="collapsible-form">
  <div class="collapsible-form-header" onclick="toggleForm(this)">
  <div class="collapsible-form-title">
  <div class="form-icon">📊</div>
  <span>Form G: Performance Statement</span>
  </div>
  <div class="collapsible-form-meta">
  <span class="form-completion">0% Complete</span>
  <span class="section-status status-incomplete">Not Started</span>
  <span class="collapse-icon">▼</span>
  </div>
  </div>
  <div class="collapsible-form-body">
  <div class="info-box" style="margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">📋</span>
  Provide references of similar contracts completed in the past. Include at least 3 relevant references.
  </div>
  
  <div class="table-responsive">
  <table class="data-table" id="performanceTable">
  <thead>
  <tr>
  <th style="width: 20%;">Order placed by<br><small>(Full address of purchaser)</small></th>
  <th style="width: 12%;">Order no & date</th>
  <th style="width: 18%;">Description & quantity of ordered items</th>
  <th style="width: 10%;">Value of Order</th>
  <th style="width: 10%;">Contractual Delivery Date</th>
  <th style="width: 10%;">Actual Delivery Date</th>
  <th style="width: 10%;">Remarks (reasons of late delivery, if any)</th>
  <th style="width: 10%;">Was supply satisfactory?</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><textarea class="form-textarea" rows="2" placeholder="Company name & address"></textarea></td>
  <td><input type="text" class="form-input" placeholder="Order #"></td>
  <td><textarea class="form-textarea" rows="2" placeholder="Description"></textarea></td>
  <td><input type="text" class="form-input" placeholder="$0.00"></td>
  <td><input type="date" class="form-input"></td>
  <td><input type="date" class="form-input"></td>
  <td><textarea class="form-textarea" rows="2" placeholder="Remarks"></textarea></td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  </tr>
  <tr>
  <td><textarea class="form-textarea" rows="2" placeholder="Company name & address"></textarea></td>
  <td><input type="text" class="form-input" placeholder="Order #"></td>
  <td><textarea class="form-textarea" rows="2" placeholder="Description"></textarea></td>
  <td><input type="text" class="form-input" placeholder="$0.00"></td>
  <td><input type="date" class="form-input"></td>
  <td><input type="date" class="form-input"></td>
  <td><textarea class="form-textarea" rows="2" placeholder="Remarks"></textarea></td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  </tr>
  <tr>
  <td><textarea class="form-textarea" rows="2" placeholder="Company name & address"></textarea></td>
  <td><input type="text" class="form-input" placeholder="Order #"></td>
  <td><textarea class="form-textarea" rows="2" placeholder="Description"></textarea></td>
  <td><input type="text" class="form-input" placeholder="$0.00"></td>
  <td><input type="date" class="form-input"></td>
  <td><input type="date" class="form-input"></td>
  <td><textarea class="form-textarea" rows="2" placeholder="Remarks"></textarea></td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  </tr>
  </tbody>
  </table>
  </div>
  
  <button class="btn btn-secondary btn-sm" onclick="addPerformanceRow()" style="margin-top: var(--spacing-md);">
  <span>➕</span> Add Another Reference
  </button>
  </div>
  </div>
  
  <!-- Form H: Self Disclosure -->
  <div class="collapsible-form">
  <div class="collapsible-form-header" onclick="toggleForm(this)">
  <div class="collapsible-form-title">
  <div class="form-icon">✅</div>
  <span>Form H: Self Disclosure Form</span>
  </div>
  <div class="collapsible-form-meta">
  <span class="form-completion">0% Complete</span>
  <span class="section-status status-incomplete">Not Started</span>
  <span class="collapse-icon">▼</span>
  </div>
  </div>
  <div class="collapsible-form-body">
  <div class="info-box" style="margin-bottom: var(--spacing-md);">
  <span class="info-box-icon">📋</span>
  Complete the self-disclosure questions below. If you answer "Yes" to any question, provide an explanation in the comments field.
  </div>
  
  <div class="table-responsive">
  <table class="data-table">
  <thead>
  <tr>
  <th style="width: 5%;">Ref.</th>
  <th style="width: 55%;">Critical Area</th>
  <th style="width: 15%;">Response</th>
  <th style="width: 25%;">Comments</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td style="text-align: center; font-weight: 600;">1</td>
  <td>Has the entity or individual declared bankruptcy, or been involved in bankruptcy or receivership proceedings?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">2</td>
  <td>Has the entity or individual been found in breach of their obligations relating to the payment of taxes or social security contributions?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">3</td>
  <td>Has the entity or individual been found guilty of misconduct for the violation of applicable laws, regulations or ethical standards?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">4</td>
  <td>Has the entity or individual engaged in any Proscribed Practices (corrupt, fraudulent, coercive, collusive, unethical practice, or obstruction)?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">5</td>
  <td>Has the entity or individual unduly obtained any confidential information in connection with this procurement process?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">6</td>
  <td>Does the entity or individual have a conflict of interest that may prevent them from entering into an agreement with UNOPS?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">7</td>
  <td>Has the entity or individual been found to be involved in: Fraudulent practice, Corrupt practice, Money laundering, Terrorist financing, Child labour, or Human trafficking?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">8</td>
  <td>Has the entity or individual had significant performance issues in the past that led to early termination or contractual penalties?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">9</td>
  <td>Has the entity or individual committed any financial irregularity that prejudiced the use of public funds?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  <tr>
  <td style="text-align: center; font-weight: 600;">10</td>
  <td>Has the entity or individual created an entity in a different jurisdiction to circumvent fiscal, social or legal obligations?</td>
  <td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
  <td><textarea class="form-textarea" rows="2" placeholder="If 'Yes', explain..."></textarea></td>
  </tr>
  </tbody>
  </table>
  </div>
  
  <div style="background: var(--surface-50); border: 2px solid var(--primary-500); padding: var(--spacing-md); border-radius: var(--radius-md); margin-top: var(--spacing-lg);">
  <p style="font-weight: 600;">I, the undersigned, hereby declare that the information provided is true and correct. I understand that any willful dishonesty may result in the refusal of this submission and engagement in any of the above critical areas may result in exclusion from this procurement process.</p>
  </div>
  </div>
  </div>
  </section>
  </div>
  </div>
  </div>
  </div>

</main>
</div>

<!-- Modals -->
<div class="modal" id="ask-clarification-modal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title">
<i class="pi pi-comment"></i>
<span>Ask a Clarification Question</span>
</h3>
<button class="modal-close" onclick="closeModal('ask-clarification-modal')">×</button>
</div>
<div class="modal-body">
<div class="alert alert-info">
<i class="pi pi-info-circle"></i>
<div>
<strong>Anonymous Submission</strong>
<p style="margin-top: 4px; font-size: 13px;">Your question will be anonymized and the response will be visible to all bidders.</p>
</div>
</div>

<div class="form-group" style="margin-bottom: var(--spacing-lg);">
<label class="form-label">Related Section <span class="required">*</span></label>
<select class="form-select">
<option>Select...</option>
<option>General Information</option>
<option>Technical Specifications</option>
<option>Pricing</option>
</select>
</div>

<div class="form-group">
<label class="form-label">Your Question <span class="required">*</span></label>
<textarea class="form-textarea" placeholder="Type your question..." style="min-height: 150px;"></textarea>
</div>
</div>
<div class="modal-footer">
<button class="btn btn-ghost" onclick="closeModal('ask-clarification-modal')">Cancel</button>
<button class="btn btn-primary" onclick="submitClarification()"><i class="pi pi-send" style="margin-right: 8px;"></i>Submit Question</button>
</div>
</div>
</div>

<div class="modal" id="add-alternate-offer-modal">
<div class="modal-content" style="max-width: 550px;">
<div class="modal-header">
<h3 class="modal-title">
<i class="pi pi-copy"></i>
<span>Add Alternate Offer</span>
</h3>
<button class="modal-close" onclick="closeModal('add-alternate-offer-modal')">×</button>
</div>
<div class="modal-body">
<div class="alert alert-info" style="background: linear-gradient(135deg, var(--warning-50) 0%, var(--info-50) 100%);">
<i class="pi pi-lightbulb" style="color: var(--warning-500);"></i>
<div>
<strong style="color: var(--warning-700);">About Alternate Offers</strong>
<p style="margin-top: 4px; font-size: 13px;">An alternate offer allows you to submit an additional bid alongside your primary (main) offer. This is useful when you can offer different product configurations, pricing options, or technical solutions.</p>
</div>
</div>

<div style="background: var(--surface-50); border-radius: var(--radius-md); padding: var(--spacing-md); margin: var(--spacing-md) 0;">
<h4 style="font-size: 13px; font-weight: 600; color: var(--primary-700); margin-bottom: var(--spacing-sm);"><i class="pi pi-list" style="margin-right: 6px;"></i> What will be duplicated:</h4>
<ul style="font-size: 12px; color: var(--text-secondary); margin: 0; padding-left: 20px; line-height: 1.8;">
<li><strong>Technical Bid:</strong> All product specifications, compliance tables, manufacturer details</li>
<li><strong>Financial Bid:</strong> All pricing for goods, services, delivery, and discounts</li>
</ul>
</div>

<div class="alert alert-info" style="background: var(--info-50);">
<i class="pi pi-info-circle" style="color: var(--info-500);"></i>
<div style="font-size: 12px;">You can switch between offers using the tabs at the top of the Technical Bid and Financial Bid sections.</div>
</div>
</div>
<div class="modal-footer">
<button class="btn btn-ghost" onclick="closeModal('add-alternate-offer-modal')">Cancel</button>
<button class="btn btn-primary" onclick="createAlternateOffer()" style="background: linear-gradient(135deg, var(--warning-500) 0%, #f57c00 100%); border-color: var(--warning-500);"><i class="pi pi-plus-circle" style="margin-right: 8px;"></i>Create Alternate Offer</button>
</div>
</div>
</div>

<div class="modal" id="select-from-profile-modal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title">
<i class="pi pi-folder-open"></i>
<span>Select from Profile</span>
</h3>
<button class="modal-close" onclick="closeModal('select-from-profile-modal')">×</button>
</div>
<div class="modal-body">
<div class="alert alert-info" style="margin-bottom: var(--spacing-lg);">
<i class="pi pi-info-circle"></i>
<div>
<strong>Your Profile Documents</strong>
<p style="margin-top: 4px; font-size: 13px;">Select documents from your supplier profile to attach to this submission. These documents are already verified and stored securely.</p>
</div>
</div>

<div style="max-height: 350px; overflow-y: auto;">
<div class="uploaded-file" style="cursor: pointer; transition: all 0.2s; border: 2px solid transparent;" onmouseover="this.style.borderColor='var(--primary-400)'" onmouseout="this.style.borderColor='transparent'">
<div class="file-icon"><i class="pi pi-file-pdf" style="font-size: 24px; color: var(--danger-500);"></i></div>
<div class="file-info">
<div class="file-name">ISO-13485-Certificate.pdf</div>
<div class="file-size">1.2 MB • Valid until: Dec 2025</div>
</div>
<input type="checkbox" style="width: 20px; height: 20px; cursor: pointer;">
</div>

<div class="uploaded-file" style="cursor: pointer; transition: all 0.2s; border: 2px solid transparent;" onmouseover="this.style.borderColor='var(--primary-400)'" onmouseout="this.style.borderColor='transparent'">
<div class="file-icon"><i class="pi pi-file-pdf" style="font-size: 24px; color: var(--danger-500);"></i></div>
<div class="file-info">
<div class="file-name">Company-Registration.pdf</div>
<div class="file-size">850 KB • Uploaded: Nov 2024</div>
</div>
<input type="checkbox" style="width: 20px; height: 20px; cursor: pointer;">
</div>

<div class="uploaded-file" style="cursor: pointer; transition: all 0.2s; border: 2px solid transparent;" onmouseover="this.style.borderColor='var(--primary-400)'" onmouseout="this.style.borderColor='transparent'">
<div class="file-icon"><i class="pi pi-file-pdf" style="font-size: 24px; color: var(--danger-500);"></i></div>
<div class="file-info">
<div class="file-name">Tax-Clearance-Certificate.pdf</div>
<div class="file-size">320 KB • Uploaded: Oct 2024</div>
</div>
<input type="checkbox" style="width: 20px; height: 20px; cursor: pointer;">
</div>

<div class="uploaded-file" style="cursor: pointer; transition: all 0.2s; border: 2px solid transparent;" onmouseover="this.style.borderColor='var(--primary-400)'" onmouseout="this.style.borderColor='transparent'">
<div class="file-icon"><i class="pi pi-file-pdf" style="font-size: 24px; color: var(--danger-500);"></i></div>
<div class="file-info">
<div class="file-name">Financial-Statements-2023.pdf</div>
<div class="file-size">2.1 MB • Uploaded: Sep 2024</div>
</div>
<input type="checkbox" style="width: 20px; height: 20px; cursor: pointer;">
</div>
</div>
</div>
<div class="modal-footer">
<button class="btn btn-ghost" onclick="closeModal('select-from-profile-modal')">Cancel</button>
<button class="btn btn-primary" onclick="closeModal('select-from-profile-modal')"><i class="pi pi-check" style="margin-right: 8px;"></i>Attach Selected</button>
</div>
</div>
</div>

<!-- Replicate Manufacturer Modal -->
<div class="modal" id="replicate-manufacturer-modal">
<div class="modal-content" style="max-width: 450px;">
<div class="modal-header">
<h3 class="modal-title">
<i class="pi pi-copy"></i>
<span>Apply Manufacturer to Items</span>
</h3>
<button class="modal-close" onclick="closeModal('replicate-manufacturer-modal')">×</button>
</div>
<div class="modal-body">
<div class="alert alert-info" style="margin-bottom: var(--spacing-md);">
<i class="pi pi-info-circle"></i>
<div>
<strong>Replicate Manufacturer Info</strong>
<p style="margin-top: 4px; font-size: 12px;">Select the line items where you want to apply the same manufacturer details (Name, UNGM ID, Address).</p>
</div>
</div>
<div id="replicate-manufacturer-items" style="max-height: 250px; overflow-y: auto;">
<!-- Items will be populated dynamically -->
</div>
<div style="margin-top: var(--spacing-sm); padding-top: var(--spacing-sm); border-top: 1px solid var(--surface-200);">
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 12px; color: var(--text-secondary);">
<input type="checkbox" id="replicate-select-all" onchange="toggleReplicateSelectAll(this.checked)">
<span>Select all items</span>
</label>
</div>
</div>
<div class="modal-footer">
<button class="btn btn-ghost" onclick="closeModal('replicate-manufacturer-modal')">Cancel</button>
<button class="btn btn-primary" onclick="applyManufacturerToSelected()"><i class="pi pi-check" style="margin-right: 8px;"></i>Apply to Selected</button>
</div>
</div>
</div>


<script>
let currentView = 'dashboard';
let currentSection = 'submission';

// ==================== SIDEBAR FUNCTIONS ====================

// Toggle Sidebar Collapsed/Expanded
function toggleSidebar() {
    const sidebar = document.getElementById('mainSidebar');
    sidebar.classList.toggle('collapsed');
}

// Toggle Menu Group Function
function toggleMenuGroup(header) {
    const group = header.parentElement;
    group.classList.toggle('collapsed');
}

// Set active menu item and update module name in header
function setActiveMenuItem(menuItem) {
    // Remove active from all
    document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
    // Set new active
    menuItem.classList.add('active');
    // Update module name in header
    const moduleName = menuItem.getAttribute('data-module');
    if (moduleName) {
        const moduleNameEl = document.getElementById('currentModuleName');
        if (moduleNameEl) {
            moduleNameEl.textContent = moduleName;
        }
    }
    // Expand parent group if collapsed
    const parentGroup = menuItem.closest('.menu-group');
    if (parentGroup && parentGroup.classList.contains('collapsed')) {
        parentGroup.classList.remove('collapsed');
    }
}

document.addEventListener('DOMContentLoaded', function() {
attachMenuListeners();
attachSectionNavListeners();

// Expand any menu group containing an active item on load
document.querySelectorAll('.menu-item.active').forEach(item => {
    const parentGroup = item.closest('.menu-group');
    if (parentGroup) {
        parentGroup.classList.remove('collapsed');
    }
    // Set initial module name
    const moduleName = item.getAttribute('data-module');
    if (moduleName) {
        const moduleNameEl = document.getElementById('currentModuleName');
        if (moduleNameEl) {
            moduleNameEl.textContent = moduleName;
        }
    }
});
});

// Toast Notification Function
function showToast(message) {
    let toast = document.getElementById('supplierToast');
    if (!toast) {
        toast = document.createElement('div');
        toast.id = 'supplierToast';
        toast.style.cssText = `
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary-500);
            color: white;
            padding: 15px 25px;
            border-radius: var(--radius-md);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 10001;
            font-size: 14px;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 400px;
        `;
        document.body.appendChild(toast);
    }
    
    toast.textContent = message;
    toast.style.opacity = '1';
    
    setTimeout(() => {
        toast.style.opacity = '0';
    }, 3000);
}

// Accessibility Panel
function openAccessibilityPanel() {
    const existing = document.getElementById('accessibilityPanel');
    if (existing) {
        existing.remove();
        return;
    }

    const panelHtml = `
        <div id="accessibilityPanel" class="accessibility-panel open" role="dialog" aria-labelledby="a11y-title" aria-modal="true">
            <div class="accessibility-panel-header">
                <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                    <i class="pi pi-eye" style="color: var(--primary-500);"></i>
                    <span id="a11y-title" style="font-weight: 600;">Accessibility Options</span>
                </div>
                <button onclick="document.getElementById('accessibilityPanel').remove()" style="background: none; border: none; cursor: pointer;" aria-label="Close accessibility panel">
                    <i class="pi pi-times"></i>
                </button>
            </div>
            <div style="padding: var(--spacing-md);">
                <div class="accessibility-option">
                    <div>
                        <div style="font-weight: 500; font-size: 13px;">High Contrast</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Increase color contrast for better visibility</div>
                    </div>
                    <div class="accessibility-toggle ${document.body.classList.contains('high-contrast') ? 'active' : ''}" 
                         onclick="toggleAccessibility('high-contrast', this)"
                         role="switch"
                         aria-checked="${document.body.classList.contains('high-contrast')}"
                         tabindex="0"></div>
                </div>
                <div class="accessibility-option">
                    <div>
                        <div style="font-weight: 500; font-size: 13px;">Large Text</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Increase text size throughout the app</div>
                    </div>
                    <div class="accessibility-toggle ${document.body.classList.contains('large-text') ? 'active' : ''}" 
                         onclick="toggleAccessibility('large-text', this)"
                         role="switch"
                         aria-checked="${document.body.classList.contains('large-text')}"
                         tabindex="0"></div>
                </div>
                <div class="accessibility-option">
                    <div>
                        <div style="font-weight: 500; font-size: 13px;">Reduced Motion</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Minimize animations and transitions</div>
                    </div>
                    <div class="accessibility-toggle ${document.body.classList.contains('reduced-motion') ? 'active' : ''}" 
                         onclick="toggleAccessibility('reduced-motion', this)"
                         role="switch"
                         aria-checked="${document.body.classList.contains('reduced-motion')}"
                         tabindex="0"></div>
                </div>
                <div class="accessibility-option">
                    <div>
                        <div style="font-weight: 500; font-size: 13px;">Color Blind Mode</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Add patterns to color-coded elements</div>
                    </div>
                    <div class="accessibility-toggle ${document.body.classList.contains('colorblind-mode') ? 'active' : ''}" 
                         onclick="toggleAccessibility('colorblind-mode', this)"
                         role="switch"
                         aria-checked="${document.body.classList.contains('colorblind-mode')}"
                         tabindex="0"></div>
                </div>
                <div style="padding: var(--spacing-md); background: var(--info-50); border-radius: var(--radius-sm); margin-top: var(--spacing-sm);">
                    <div style="font-size: 11px; color: var(--info-400);">
                        <i class="pi pi-info-circle"></i> Settings are saved to your browser and will be remembered on your next visit.
                    </div>
                </div>
            </div>
        </div>
    `;
    document.body.insertAdjacentHTML('beforeend', panelHtml);
}

function toggleAccessibility(mode, element) {
    document.body.classList.toggle(mode);
    element.classList.toggle('active');
    element.setAttribute('aria-checked', element.classList.contains('active'));
    
    // Save to localStorage
    localStorage.setItem('a11y-' + mode, element.classList.contains('active'));
    
    showToast('✓ ' + mode.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase()) + (element.classList.contains('active') ? ' enabled' : ' disabled'));
}

// Language Selector
function openLanguageSelector() {
    const existing = document.getElementById('languagePanel');
    if (existing) {
        existing.remove();
        return;
    }

    const languages = [
        { code: 'EN', name: 'English', flag: '🇬🇧' },
        { code: 'FR', name: 'Français', flag: '🇫🇷' },
        { code: 'ES', name: 'Español', flag: '🇪🇸' },
        { code: 'AR', name: 'العربية', flag: '🇸🇦', rtl: true },
        { code: 'PT', name: 'Português', flag: '🇵🇹' },
        { code: 'RU', name: 'Русский', flag: '🇷🇺' }
    ];

    const panelHtml = `
        <div id="languagePanel" style="position: fixed; top: 70px; right: 200px; width: 220px; background: var(--surface-0); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); z-index: 10000; border: 1px solid var(--surface-200); animation: modalSlideIn 0.3s ease-out;" role="dialog" aria-label="Language selection">
            <div style="padding: var(--spacing-md); border-bottom: 1px solid var(--surface-200); display: flex; justify-content: space-between; align-items: center;">
                <span style="font-weight: 600; font-size: 13px;">🌐 Select Language</span>
                <button onclick="document.getElementById('languagePanel').remove()" style="background: none; border: none; cursor: pointer;" aria-label="Close">
                    <i class="pi pi-times"></i>
                </button>
            </div>
            <div style="padding: var(--spacing-sm);">
                ${languages.map(lang => `
                    <div onclick="selectLanguage('${lang.code}', '${lang.name}')" 
                         style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm); border-radius: var(--radius-sm); cursor: pointer; transition: background 0.2s;"
                         onmouseover="this.style.background='var(--primary-50)'"
                         onmouseout="this.style.background='transparent'"
                         role="button"
                         tabindex="0">
                        <span style="font-size: 18px;">${lang.flag}</span>
                        <span style="font-size: 13px; ${lang.rtl ? 'direction: rtl;' : ''}">${lang.name}</span>
                        ${lang.code === 'EN' ? '<i class="pi pi-check" style="margin-left: auto; color: var(--success-500);"></i>' : ''}
                    </div>
                `).join('')}
            </div>
            <div style="padding: var(--spacing-sm); background: var(--surface-50); border-top: 1px solid var(--surface-200); border-radius: 0 0 var(--radius-lg) var(--radius-lg);">
                <div style="font-size: 10px; color: var(--text-muted); text-align: center;">
                    🔄 Auto-detect based on browser settings
                </div>
            </div>
        </div>
    `;
    document.body.insertAdjacentHTML('beforeend', panelHtml);
}

function selectLanguage(code, name) {
    document.getElementById('currentLang').textContent = code;
    document.getElementById('languagePanel').remove();
    showToast('🌐 Language changed to ' + name);
}

// AI Assistant
function openAIAssistant() {
    const existing = document.getElementById('aiAssistantPanel');
    if (existing) {
        existing.remove();
        return;
    }

    const panelHtml = `
        <div id="aiAssistantPanel" style="position: fixed; top: 70px; right: 120px; width: 400px; max-height: 500px; background: var(--surface-0); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); z-index: 10000; border: 1px solid var(--surface-200); display: flex; flex-direction: column; animation: modalSlideIn 0.3s ease-out;" role="dialog" aria-labelledby="ai-title">
            <div style="padding: var(--spacing-lg); background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%); border-radius: var(--radius-lg) var(--radius-lg) 0 0; color: white;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                        <div style="width: 36px; height: 36px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <i class="pi pi-bolt" style="font-size: 18px;"></i>
                        </div>
                        <div>
                            <div id="ai-title" style="font-weight: 600; font-size: 14px;">AI Supplier Assistant</div>
                            <div style="font-size: 11px; opacity: 0.8;">Powered by UNOPS AI</div>
                        </div>
                    </div>
                    <button onclick="document.getElementById('aiAssistantPanel').remove()" style="background: rgba(255,255,255,0.2); border: none; width: 28px; height: 28px; border-radius: 50%; cursor: pointer; color: white;" aria-label="Close AI assistant">
                        <i class="pi pi-times"></i>
                    </button>
                </div>
            </div>
            <div style="flex: 1; padding: var(--spacing-md); overflow-y: auto; max-height: 300px;">
                <div style="background: var(--surface-50); padding: var(--spacing-md); border-radius: var(--radius-md); margin-bottom: var(--spacing-md);">
                    <div style="font-size: 12px; color: var(--text-primary);">
                        👋 Hello! I'm your AI assistant. I can help you with:
                    </div>
                    <ul style="margin: 8px 0 0 16px; padding: 0; font-size: 12px; color: var(--text-secondary);">
                        <li>Understanding tender requirements</li>
                        <li>Preparing your bid submission</li>
                        <li>Explaining procurement policies</li>
                        <li>Drafting clarification questions</li>
                    </ul>
                </div>
                <div style="display: grid; gap: var(--spacing-sm);">
                    <button onclick="askAI('How do I prepare my bid?')" style="text-align: left; padding: var(--spacing-sm); background: var(--primary-50); border: 1px solid var(--primary-200); border-radius: var(--radius-sm); cursor: pointer; font-size: 12px;">
                        💡 How do I prepare my bid?
                    </button>
                    <button onclick="askAI('What documents do I need?')" style="text-align: left; padding: var(--spacing-sm); background: var(--primary-50); border: 1px solid var(--primary-200); border-radius: var(--radius-sm); cursor: pointer; font-size: 12px;">
                        📋 What documents do I need?
                    </button>
                    <button onclick="askAI('Help me draft a clarification')" style="text-align: left; padding: var(--spacing-sm); background: var(--primary-50); border: 1px solid var(--primary-200); border-radius: var(--radius-sm); cursor: pointer; font-size: 12px;">
                        ✍️ Help me draft a clarification
                    </button>
                    <button onclick="askAI('Explain the submission process')" style="text-align: left; padding: var(--spacing-sm); background: var(--primary-50); border: 1px solid var(--primary-200); border-radius: var(--radius-sm); cursor: pointer; font-size: 12px;">
                        📝 Explain the submission process
                    </button>
                </div>
            </div>
            <div style="padding: var(--spacing-md); border-top: 1px solid var(--surface-200);">
                <div style="display: flex; gap: var(--spacing-sm);">
                    <input type="text" id="aiInput" placeholder="Ask me anything about tendering..." style="flex: 1; padding: var(--spacing-sm); border: 1px solid var(--surface-300); border-radius: var(--radius-sm); font-size: 12px;" aria-label="Ask AI a question">
                    <button onclick="askAI(document.getElementById('aiInput').value)" style="background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%); color: white; border: none; padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-sm); cursor: pointer;">
                        <i class="pi pi-send"></i>
                    </button>
                </div>
            </div>
        </div>
    `;
    document.body.insertAdjacentHTML('beforeend', panelHtml);
}

function askAI(question) {
    if (!question || !question.trim()) return;
    showToast('🤖 AI is thinking... (Feature coming soon)');
    const input = document.getElementById('aiInput');
    if (input) input.value = '';
}

// Help Center
function openHelpCenter() {
    const existing = document.getElementById('helpPanel');
    if (existing) {
        existing.remove();
        return;
    }

    const panelHtml = `
        <div id="helpPanel" style="position: fixed; top: 70px; right: 80px; width: 350px; background: var(--surface-0); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); z-index: 10000; border: 1px solid var(--surface-200); animation: modalSlideIn 0.3s ease-out;" role="dialog" aria-labelledby="help-title">
            <div style="padding: var(--spacing-lg); border-bottom: 1px solid var(--surface-200);">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                        <i class="pi pi-question-circle" style="font-size: 20px; color: var(--primary-500);"></i>
                        <span id="help-title" style="font-weight: 600;">Help Center</span>
                    </div>
                    <button onclick="document.getElementById('helpPanel').remove()" style="background: none; border: none; cursor: pointer;" aria-label="Close help">
                        <i class="pi pi-times"></i>
                    </button>
                </div>
                <input type="text" placeholder="Search help articles..." style="width: 100%; padding: var(--spacing-sm); border: 1px solid var(--surface-300); border-radius: var(--radius-sm); margin-top: var(--spacing-md); font-size: 13px;" aria-label="Search help">
            </div>
            <div style="padding: var(--spacing-md); max-height: 350px; overflow-y: auto;">
                <div style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; margin-bottom: var(--spacing-sm);">Quick Links</div>
                <div style="display: grid; gap: var(--spacing-sm);">
                    <a href="#" onclick="event.preventDefault(); showToast('📖 Opening Supplier Guide...')" style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm); background: var(--surface-50); border-radius: var(--radius-sm); text-decoration: none; color: var(--text-primary); font-size: 13px;">
                        <i class="pi pi-book" style="color: var(--primary-500);"></i>
                        <span>Supplier Guide</span>
                    </a>
                    <a href="#" onclick="event.preventDefault(); showToast('🎥 Opening video tutorials...')" style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm); background: var(--surface-50); border-radius: var(--radius-sm); text-decoration: none; color: var(--text-primary); font-size: 13px;">
                        <i class="pi pi-video" style="color: var(--success-500);"></i>
                        <span>Video Tutorials</span>
                    </a>
                    <a href="#" onclick="event.preventDefault(); showToast('❓ Opening FAQ...')" style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm); background: var(--surface-50); border-radius: var(--radius-sm); text-decoration: none; color: var(--text-primary); font-size: 13px;">
                        <i class="pi pi-list" style="color: var(--warning-500);"></i>
                        <span>Frequently Asked Questions</span>
                    </a>
                    <a href="#" onclick="event.preventDefault(); showToast('📧 Opening support contact...')" style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm); background: var(--surface-50); border-radius: var(--radius-sm); text-decoration: none; color: var(--text-primary); font-size: 13px;">
                        <i class="pi pi-envelope" style="color: var(--info-400);"></i>
                        <span>Contact Support</span>
                    </a>
                </div>
                <div style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; margin: var(--spacing-lg) 0 var(--spacing-sm) 0;">Popular Topics</div>
                <div style="display: flex; flex-wrap: wrap; gap: var(--spacing-xs);">
                    <span onclick="showToast('📋 Opening article...')" style="padding: 4px 10px; background: var(--primary-50); color: var(--primary-600); border-radius: var(--radius-sm); font-size: 11px; cursor: pointer;">Bid Submission</span>
                    <span onclick="showToast('📋 Opening article...')" style="padding: 4px 10px; background: var(--primary-50); color: var(--primary-600); border-radius: var(--radius-sm); font-size: 11px; cursor: pointer;">Documents Required</span>
                    <span onclick="showToast('📋 Opening article...')" style="padding: 4px 10px; background: var(--primary-50); color: var(--primary-600); border-radius: var(--radius-sm); font-size: 11px; cursor: pointer;">Clarifications</span>
                    <span onclick="showToast('📋 Opening article...')" style="padding: 4px 10px; background: var(--primary-50); color: var(--primary-600); border-radius: var(--radius-sm); font-size: 11px; cursor: pointer;">Pricing Forms</span>
                </div>
            </div>
        </div>
    `;
    document.body.insertAdjacentHTML('beforeend', panelHtml);
}

// Notifications Panel
function openNotificationsPanel() {
    const existing = document.getElementById('notificationsPanel');
    if (existing) {
        existing.remove();
        return;
    }

    const notifications = [
        { type: 'urgent', icon: '🔴', title: 'Submission deadline approaching', desc: 'UNOPS/ITB/2025/001 deadline in 5 days', time: '5 min ago' },
        { type: 'info', icon: '💬', title: 'Clarification response posted', desc: 'UNOPS answered your question about Form D', time: '1 hour ago' },
        { type: 'warning', icon: '📝', title: 'Amendment published', desc: 'UNOPS/ITB/2025/001 has been amended', time: '2 hours ago' },
        { type: 'success', icon: '✅', title: 'Bid submitted successfully', desc: 'Your bid for RFQ/2024/089 was received', time: '1 day ago' },
        { type: 'info', icon: '📋', title: 'New tender available', desc: 'IT Infrastructure Services - matches your profile', time: '2 days ago' },
        { type: 'success', icon: '🏆', title: 'Contract awarded', desc: 'Congratulations! You won RFQ/2024/089', time: '3 days ago' },
        { type: 'info', icon: '📨', title: 'Profile update reminder', desc: 'Some documents expire next month', time: 'Last week' }
    ];

    const panelHtml = `
        <div id="notificationsPanel" style="position: fixed; top: 70px; right: 20px; width: 380px; background: var(--surface-0); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); z-index: 10000; border: 1px solid var(--surface-200); animation: modalSlideIn 0.3s ease-out;" role="dialog" aria-labelledby="notif-title">
            <div style="padding: var(--spacing-lg); border-bottom: 1px solid var(--surface-200); display: flex; justify-content: space-between; align-items: center;">
                <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                    <i class="pi pi-bell" style="font-size: 18px; color: var(--primary-500);"></i>
                    <span id="notif-title" style="font-weight: 600;">Notifications</span>
                    <span style="background: var(--danger-500); color: white; font-size: 10px; padding: 2px 8px; border-radius: 10px; font-weight: 600;">7 new</span>
                </div>
                <button onclick="document.getElementById('notificationsPanel').remove()" style="background: none; border: none; cursor: pointer;" aria-label="Close notifications">
                    <i class="pi pi-times"></i>
                </button>
            </div>
            <div style="max-height: 400px; overflow-y: auto;">
                ${notifications.map((notif, i) => `
                    <div style="padding: var(--spacing-md); border-bottom: 1px solid var(--surface-100); cursor: pointer; transition: background 0.2s; ${i < 3 ? 'background: var(--primary-50);' : ''}"
                         onmouseover="this.style.background='var(--surface-50)'"
                         onmouseout="this.style.background='${i < 3 ? 'var(--primary-50)' : 'transparent'}'"
                         role="button"
                         tabindex="0">
                        <div style="display: flex; gap: var(--spacing-sm);">
                            <span style="font-size: 18px;">${notif.icon}</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 13px; color: var(--text-primary);">${notif.title}</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">${notif.desc}</div>
                                <div style="font-size: 10px; color: var(--text-muted); margin-top: 4px;">${notif.time}</div>
                            </div>
                            ${i < 3 ? '<div style="width: 8px; height: 8px; background: var(--primary-500); border-radius: 50%; flex-shrink: 0;"></div>' : ''}
                        </div>
                    </div>
                `).join('')}
            </div>
            <div style="padding: var(--spacing-md); border-top: 1px solid var(--surface-200); text-align: center;">
                <button onclick="showToast('📬 Viewing all notifications...'); document.getElementById('notificationsPanel').remove();" style="background: none; border: none; color: var(--primary-500); font-size: 13px; font-weight: 600; cursor: pointer;">
                    View All Notifications
                </button>
            </div>
        </div>
    `;
    document.body.insertAdjacentHTML('beforeend', panelHtml);
}

function attachMenuListeners() {
document.querySelectorAll('.menu-item[data-view]').forEach(item => {
item.addEventListener('click', function(e) {
e.preventDefault();
navigateToView(this.dataset.view);
});
});
}

function navigateToView(view) {
currentView = view;

// Show/hide quick actions based on view
const quickActions = document.getElementById('quick-actions');
if (quickActions) {
quickActions.style.display = view === 'bid-submission' ? 'flex' : 'none';
}


document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
document.querySelector(`[data-view="${view}"]`)?.classList.add('active');

document.querySelectorAll('.view-section').forEach(section => section.classList.remove('active'));
document.getElementById(`view-${view}`)?.classList.add('active');

window.scrollTo({ top: 0, behavior: 'smooth' });
}

function viewTenderDetails(ref) {
navigateToView('tender-details');
}

let currentTenderRef = 'UNOPS/ITB/2025/001';

function selectTenderForBid(ref) {
currentTenderRef = ref;
navigateToView('bid-submission');
// Initialize the enhanced supplier bid form
initSupplierBidForms();
// Update tender info and toggle Technical Bid content based on tender
updateBidViewForTender(ref);
}

function updateBidViewForTender(ref) {
    const bannerRef = document.querySelector('#view-bid-submission .tender-banner-ref');
    const bannerTitle = document.querySelector('#view-bid-submission .tender-banner-title');
    const techBidDefault = document.getElementById('technical-bid-default');
    const techBidSimplified = document.getElementById('technical-bid-simplified');
    
    if (ref === 'UNOPS/RFQ/2024/089') {
        // Update banner for RFQ
        if (bannerRef) bannerRef.textContent = '📋 Reference: UNOPS/RFQ/2024/089';
        if (bannerTitle) bannerTitle.textContent = 'Office Supplies and Stationery';
        // Show simplified Technical Bid, hide default
        if (techBidDefault) techBidDefault.style.display = 'none';
        if (techBidSimplified) techBidSimplified.style.display = 'block';
    } else {
        // Update banner for ITB
        if (bannerRef) bannerRef.textContent = '📋 Reference: UNOPS/ITB/2025/001';
        if (bannerTitle) bannerTitle.textContent = 'Supply and Delivery of Medical Equipment and Supplies';
        // Show default Technical Bid, hide simplified
        if (techBidDefault) techBidDefault.style.display = 'block';
        if (techBidSimplified) techBidSimplified.style.display = 'none';
    }
}

// =====================================================================
// ENHANCED SUPPLIER BID FORMS - PROGRESS TRACKER FUNCTIONALITY
// =====================================================================
let supplierCurrentSection = 'bidder-info';
let supplierCompletedSections = [];
let supplierPartnerCount = 0;

function initSupplierBidForms() {
    updateSupplierProgress();
}

function showSupplierSection(section) {
    // Hide all sections
    document.querySelectorAll('.supplier-section-card').forEach(card => {
        card.classList.remove('active');
    });

    // Show selected section
    const targetSection = document.getElementById('supplier-section-' + section);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    supplierCurrentSection = section;

    // Update progress steps
    document.querySelectorAll('.supplier-progress-step').forEach(step => {
        step.classList.remove('active');
    });
    
    const steps = ['bidder-info', 'technical-bid', 'financial-bid', 'qualification', 'compliance'];
    const stepIndex = steps.indexOf(section);
    const stepElements = document.querySelectorAll('.supplier-progress-step');
    if (stepElements[stepIndex]) {
        stepElements[stepIndex].classList.add('active');
    }

    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });

    updateSupplierProgress();
}

function nextSupplierSection(section) {
    if (!supplierCompletedSections.includes(supplierCurrentSection)) {
        supplierCompletedSections.push(supplierCurrentSection);
    }
    showSupplierSection(section);
}

function prevSupplierSection(section) {
    showSupplierSection(section);
}

function updateSupplierProgress() {
    const total = 5;
    const completed = supplierCompletedSections.length;
    const percentage = Math.round((completed / total) * 100);

    // Update main progress stats
    const percentEl = document.getElementById('supplierProgressPercent');
    const stepsEl = document.getElementById('supplierProgressSteps');
    if (percentEl) percentEl.textContent = percentage + '%';
    if (stepsEl) stepsEl.textContent = completed + '/' + total;

    const sections = ['bidder-info', 'technical-bid', 'financial-bid', 'qualification', 'other-forms', 'compliance'];
    const sectionNames = {
        'bidder-info': "Bidder's Information",
        'technical-bid': 'Technical Bid',
        'financial-bid': 'Financial Bid',
        'qualification': 'Qualifications & Eligibility',
        'other-forms': 'Other Forms',
        'compliance': 'Compliance & Declarations'
    };

    // Update step status
    document.querySelectorAll('.supplier-progress-step').forEach((step, index) => {
        const section = sections[index];
        const statusEl = step.querySelector('.supplier-step-status');

        if (supplierCompletedSections.includes(section)) {
            step.classList.add('completed');
            step.classList.remove('in-progress', 'active');
            if (statusEl) statusEl.textContent = 'Completed';
        } else if (section === supplierCurrentSection) {
            step.classList.add('active');
            step.classList.remove('completed', 'in-progress');
            if (statusEl) statusEl.textContent = 'In progress';
        } else {
            step.classList.remove('completed', 'active', 'in-progress');
            if (statusEl) statusEl.textContent = 'Not started';
        }
    });
}

// Toggle Consortium Section
function toggleSupplierConsortium() {
    const isSingle = document.getElementById('supplierSingle').checked;
    const singleSection = document.getElementById('supplierSingleCompanySection');
    const consortiumSection = document.getElementById('supplierConsortiumSection');
    
    if (singleSection) singleSection.style.display = isSingle ? 'block' : 'none';
    if (consortiumSection) consortiumSection.style.display = isSingle ? 'none' : 'block';

    if (!isSingle && supplierPartnerCount === 0) {
        addSupplierPartner();
    }
}

// Toggle Bidding For Selection - handles partial bidding reason visibility
function toggleBiddingForSelection(clickedElement) {
    const entireTender = document.getElementById('biddingForEntireTender');
    const lot1 = document.getElementById('biddingForLot1');
    const lot2 = document.getElementById('biddingForLot2');
    const reasonContainer = document.getElementById('notBiddingAllReason');
    
    // Determine what was clicked
    const clickedEntireTender = clickedElement && clickedElement.id === 'biddingForEntireTender';
    const clickedLot = clickedElement && (clickedElement.id === 'biddingForLot1' || clickedElement.id === 'biddingForLot2');
    
    // If Entire Tender was clicked, uncheck individual lots
    if (clickedEntireTender) {
        if (lot1) lot1.checked = false;
        if (lot2) lot2.checked = false;
        entireTender.parentElement.style.border = '1px solid var(--surface-400)';
        entireTender.parentElement.style.background = 'var(--surface-50)';
        // Reset lot styling
        if (lot1) {
            lot1.parentElement.style.border = '1px solid var(--surface-300)';
            lot1.parentElement.style.background = 'white';
        }
        if (lot2) {
            lot2.parentElement.style.border = '1px solid var(--surface-300)';
            lot2.parentElement.style.background = 'white';
        }
    }
    
    // If a lot was clicked, uncheck Entire Tender
    if (clickedLot) {
        if (entireTender) {
            entireTender.checked = false;
            entireTender.parentElement.style.border = '1px solid var(--surface-300)';
            entireTender.parentElement.style.background = 'white';
        }
        // Update lot checkbox styling
        if (lot1) {
            if (lot1.checked) {
                lot1.parentElement.style.border = '1px solid var(--surface-400)';
                lot1.parentElement.style.background = 'var(--surface-50)';
            } else {
                lot1.parentElement.style.border = '1px solid var(--surface-300)';
                lot1.parentElement.style.background = 'white';
            }
        }
        if (lot2) {
            if (lot2.checked) {
                lot2.parentElement.style.border = '1px solid var(--surface-400)';
                lot2.parentElement.style.background = 'var(--surface-50)';
            } else {
                lot2.parentElement.style.border = '1px solid var(--surface-300)';
                lot2.parentElement.style.background = 'white';
            }
        }
    }
    
    // Determine current state for reason display
    const isFullBid = entireTender && entireTender.checked;
    const lot1Checked = lot1 && lot1.checked;
    const lot2Checked = lot2 && lot2.checked;
    
    // Show reason if only one lot is selected (partial bid)
    const isPartialBid = !isFullBid && (lot1Checked || lot2Checked) && !(lot1Checked && lot2Checked);
    if (reasonContainer) {
        reasonContainer.style.display = isPartialBid ? 'block' : 'none';
    }
}

// Handle "Other" reason selection
document.addEventListener('DOMContentLoaded', function() {
    const reasonSelect = document.getElementById('notBiddingReasonSelect');
    const otherReasonContainer = document.getElementById('otherReasonContainer');
    
    if (reasonSelect) {
        reasonSelect.addEventListener('change', function() {
            if (otherReasonContainer) {
                otherReasonContainer.style.display = this.value === 'other' ? 'block' : 'none';
            }
        });
    }
});

// ========== GLOBAL ALTERNATE OFFER FUNCTIONALITY ==========
let globalAlternateOfferCount = 0;
let activeOffer = { technical: 'main', financial: 'main' };

function addGlobalAlternateOffer() {
    globalAlternateOfferCount++;
    const offerId = `alt-${globalAlternateOfferCount}`;
    
    // Add tab to Technical Bid
    addOfferTab('technical', offerId, globalAlternateOfferCount);
    
    // Add tab to Financial Bid  
    addOfferTab('financial', offerId, globalAlternateOfferCount);
    
    // Clone and add content panel to Technical Bid
    createAlternateOfferPanel('technical', offerId, globalAlternateOfferCount);
    
    // Clone and add content panel to Financial Bid
    createAlternateOfferPanel('financial', offerId, globalAlternateOfferCount);
    
    // Switch to the new alternate offer
    switchOffer('technical', offerId);
    switchOffer('financial', offerId);
    
    // Show success notification
    showOfferNotification(`Alternate Offer #${globalAlternateOfferCount} created! You can now provide alternate specifications and pricing.`);
}

function addOfferTab(section, offerId, offerNumber) {
    const tabsContainer = document.getElementById(`${section}-alternate-tabs`);
    if (!tabsContainer) return;
    
    const tab = document.createElement('div');
    tab.className = 'offer-tab alternate-offer';
    tab.id = `${section}-tab-${offerId}`;
    tab.setAttribute('data-offer-id', offerId);
    tab.innerHTML = `
        <i class="pi pi-bookmark"></i>
        <span>Alt Offer ${offerNumber}</span>
        <span class="offer-tab-remove" onclick="event.stopPropagation(); removeGlobalAlternateOffer('${offerId}')" title="Remove this alternate offer">
            <i class="pi pi-times" style="font-size: 10px;"></i>
        </span>
    `;
    tab.onclick = function(e) {
        if (!e.target.closest('.offer-tab-remove')) {
            switchOffer(section, offerId);
        }
    };
    tabsContainer.appendChild(tab);
}

function createAlternateOfferPanel(section, offerId, offerNumber) {
    const panelsContainer = document.getElementById(`${section}-alternate-panels`);
    const mainPanel = document.getElementById(`${section}-offer-main`);
    if (!panelsContainer || !mainPanel) return;
    
    // Clone the main panel content
    const newPanel = document.createElement('div');
    newPanel.className = 'offer-content-panel';
    newPanel.id = `${section}-offer-${offerId}`;
    newPanel.setAttribute('data-offer-id', offerId);
    
    // Add alternate offer banner
    const banner = `
        <div class="alternate-offer-banner">
            <span class="alternate-offer-banner-icon">📑</span>
            <div class="alternate-offer-banner-content">
                <div class="alternate-offer-banner-title">Alternate Offer #${offerNumber}</div>
                <div class="alternate-offer-banner-desc">Provide alternative ${section === 'technical' ? 'specifications and technical details' : 'pricing and financial terms'} for this offer. All fields must be completed separately from your main offer.</div>
            </div>
        </div>
    `;
    
    // Clone the main panel's inner HTML and update IDs to make them unique
    let clonedContent = mainPanel.innerHTML;
    
    // Make all IDs unique for this alternate offer
    clonedContent = clonedContent.replace(/id="([^"]+)"/g, (match, id) => {
        // Don't modify certain container IDs
        if (id.includes('alternate-panels') || id.includes('alternate-tabs')) {
            return match;
        }
        return `id="${id}-${offerId}"`;
    });
    
    // Update data attributes and names to be unique
    clonedContent = clonedContent.replace(/name="([^"]+)"/g, `name="$1-${offerId}"`);
    
    newPanel.innerHTML = banner + clonedContent;
    
    // Clear all input values in the cloned panel
    panelsContainer.appendChild(newPanel);
    
    // Clear form values in the new panel
    const inputs = newPanel.querySelectorAll('input[type="text"], input[type="number"], input[type="email"], input[type="tel"], textarea');
    inputs.forEach(input => {
        if (!input.classList.contains('prefilled') && !input.readOnly) {
            input.value = '';
        }
    });
    
    // Reset all select elements to first option (except prefilled)
    const selects = newPanel.querySelectorAll('select:not(.prefilled)');
    selects.forEach(select => {
        select.selectedIndex = 0;
    });
    
    // Reset all checkboxes and radios
    const checkboxes = newPanel.querySelectorAll('input[type="checkbox"]:not([disabled])');
    checkboxes.forEach(cb => cb.checked = false);
    
    // Reset calculated fields
    const calculatedFields = newPanel.querySelectorAll('.calculated, .row-total');
    calculatedFields.forEach(field => {
        if (field.tagName === 'INPUT') {
            field.value = '0.00';
        } else {
            field.textContent = '0.00';
        }
    });
}

function switchOffer(section, offerId) {
    // Update active offer tracking
    activeOffer[section] = offerId;
    
    // Update tab styling
    const allTabs = document.querySelectorAll(`#${section}-bid-offer-tabs .offer-tab, #${section}-alternate-tabs .offer-tab`);
    allTabs.forEach(tab => {
        if (tab.getAttribute('data-offer-id') === offerId) {
            tab.classList.add('active');
        } else {
            tab.classList.remove('active');
        }
    });
    
    // Also check main offer tab
    const mainTab = document.querySelector(`#${section}-bid-offer-tabs .offer-tab.main-offer`);
    if (mainTab) {
        if (offerId === 'main') {
            mainTab.classList.add('active');
        } else {
            mainTab.classList.remove('active');
        }
    }
    
    // Show/hide panels
    const allPanels = document.querySelectorAll(`#${section}-offer-content-wrapper .offer-content-panel`);
    allPanels.forEach(panel => {
        if (panel.getAttribute('data-offer-id') === offerId) {
            panel.classList.add('active');
        } else {
            panel.classList.remove('active');
        }
    });
}

function removeGlobalAlternateOffer(offerId) {
    if (!confirm(`Are you sure you want to remove this alternate offer?\n\nAll data entered for this alternate offer will be lost.`)) {
        return;
    }
    
    // Remove tabs from both sections
    ['technical', 'financial'].forEach(section => {
        const tab = document.getElementById(`${section}-tab-${offerId}`);
        if (tab) tab.remove();
        
        const panel = document.getElementById(`${section}-offer-${offerId}`);
        if (panel) panel.remove();
        
        // If this was the active offer, switch back to main
        if (activeOffer[section] === offerId) {
            switchOffer(section, 'main');
        }
    });
    
    showOfferNotification('Alternate offer removed successfully.');
}

function showOfferNotification(message) {
    // Create notification element
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: linear-gradient(135deg, var(--success-500) 0%, #388e3c 100%);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        z-index: 10000;
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 13px;
        font-weight: 500;
        animation: slideInRight 0.3s ease;
    `;
    notification.innerHTML = `<i class="pi pi-check-circle"></i> ${message}`;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3500);
}

// Sync offer tabs between Technical and Financial sections when navigating
function syncOfferSelection() {
    const currentSection = supplierCurrentSection;
    if (currentSection === 'technical-bid' || currentSection === 'financial-bid') {
        const otherSection = currentSection === 'technical-bid' ? 'financial' : 'technical';
        const currentSectionKey = currentSection === 'technical-bid' ? 'technical' : 'financial';
        
        // Sync the active offer between sections
        if (activeOffer[currentSectionKey] !== activeOffer[otherSection]) {
            // Optionally sync them
        }
    }
}

// Legacy functions kept for backward compatibility
let alternateOfferCounters = {};

// Subcontractor Management Functions
function addSubcontractor(buttonElement) {
    const subcontractorsSection = buttonElement.closest('.subcontractors-section');
    const subcontractorsList = subcontractorsSection.querySelector('.subcontractors-list');
    const existingEntries = subcontractorsList.querySelectorAll('.subcontractor-entry');
    const newNumber = existingEntries.length + 1;
    
    const newEntry = document.createElement('div');
    newEntry.className = 'subcontractor-entry';
    newEntry.style.cssText = 'background: var(--surface-0); padding: var(--spacing-xs); border-radius: var(--radius-sm); border: 1px solid var(--surface-200); margin-bottom: var(--spacing-xs);';
    
    newEntry.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xs);">
            <span style="font-size: 10px; font-weight: 600; color: var(--primary-600);"><i class="pi pi-user" style="margin-right: 4px;"></i> Subcontractor ${newNumber}</span>
            <button type="button" class="btn btn-ghost btn-sm" onclick="removeSubcontractor(this)" style="padding: 2px 6px; font-size: 9px; color: var(--danger-500);" title="Remove">
                <i class="pi pi-trash" style="font-size: 10px;"></i>
            </button>
        </div>
        <div class="supplier-form-grid cols-3" style="gap: var(--spacing-xs);">
            <div class="supplier-form-field" style="margin-bottom: 0;">
                <label style="font-size: 10px;"><i class="pi pi-building"></i> Company Name</label>
                <input type="text" placeholder="Subcontractor company name" style="font-size: 11px; padding: 6px 8px;">
            </div>
            <div class="supplier-form-field" style="margin-bottom: 0;">
                <label style="font-size: 10px;"><i class="pi pi-phone"></i> Contact</label>
                <input type="text" placeholder="Phone / Email" style="font-size: 11px; padding: 6px 8px;">
            </div>
            <div class="supplier-form-field" style="margin-bottom: 0;">
                <label style="font-size: 10px;"><i class="pi pi-map-marker"></i> Address</label>
                <input type="text" placeholder="Full address" style="font-size: 11px; padding: 6px 8px;">
            </div>
        </div>
    `;
    
    subcontractorsList.appendChild(newEntry);
    renumberSubcontractors(subcontractorsList);
}

function removeSubcontractor(buttonElement) {
    const entry = buttonElement.closest('.subcontractor-entry');
    const subcontractorsList = entry.parentElement;
    entry.remove();
    renumberSubcontractors(subcontractorsList);
}

function renumberSubcontractors(subcontractorsList) {
    const entries = subcontractorsList.querySelectorAll('.subcontractor-entry');
    entries.forEach((entry, index) => {
        const label = entry.querySelector('span[style*="font-weight: 600"]');
        if (label) {
            label.innerHTML = `<i class="pi pi-user" style="margin-right: 4px;"></i> Subcontractor ${index + 1}`;
        }
    });
}

// Discount Management Functions
function addDiscountRow() {
    const tbody = document.getElementById('discounts-tbody');
    if (!tbody) return;
    
    const rowCount = tbody.querySelectorAll('tr').length + 1;
    
    const newRow = document.createElement('tr');
    newRow.innerHTML = `
        <td style="font-weight: 600;">${rowCount}</td>
        <td>
            <select style="width: 100%; font-size: 12px; padding: 6px;">
                <option value="">Select type...</option>
                <option value="volume">Volume Discount</option>
                <option value="early-payment">Early Payment Discount</option>
                <option value="bundle">Bundle Discount</option>
                <option value="loyalty">Loyalty Discount</option>
                <option value="seasonal">Seasonal Discount</option>
                <option value="other">Other</option>
            </select>
        </td>
        <td><textarea placeholder="Describe discount terms and methodology" rows="2" style="font-size: 12px;"></textarea></td>
        <td>
            <select style="width: 100%; font-size: 12px; padding: 6px;">
                <option value="all">All Lots</option>
                <option value="lot1">Lot 1</option>
                <option value="lot2">Lot 2</option>
                <option value="goods">Goods Only</option>
                <option value="services">Services Only</option>
            </select>
        </td>
        <td><input type="number" placeholder="0" step="0.1" min="0" max="100" style="font-size: 12px;"></td>
        <td><input type="number" placeholder="0.00" step="0.01" min="0" style="font-size: 12px;"></td>
        <td style="text-align: center;">
            <button class="btn btn-ghost btn-sm" onclick="removeDiscountRow(this)" style="padding: 4px; color: var(--danger-500);">
                <i class="pi pi-trash" style="font-size: 11px;"></i>
            </button>
        </td>
    `;
    
    tbody.appendChild(newRow);
    renumberDiscountRows();
}

function removeDiscountRow(buttonElement) {
    const row = buttonElement.closest('tr');
    const tbody = row.parentElement;
    row.remove();
    renumberDiscountRows();
}

function renumberDiscountRows() {
    const tbody = document.getElementById('discounts-tbody');
    if (!tbody) return;
    
    const rows = tbody.querySelectorAll('tr');
    rows.forEach((row, index) => {
        const firstCell = row.querySelector('td:first-child');
        if (firstCell) {
            firstCell.textContent = index + 1;
        }
    });
}

// Lot Breakdown Toggle Function
function toggleLotBreakdown() {
    const content = document.getElementById('lot-breakdown-content');
    const arrow = document.getElementById('lot-breakdown-arrow');
    
    if (content.style.display === 'none') {
        content.style.display = 'block';
        arrow.style.transform = 'rotate(180deg)';
    } else {
        content.style.display = 'none';
        arrow.style.transform = 'rotate(0deg)';
    }
}

// Update Bid Currency for the current offer panel
function updateBidCurrency(selectElement) {
    const panel = selectElement.closest('.offer-content-panel');
    const currency = selectElement.value;
    
    // Update all total displays in this panel to show the new currency
    if (panel) {
        const totalDisplays = panel.querySelectorAll('.total-display');
        totalDisplays.forEach(display => {
            const currentText = display.textContent;
            const numericValue = currentText.replace(/[^0-9.-]/g, '') || '0.00';
            display.textContent = currency + ' ' + parseFloat(numericValue).toFixed(2);
        });
        
        // Update calculated cells in tables
        const calculatedCells = panel.querySelectorAll('.calculated');
        calculatedCells.forEach(cell => {
            if (cell.textContent.trim() !== '' && !isNaN(parseFloat(cell.textContent.replace(/[^0-9.-]/g, '')))) {
                const numericValue = cell.textContent.replace(/[^0-9.-]/g, '') || '0.00';
                // Only update if it looks like a currency value
                if (cell.textContent.match(/^[A-Z]{3}\s/)) {
                    cell.textContent = currency + ' ' + parseFloat(numericValue).toFixed(2);
                }
            }
        });
    }
    
    // Recalculate to update currency displays
    calculateFinancialBid();
}

// Financial Bid Calculation Functions
function calculateFinancialBid() {
    // Get current selected currency from the active panel
    const activePanel = document.querySelector('#financial-offer-content-wrapper .offer-content-panel.active');
    const currencySelect = activePanel ? activePanel.querySelector('.bid-currency-select') : null;
    const currency = currencySelect ? currencySelect.value : 'USD';
    
    // Initialize lot totals
    let lot1Goods = { fca: 0, cpt: 0, dpu: 0 };
    let lot2Goods = { fca: 0, cpt: 0, dpu: 0 };
    
    // Get all goods rows using data-lot attribute (within active panel if exists)
    const container = activePanel || document;
    const goodsRows = container.querySelectorAll('#prices-for-goods-tbody tr[data-lot], [id^="prices-for-goods-tbody"] tr[data-lot]');
    
    goodsRows.forEach(row => {
        const lot = row.getAttribute('data-lot');
        const qtyCell = row.querySelector('.qty-cell');
        const qty = parseFloat(qtyCell ? qtyCell.textContent.trim() : 0) || 0;
        
        const fcaInput = row.querySelector('.price-fca');
        const cptInput = row.querySelector('.price-cpt');
        const dpuInput = row.querySelector('.price-dpu');
        
        const fcaUnit = parseFloat(fcaInput ? fcaInput.value : 0) || 0;
        const cptUnit = parseFloat(cptInput ? cptInput.value : 0) || 0;
        const dpuUnit = parseFloat(dpuInput ? dpuInput.value : 0) || 0;
        
        const fca = fcaUnit * qty;
        const cpt = cptUnit * qty;
        const dpu = dpuUnit * qty;
        
        // Update row total (using FCA as default)
        const totalCell = row.querySelector('.row-total');
        if (totalCell) {
            totalCell.textContent = fca.toFixed(2);
        }
        
        if (lot === 'lot1') {
            lot1Goods.fca += fca;
            lot1Goods.cpt += cpt;
            lot1Goods.dpu += dpu;
        } else if (lot === 'lot2') {
            lot2Goods.fca += fca;
            lot2Goods.cpt += cpt;
            lot2Goods.dpu += dpu;
        }
    });
    
    // Calculate services by lot using data-apply-to attribute
    let lot1Services = 0;
    let lot2Services = 0;
    let totalServices = 0;
    
    const serviceRows = container.querySelectorAll('#services-tbody tr[data-apply-to], [id^="services-tbody"] tr[data-apply-to]');
    serviceRows.forEach(row => {
        const applyTo = row.getAttribute('data-apply-to');
        const priceInput = row.querySelector('input[type="number"]');
        const price = parseFloat(priceInput ? priceInput.value : 0) || 0;
        
        // Update row total
        const totalCell = row.querySelector('.calculated');
        if (totalCell) {
            totalCell.textContent = price.toFixed(2);
        }
        
        totalServices += price;
        
        if (applyTo === 'all') {
            // Split equally between lots
            lot1Services += price / 2;
            lot2Services += price / 2;
        } else if (applyTo === 'lot1') {
            lot1Services += price;
        } else if (applyTo === 'lot2') {
            lot2Services += price;
        }
    });
    
    // Update services total
    updateElementTextInPanel(activePanel, 'services-total', totalServices.toFixed(2));
    
    // Calculate lot totals
    const lot1Total = lot1Goods.fca + lot1Services;
    const lot2Total = lot2Goods.fca + lot2Services;
    const grandGoods = lot1Goods.fca + lot2Goods.fca;
    const grandServices = lot1Services + lot2Services;
    const grandTotal = grandGoods + grandServices;
    
    // Update lot breakdown table (within active panel)
    updateElementTextInPanel(activePanel, 'lot1-goods', currency + ' ' + lot1Goods.fca.toFixed(2));
    updateElementTextInPanel(activePanel, 'lot1-services', currency + ' ' + lot1Services.toFixed(2));
    updateElementTextInPanel(activePanel, 'lot1-total', currency + ' ' + lot1Total.toFixed(2));
    
    updateElementTextInPanel(activePanel, 'lot2-goods', currency + ' ' + lot2Goods.fca.toFixed(2));
    updateElementTextInPanel(activePanel, 'lot2-services', currency + ' ' + lot2Services.toFixed(2));
    updateElementTextInPanel(activePanel, 'lot2-total', currency + ' ' + lot2Total.toFixed(2));
    
    updateElementTextInPanel(activePanel, 'grand-goods', currency + ' ' + grandGoods.toFixed(2));
    updateElementTextInPanel(activePanel, 'grand-services', currency + ' ' + grandServices.toFixed(2));
    updateElementTextInPanel(activePanel, 'grand-total', currency + ' ' + grandTotal.toFixed(2));
    
    // Update main bid summary totals
    updateElementTextInPanel(activePanel, 'total-fca', currency + ' ' + (lot1Goods.fca + lot2Goods.fca + totalServices).toFixed(2));
    updateElementTextInPanel(activePanel, 'total-cpt', currency + ' ' + (lot1Goods.cpt + lot2Goods.cpt + totalServices).toFixed(2));
    updateElementTextInPanel(activePanel, 'total-dpu', currency + ' ' + (lot1Goods.dpu + lot2Goods.dpu + totalServices).toFixed(2));
}

function updateElementTextInPanel(panel, id, text) {
    // Try to find element within panel first, then fallback to document
    let el = panel ? panel.querySelector('#' + id) || panel.querySelector('[id$="-' + id + '"]') : null;
    if (!el) el = document.getElementById(id);
    if (el) el.textContent = text;
}

function updateElementText(id, text) {
    const el = document.getElementById(id);
    if (el) el.textContent = text;
}

// Initialize event listeners for financial inputs
function initFinancialBidListeners() {
    // Listen for input changes in goods table
    const goodsTable = document.getElementById('prices-for-goods-table');
    if (goodsTable) {
        goodsTable.addEventListener('input', function(e) {
            if (e.target.tagName === 'INPUT' && e.target.type === 'number') {
                calculateFinancialBid();
            }
        });
    }
    
    // Listen for input changes in all tables (services, etc.)
    document.querySelectorAll('.supplier-smart-table').forEach(table => {
        table.addEventListener('input', function(e) {
            if (e.target.tagName === 'INPUT' && e.target.type === 'number') {
                calculateFinancialBid();
            }
        });
    });
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    initFinancialBidListeners();
});

function addAlternateOffer(buttonElement, productId, productName) {
    // Initialize counter for this product if not exists
    if (!alternateOfferCounters[productId]) {
        alternateOfferCounters[productId] = 0;
    }
    alternateOfferCounters[productId]++;
    const alternateNumber = alternateOfferCounters[productId];
    
    // Create the alternate offer section in Technical Bid
    createAlternateTechnicalSection(productId, productName, alternateNumber);
    
    // Add row to Financial Bid prices table
    addAlternateFinancialRow(productId, productName, alternateNumber);
}

function createAlternateTechnicalSection(productId, productName, alternateNumber) {
    const container = document.getElementById(`alternate-offers-container-${productId}`);
    if (!container) return;
    
    const uniqueId = `${productId}-alt-${alternateNumber}`;
    
    const alternateSection = document.createElement('div');
    alternateSection.className = 'alternate-offer-section';
    alternateSection.id = `alternate-section-${uniqueId}`;
    alternateSection.setAttribute('data-product-id', productId);
    alternateSection.setAttribute('data-alternate-number', alternateNumber);
    alternateSection.style.cssText = 'background: linear-gradient(135deg, var(--warning-50, #fff8e1) 0%, var(--surface-50) 100%); padding: var(--spacing-sm); border-radius: var(--radius-sm); margin-bottom: var(--spacing-sm); border: 2px solid var(--warning-300, #ffcc80);';
    
    alternateSection.innerHTML = `
        <div style="font-weight: 600; margin-bottom: var(--spacing-sm); color: var(--warning-700, #f57c00); background: var(--warning-100, #ffe0b2); padding: var(--spacing-xs) var(--spacing-sm); border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: space-between; font-size: 12px;">
          <div style="display: flex; align-items: center; gap: 6px;">
            <i class="pi pi-bookmark" style="font-size: 11px;"></i> 
            <span style="background: var(--warning-500, #ff9800); color: white; padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 700;">ALTERNATE OFFER #${alternateNumber}</span>
            UNSPSC Code: ${productId} - ${productName}
          </div>
          <button type="button" class="btn btn-ghost" onclick="removeAlternateOffer('${uniqueId}', '${productId}')" style="padding: 4px 8px; font-size: 11px; color: var(--danger-500); display: flex; align-items: center; gap: 4px;">
            <i class="pi pi-trash" style="font-size: 10px;"></i> Remove
          </button>
        </div>

        <div class="supplier-form-grid">
          <div class="supplier-form-field">
            <label><i class="pi pi-box"></i> Model / Product Name <span style="color: var(--danger-500);">*</span></label>
            <input type="text" placeholder="Enter alternate model name">
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-globe"></i> Country of Origin <span style="color: var(--danger-500);">*</span></label>
            <input type="text" placeholder="Manufacturing country">
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-building"></i> Manufacturer <span style="color: var(--danger-500);">*</span></label>
            <div style="display: flex; gap: 8px;">
              <input type="text" placeholder="Manufacturer name" style="flex: 1;">
              <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;"><i class="pi pi-search"></i></button>
            </div>
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-verified"></i> Manufacturer UNGM ID <span style="color: var(--text-muted); font-weight: 400;">(if available)</span></label>
            <input type="text" placeholder="UNGM-XXXXXX">
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-map-marker"></i> Manufacturer Address</label>
            <textarea placeholder="Full address" rows="2"></textarea>
          </div>

          <div class="supplier-form-field">
            <label><i class="pi pi-link"></i> Product Documentation URL</label>
            <input type="url" placeholder="https://manufacturer.com/product-specs">
          </div>
        </div>

        <!-- Subcontractors Section for Alternate -->
        <div class="subcontractors-section" style="margin-top: var(--spacing-md); padding: var(--spacing-sm); background: var(--surface-100); border-radius: var(--radius-sm); border: 1px dashed var(--surface-300);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--spacing-sm);">
            <div style="font-weight: 600; font-size: 12px; color: var(--text-secondary); display: flex; align-items: center; gap: 6px;">
              <i class="pi pi-users" style="font-size: 11px;"></i> Subcontractors <span style="font-weight: 400; color: var(--text-muted);">(if applicable)</span>
            </div>
            <button type="button" class="btn btn-secondary btn-sm" onclick="addSubcontractor(this)" style="padding: 4px 10px; font-size: 10px; display: flex; align-items: center; gap: 4px;">
              <i class="pi pi-plus" style="font-size: 9px;"></i> Add Subcontractor
            </button>
          </div>
          <div class="subcontractors-list">
            <div class="subcontractor-entry" style="background: var(--surface-0); padding: var(--spacing-xs); border-radius: var(--radius-sm); border: 1px solid var(--surface-200); margin-bottom: var(--spacing-xs);">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xs);">
                <span style="font-size: 10px; font-weight: 600; color: var(--primary-600);"><i class="pi pi-user" style="margin-right: 4px;"></i> Subcontractor 1</span>
                <button type="button" class="btn btn-ghost btn-sm" onclick="removeSubcontractor(this)" style="padding: 2px 6px; font-size: 9px; color: var(--danger-500);" title="Remove">
                  <i class="pi pi-trash" style="font-size: 10px;"></i>
                </button>
              </div>
              <div class="supplier-form-grid cols-3" style="gap: var(--spacing-xs);">
                <div class="supplier-form-field" style="margin-bottom: 0;">
                  <label style="font-size: 10px;"><i class="pi pi-building"></i> Company Name</label>
                  <input type="text" placeholder="Subcontractor company name" style="font-size: 11px; padding: 6px 8px;">
                </div>
                <div class="supplier-form-field" style="margin-bottom: 0;">
                  <label style="font-size: 10px;"><i class="pi pi-phone"></i> Contact</label>
                  <input type="text" placeholder="Phone / Email" style="font-size: 11px; padding: 6px 8px;">
                </div>
                <div class="supplier-form-field" style="margin-bottom: 0;">
                  <label style="font-size: 10px;"><i class="pi pi-map-marker"></i> Address</label>
                  <input type="text" placeholder="Full address" style="font-size: 11px; padding: 6px 8px;">
                </div>
              </div>
            </div>
          </div>
          <div style="font-size: 9px; color: var(--text-muted); margin-top: var(--spacing-xs);">
            <i class="pi pi-info-circle" style="margin-right: 4px;"></i> List any subcontractors that will be involved in fulfilling this product/service.
          </div>
        </div>

        <!-- Specification Compliance Table for Alternate -->
        <div class="supplier-subsection-header" style="margin-top: var(--spacing-lg);">
          <strong><i class="pi pi-list"></i> Specification Compliance (Alternate Offer)</strong>
        </div>

        <table class="supplier-smart-table">
          <thead>
            <tr>
              <th style="width: 5%;">#</th>
              <th style="width: 35%;">Item Specification (UNOPS Requirements)</th>
              <th style="width: 15%;">Is quotation compliant?</th>
              <th>Details of goods offered</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="text-align: center; font-weight: 600;">1</td>
              <td class="prefilled">Portable ultrasound system with color Doppler capability</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec1_${uniqueId}"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec1_${uniqueId}"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your alternate product's specifications" rows="2"></textarea></td>
            </tr>
            <tr>
              <td style="text-align: center; font-weight: 600;">2</td>
              <td class="prefilled">15" or larger high-resolution LED display, minimum 1920x1080 pixels</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec2_${uniqueId}"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec2_${uniqueId}"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your alternate product's specifications" rows="2"></textarea></td>
            </tr>
            <tr>
              <td style="text-align: center; font-weight: 600;">3</td>
              <td class="prefilled">Minimum 3 probe connectors with simultaneous probe operation capability</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec3_${uniqueId}"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec3_${uniqueId}"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your alternate product's specifications" rows="2"></textarea></td>
            </tr>
            <tr>
              <td style="text-align: center; font-weight: 600;">4</td>
              <td class="prefilled">Built-in battery with minimum 60 minutes operation time</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec4_${uniqueId}"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec4_${uniqueId}"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your alternate product's specifications" rows="2"></textarea></td>
            </tr>
            <tr>
              <td style="text-align: center; font-weight: 600;">5</td>
              <td class="prefilled">CE and/or FDA approved medical device certification</td>
              <td>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec5_${uniqueId}"> Yes</label>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;"><input type="radio" name="altTechSpec5_${uniqueId}"> No</label>
                </div>
              </td>
              <td><textarea placeholder="Describe your alternate product's specifications" rows="2"></textarea></td>
            </tr>
          </tbody>
        </table>

        <div class="supplier-form-field" style="margin-top: var(--spacing-lg);">
          <label><i class="pi pi-exclamation-circle" style="color: var(--warning-500);"></i> Any Deviations from Requirements? (Alternate Offer)</label>
          <textarea placeholder="List any deviations or alternative specifications offered for this alternate product" rows="3"></textarea>
        </div>
        
        <div class="supplier-form-field" style="margin-top: var(--spacing-sm);">
          <label><i class="pi pi-info-circle" style="color: var(--info-500);"></i> Justification for Alternate Offer</label>
          <textarea placeholder="Explain why this alternate offer should be considered (e.g., better value, enhanced features, improved delivery)" rows="2"></textarea>
        </div>
    `;
    
    container.appendChild(alternateSection);
}

function addAlternateFinancialRow(productId, productName, alternateNumber) {
    const tbody = document.getElementById('prices-for-goods-tbody');
    const totalRow = document.getElementById('prices-for-goods-total-row');
    if (!tbody || !totalRow) return;
    
    const uniqueId = `${productId}-alt-${alternateNumber}`;
    
    // Find the original product row to insert after it (or after its other alternates)
    let insertAfterRow = null;
    const rows = tbody.querySelectorAll('tr');
    for (let i = rows.length - 1; i >= 0; i--) {
        const row = rows[i];
        if (row.getAttribute('data-product-id') === productId) {
            insertAfterRow = row;
            break;
        }
    }
    
    const newRow = document.createElement('tr');
    newRow.id = `financial-row-${uniqueId}`;
    newRow.setAttribute('data-product-id', productId);
    newRow.setAttribute('data-alternate-number', alternateNumber);
    newRow.style.cssText = 'background: linear-gradient(135deg, var(--warning-50, #fff8e1) 0%, white 100%);';
    
    newRow.innerHTML = `
        <td style="font-weight: 600; color: var(--warning-700, #f57c00);">ALT</td>
        <td>
            <div style="display: flex; align-items: center; gap: 6px;">
                <span style="background: var(--warning-500, #ff9800); color: white; padding: 2px 6px; border-radius: 8px; font-size: 9px; font-weight: 700;">ALT #${alternateNumber}</span>
                <strong>${productName}</strong>
            </div>
            <div style="font-size: 0.85em; color: var(--warning-600, #fb8c00);">UNSPSC: ${productId} • Alternate Offer</div>
        </td>
        <td class="prefilled" style="text-align: center; font-weight: 600;">5</td>
        <td><select><option>USD</option><option>EUR</option></select></td>
        <td><input type="number" placeholder="0.00" step="0.01"></td>
        <td><input type="number" placeholder="0.00" step="0.01"></td>
        <td><input type="number" placeholder="0.00" step="0.01"></td>
        <td class="calculated">0.00</td>
    `;
    
    if (insertAfterRow && insertAfterRow !== totalRow) {
        insertAfterRow.parentNode.insertBefore(newRow, insertAfterRow.nextSibling);
    } else {
        tbody.insertBefore(newRow, totalRow);
    }
}

function removeAlternateOffer(uniqueId, productId) {
    // Remove technical section
    const technicalSection = document.getElementById(`alternate-section-${uniqueId}`);
    if (technicalSection) {
        technicalSection.remove();
    }
    
    // Remove financial row
    const financialRow = document.getElementById(`financial-row-${uniqueId}`);
    if (financialRow) {
        financialRow.remove();
    }
}

// Partner Management
function addSupplierPartner() {
    supplierPartnerCount++;
    const isLead = supplierPartnerCount === 1;
    
    const container = document.getElementById('supplierPartnerCards');
    if (!container) return;
    
    const partnerCard = document.createElement('div');
    partnerCard.className = 'supplier-partner-card' + (isLead ? ' lead' : '');
    partnerCard.id = 'supplier-partner-' + supplierPartnerCount;
    
    partnerCard.innerHTML = `
        ${isLead ? '<div class="supplier-partner-badge"><i class="pi pi-star-fill" style="margin-right: 3px; font-size: 9px;"></i>LEAD PARTNER</div>' : ''}
        <div class="supplier-partner-header">
            <span style="font-size: 12px; font-weight: 600; color: var(--primary-500);"><i class="pi pi-user" style="margin-right: 6px; font-size: 11px;"></i>Partner ${supplierPartnerCount}</span>
        </div>
        
        <div class="supplier-form-grid">
            <div class="supplier-form-field">
                <label><i class="pi pi-id-card"></i> Company Name <span style="color: var(--danger-500);">*</span></label>
                <input type="text" placeholder="Enter company name">
            </div>
            <div class="supplier-form-field">
                <label><i class="pi pi-verified"></i> UNGM ID (if registered)</label>
                <input type="text" placeholder="UNGM-XXXXXX">
            </div>
        </div>
        
        <div class="supplier-form-field" style="margin: var(--spacing-xs) 0;">
            <label><i class="pi pi-map-marker"></i> Address <span style="color: var(--danger-500);">*</span></label>
            <textarea placeholder="Complete address: Street, City, State/Province, Postal Code, Country" rows="2"></textarea>
        </div>
        
        <div class="supplier-form-grid">
            <div class="supplier-form-field">
                <label><i class="pi pi-phone"></i> Telephone Number <span style="color: var(--danger-500);">*</span></label>
                <input type="tel" placeholder="+X-XXX-XXX-XXXX">
            </div>
            <div class="supplier-form-field">
                <label><i class="pi pi-envelope"></i> E-mail Address <span style="color: var(--danger-500);">*</span></label>
                <input type="email" placeholder="email@company.com">
            </div>
        </div>
        
        <div class="supplier-form-grid" style="margin-top: var(--spacing-xs);">
            <div class="supplier-form-field">
                <label><i class="pi pi-percentage"></i> Share of Responsibility (%) <span style="color: var(--danger-500);">*</span></label>
                <input type="number" class="supplier-partner-share" min="0" max="100" value="${isLead ? 100 : 0}" placeholder="0" onchange="updateSupplierTotalShare()">
            </div>
            <div class="supplier-form-field">
                <label><i class="pi pi-box"></i> Type of Goods/Services to be Delivered</label>
                <input type="text" placeholder="Describe the goods/services">
            </div>
        </div>
        
        <div style="margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px solid var(--surface-200); display: flex; flex-direction: column; gap: var(--spacing-sm);">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div style="display: flex; gap: var(--spacing-lg);">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" ${isLead ? 'checked' : ''} onchange="setSupplierLeadPartner(${supplierPartnerCount}, this.checked)">
                <span><strong>Leading Partner</strong> (authority to bind the JV)</span>
            </label>
                    <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; padding: 4px 10px; background: var(--success-50); border: 1px solid var(--success-200); border-radius: var(--radius-sm); font-size: 12px;">
                        <input type="checkbox" ${isLead ? 'checked' : ''} class="payment-recipient-checkbox" onchange="setPaymentRecipient(${supplierPartnerCount}, this.checked)" style="width: 14px; height: 14px;">
                        <span style="color: var(--success-700);"><i class="pi pi-wallet" style="margin-right: 3px; font-size: 10px;"></i>Payment Recipient</span>
                    </label>
                </div>
            ${!isLead ? `<button class="btn btn-ghost btn-sm" onclick="removeSupplierPartner(${supplierPartnerCount})" style="color: var(--danger-500);"><i class="pi pi-trash" style="margin-right: 4px;"></i>Remove</button>` : ''}
            </div>
        </div>
    `;
    
    container.appendChild(partnerCard);
    updateSupplierTotalShare();
}

function removeSupplierPartner(id) {
    const card = document.getElementById('supplier-partner-' + id);
    if (card) {
        card.remove();
        updateSupplierTotalShare();
    }
}

function setSupplierLeadPartner(id, isLead) {
    if (isLead) {
        // Uncheck all other lead partner checkboxes (not payment recipient ones)
        document.querySelectorAll('#supplierPartnerCards input[type="checkbox"]:not(.payment-recipient-checkbox)').forEach(cb => {
            if (cb.closest('.supplier-partner-card').id !== 'supplier-partner-' + id) {
                cb.checked = false;
            }
        });
        
        // Update styling
        document.querySelectorAll('.supplier-partner-card').forEach(card => {
            card.classList.remove('lead');
            const badge = card.querySelector('.supplier-partner-badge');
            if (badge) badge.remove();
        });
        
        const currentCard = document.getElementById('supplier-partner-' + id);
        if (currentCard) {
            currentCard.classList.add('lead');
            const badge = document.createElement('div');
            badge.className = 'supplier-partner-badge';
            badge.innerHTML = '<i class="pi pi-star-fill" style="margin-right: 4px;"></i>LEAD PARTNER';
            currentCard.insertBefore(badge, currentCard.firstChild);
        }
    }
}

function setPaymentRecipient(id, isRecipient) {
    if (isRecipient) {
        // Uncheck all other payment recipient checkboxes (only one can receive payment)
        document.querySelectorAll('#supplierPartnerCards .payment-recipient-checkbox').forEach(cb => {
            if (cb.closest('.supplier-partner-card').id !== 'supplier-partner-' + id) {
                cb.checked = false;
            }
        });
    }
}

function updateSupplierTotalShare() {
    let total = 0;
    document.querySelectorAll('.supplier-partner-share').forEach(input => {
        total += parseFloat(input.value) || 0;
    });
    
    const totalSpan = document.getElementById('supplierTotalShare');
    const statusSpan = document.getElementById('supplierShareStatus');
    
    if (totalSpan) totalSpan.textContent = total + '%';
    
    if (statusSpan) {
        if (total === 100) {
            statusSpan.innerHTML = '<span style="color: var(--success-500);">✓ Valid</span>';
        } else if (total > 100) {
            statusSpan.innerHTML = '<span style="color: var(--danger-500);">⚠ Exceeds 100%</span>';
        } else {
            statusSpan.innerHTML = '<span style="color: var(--warning-500);">⚠ Must equal 100%</span>';
        }
    }
}

function submitSupplierBid() {
    if (supplierCompletedSections.length < 4) {
        if (!confirm('You have not completed all sections. Are you sure you want to submit your bid?\n\nClick OK to continue or Cancel to review.')) {
            return;
        }
    }
    
    if (confirm('Ready to submit your bid?\n\nOnce submitted, you will not be able to make changes unless specifically requested by UNOPS.')) {
        alert('🎉 Bid submitted successfully!\n\nReference: UNOPS/ITB/2025/001\nSubmission Time: ' + new Date().toLocaleString() + '\n\nYou will receive a confirmation email shortly.');
        supplierCompletedSections = ['bidder-info', 'technical-bid', 'financial-bid', 'qualification', 'compliance'];
        updateSupplierProgress();
    }
}

function attachSectionNavListeners() {
document.querySelectorAll('.section-nav-item').forEach(item => {
item.addEventListener('click', function(e) {
e.preventDefault();
navigateToSection(this.dataset.section);
});
});
}

function navigateToSection(section) {
currentSection = section;

document.querySelectorAll('.section-nav-item').forEach(item => item.classList.remove('active'));
document.querySelector(`[data-section="${section}"]`)?.classList.add('active');

document.querySelectorAll('.section-block').forEach(block => block.classList.add('hidden'));
document.getElementById(`section-${section}`)?.classList.remove('hidden');

window.scrollTo({ top: 0, behavior: 'smooth' });
}

function toggleForm(header) {
const form = header.closest('.collapsible-form');
form.classList.toggle('collapsed');
}

function toggleJVForm(checked) {
document.getElementById('jv-form-section').style.display = checked ? 'block' : 'none';
if (checked && document.querySelectorAll('#jvPartnersContainer .jv-partner-card').length === 0) {
addJVPartnerBidding();
}
}

// JV Partner Management for Bidding
let jvBiddingPartnerCount = 0;
let jvBiddingLeadPartner = null;

function addJVPartnerBidding() {
jvBiddingPartnerCount++;
const container = document.getElementById('jvPartnersContainer');
if (!container) return;

const isFirst = jvBiddingPartnerCount === 1;
if (isFirst) jvBiddingLeadPartner = jvBiddingPartnerCount;

const partnerCard = document.createElement('div');
partnerCard.className = 'jv-partner-card' + (isFirst ? ' lead-partner' : '');
partnerCard.id = 'jv-partner-' + jvBiddingPartnerCount;
partnerCard.style.cssText = 'background: var(--surface-50); border: 1px solid var(--surface-200); border-radius: var(--radius-md); padding: var(--spacing-md); margin-bottom: var(--spacing-md);' + (isFirst ? 'border-color: var(--primary-500); border-width: 2px; background: var(--primary-50);' : '');

partnerCard.innerHTML = `
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--surface-200);">
<span style="font-weight: 600; color: var(--primary-600);">Partner ${jvBiddingPartnerCount}</span>
${isFirst ? '<span style="background: var(--primary-500); color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600;">LEAD PARTNER</span>' : ''}
</div>

<div class="form-grid">
<div class="form-group">
<label class="form-label">Company Name <span class="required">*</span></label>
<input type="text" class="form-input" placeholder="Enter company name">
</div>
<div class="form-group">
<label class="form-label">UNGM ID (if registered)</label>
<input type="text" class="form-input" placeholder="UNGM-XXXXXX">
</div>
</div>

<div class="form-group">
<label class="form-label">Full Address <span class="required">*</span></label>
<textarea class="form-textarea" placeholder="Street address, City, State/Province, Postal Code, Country" rows="2"></textarea>
</div>

<div class="form-grid">
<div class="form-group">
<label class="form-label">Telephone Number <span class="required">*</span></label>
<input type="tel" class="form-input" placeholder="+X-XXX-XXX-XXXX">
</div>
<div class="form-group">
<label class="form-label">E-mail Address <span class="required">*</span></label>
<input type="email" class="form-input" placeholder="email@company.com">
</div>
</div>

<div class="form-grid">
<div class="form-group">
<label class="form-label">Proposed Proportion of Responsibilities (%) <span class="required">*</span></label>
<input type="number" class="form-input jv-percentage-input" min="0" max="100" value="${isFirst ? 100 : 0}" placeholder="0" onchange="updateJVPercentages()">
</div>
<div class="form-group">
<label class="form-label">Type of Goods/Services to be Delivered</label>
<input type="text" class="form-input" placeholder="Describe the goods/services">
</div>
</div>

<div style="display: flex; flex-direction: column; gap: var(--spacing-sm); margin-top: var(--spacing-md); padding-top: var(--spacing-sm); border-top: 1px solid var(--surface-200);">
<div style="display: flex; justify-content: space-between; align-items: center;">
<div style="display: flex; gap: var(--spacing-lg); flex-wrap: wrap;">
<label style="display: flex; align-items: center; gap: 8px;">
<input type="checkbox" ${isFirst ? 'checked' : ''} onchange="setJVLeadPartner(${jvBiddingPartnerCount}, this.checked)">
<span>Leading Partner (authority to bind the JV)</span>
</label>
<label style="display: flex; align-items: center; gap: 6px; padding: 4px 10px; background: var(--success-50); border: 1px solid var(--success-200); border-radius: var(--radius-sm); font-size: 12px; cursor: pointer;">
<input type="checkbox" ${isFirst ? 'checked' : ''} class="jv-payment-recipient-checkbox" onchange="setJVPaymentRecipient(${jvBiddingPartnerCount}, this.checked)" style="width: 14px; height: 14px;">
<span style="color: var(--success-700);">💰 Payment Recipient</span>
</label>
</div>
${!isFirst ? `<button class="btn btn-ghost btn-sm" onclick="removeJVPartner(${jvBiddingPartnerCount})" style="color: var(--error-500);">🗑️ Remove</button>` : ''}
</div>
</div>
`;

container.appendChild(partnerCard);
updateJVPercentages();
}

function removeJVPartner(partnerId) {
const card = document.getElementById('jv-partner-' + partnerId);
if (card) {
card.remove();
updateJVPercentages();
}
}

function setJVLeadPartner(partnerId, isLead) {
if (isLead) {
// Uncheck all other lead partner checkboxes (not payment recipient ones)
document.querySelectorAll('#jvPartnersContainer input[type="checkbox"]:not(.jv-payment-recipient-checkbox)').forEach(cb => {
if (cb.closest('.jv-partner-card').id !== 'jv-partner-' + partnerId) {
cb.checked = false;
}
});

// Update styling
document.querySelectorAll('.jv-partner-card').forEach(card => {
card.classList.remove('lead-partner');
card.style.borderColor = 'var(--surface-200)';
card.style.borderWidth = '1px';
card.style.background = 'var(--surface-50)';
const badge = card.querySelector('.lead-partner-badge');
if (badge) badge.remove();
});

const currentCard = document.getElementById('jv-partner-' + partnerId);
if (currentCard) {
currentCard.classList.add('lead-partner');
currentCard.style.borderColor = 'var(--primary-500)';
currentCard.style.borderWidth = '2px';
currentCard.style.background = 'var(--primary-50)';

const header = currentCard.querySelector('div');
if (header && !header.querySelector('.lead-partner-badge')) {
const badge = document.createElement('span');
badge.className = 'lead-partner-badge';
badge.style.cssText = 'background: var(--primary-500); color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600;';
badge.textContent = 'LEAD PARTNER';
header.appendChild(badge);
}
}
jvBiddingLeadPartner = partnerId;
}
}

function setJVPaymentRecipient(partnerId, isRecipient) {
if (isRecipient) {
// Uncheck all other payment recipient checkboxes (only one can receive payment)
document.querySelectorAll('#jvPartnersContainer .jv-payment-recipient-checkbox').forEach(cb => {
if (cb.closest('.jv-partner-card').id !== 'jv-partner-' + partnerId) {
cb.checked = false;
}
});
}
}

function updateJVPercentages() {
const inputs = document.querySelectorAll('.jv-percentage-input');
let total = 0;

inputs.forEach(input => {
total += parseFloat(input.value) || 0;
});

const totalSpan = document.getElementById('totalJVPercentage');
const statusSpan = document.getElementById('jvPercentageStatus');
const summary = document.getElementById('jvPercentageSummary');

if (totalSpan) totalSpan.textContent = total.toFixed(0);

if (statusSpan && summary) {
if (total === 100) {
statusSpan.textContent = '✓ Valid';
statusSpan.style.color = 'var(--success-500)';
summary.style.borderColor = 'var(--success-500)';
summary.style.background = 'var(--success-50)';
} else {
statusSpan.textContent = total > 100 ? '⚠ Exceeds 100%' : '⚠ Must equal 100%';
statusSpan.style.color = 'var(--warning-500)';
summary.style.borderColor = 'var(--warning-500)';
summary.style.background = 'var(--warning-50)';
}
}
}

// Performance Statement Table
function addPerformanceRow() {
const table = document.querySelector('#performanceTable tbody');
if (!table) return;

const newRow = document.createElement('tr');
newRow.innerHTML = `
<td><textarea class="form-textarea" rows="2" placeholder="Company name & address"></textarea></td>
<td><input type="text" class="form-input" placeholder="Order #"></td>
<td><textarea class="form-textarea" rows="2" placeholder="Description"></textarea></td>
<td><input type="text" class="form-input" placeholder="$0.00"></td>
<td><input type="date" class="form-input"></td>
<td><input type="date" class="form-input"></td>
<td><textarea class="form-textarea" rows="2" placeholder="Remarks"></textarea></td>
<td><select class="form-select"><option>Select</option><option>Yes</option><option>No</option></select></td>
`;
table.appendChild(newRow);
}

// Download Form A as PDF placeholder
function downloadFormAPDF() {
alert('Form A PDF download functionality\\n\\nIn production, this will:\\n1. Generate a PDF with all partner information\\n2. Include signature blocks for each partner\\n3. Download for offline signing\\n4. Allow upload of signed PDF back to system');
}

function openTenderDetailsSidebar() {
document.getElementById('tender-details-sidebar').classList.add('open');
}

function openClarificationsSidebar() {
document.getElementById('clarifications-sidebar').classList.add('open');
}

function closeSidebar(id) {
document.getElementById(id).classList.remove('open');
}

function openModal(modalId) {
document.getElementById(modalId).classList.add('show');
}

function closeModal(modalId) {
document.getElementById(modalId).classList.remove('show');
}

function submitClarification() {
closeModal('ask-clarification-modal');
alert('✅ Clarification submitted! You will be notified when UNOPS responds.');
}

function submitClarificationQuick() {
closeSidebar('clarifications-sidebar');
alert('✅ Clarification submitted!');
}

function createAlternateOffer() {
closeModal('add-alternate-offer-modal');
    // Use the new global alternate offer function
    addGlobalAlternateOffer();
}

function toggleCollapseSidebar(header) {
const content = header.nextElementSibling;
const icon = header.querySelector('.collapsible-icon');

if (content.style.display === 'none' || !content.style.display) {
content.style.display = 'block';
icon.classList.remove('rotated');
} else {
content.style.display = 'none';
icon.classList.add('rotated');
}
}

function toggleItemCard(header, event) {
// Prevent any parent click handlers
if (event) {
event.stopPropagation();
}

const content = header.nextElementSibling;
const arrow = header.querySelector('.collapsible-arrow');

if (!content || !arrow) {
console.error('Could not find content or arrow element', header);
return;
}

// Toggle the expanded state
const isExpanded = content.classList.contains('expanded');

if (isExpanded) {
content.classList.remove('expanded');
arrow.classList.remove('rotated');
} else {
content.classList.add('expanded');
arrow.classList.add('rotated');
}
}

function expressInterest(tenderRef) {
if (confirm(`Express interest in tender ${tenderRef}?\n\nYou will be able to access tender details and submit a bid.`)) {
alert('✅ Interest expressed successfully!\n\nThis tender has been added to "My Tenders" and you can now prepare your bid.');
// In a real application, this would make an API call
}
}

function toggleSection(header) {
const section = header.closest('.collapsible-section');
if (section) {
section.classList.toggle('collapsed');
}
}

// Tab context switching (Tender Info vs Process)
function switchTabContext(context, btnElement) {
  // Update toggle buttons
  const toggleBtns = document.querySelectorAll('.toggle-btn');
  toggleBtns.forEach(btn => btn.classList.remove('active'));
  btnElement.classList.add('active');
  
  // Show/hide tab nav groups
  const infoTabs = document.getElementById('tabs-info');
  const processTabs = document.getElementById('tabs-process');
  const contextHint = document.getElementById('tab-context-hint');
  
  if (context === 'info') {
    infoTabs.classList.remove('hidden');
    processTabs.classList.add('hidden');
    contextHint.innerHTML = '<i class="pi pi-info-circle"></i><span>Reference information from tender authoring</span>';
    
    // Activate first info tab
    const firstInfoTab = infoTabs.querySelector('.tender-tab-btn');
    if (firstInfoTab) {
      switchTab('tab-general', firstInfoTab);
    }
  } else {
    infoTabs.classList.add('hidden');
    processTabs.classList.remove('hidden');
    contextHint.innerHTML = '<i class="pi pi-info-circle"></i><span>Active process and workflow items</span>';
    
    // Activate first process tab
    const firstProcessTab = processTabs.querySelector('.tender-tab-btn');
    if (firstProcessTab) {
      switchTab('tab-amendments', firstProcessTab);
    }
  }
}

// Tab switching for tender details
function switchTab(tabId, btnElement) {
  // Hide all tab panels
  const panels = document.querySelectorAll('.tender-tab-panel');
  panels.forEach(panel => panel.classList.remove('active'));
  
  // Remove active class from all tab buttons
  const buttons = document.querySelectorAll('.tender-tab-btn');
  buttons.forEach(btn => btn.classList.remove('active'));
  
  // Show the selected tab panel
  const targetPanel = document.getElementById(tabId);
  if (targetPanel) {
    targetPanel.classList.add('active');
  }
  
  // Add active class to clicked button
  if (btnElement) {
    btnElement.classList.add('active');
}
}

// ========== REPLICATE MANUFACTURER FUNCTIONALITY ==========
let sourceManufacturerElement = null;

function openReplicateManufacturerModal(buttonElement) {
    // Store reference to the source manufacturer section
    sourceManufacturerElement = buttonElement.closest('.product-technical-section');
    if (!sourceManufacturerElement) {
        sourceManufacturerElement = buttonElement.closest('.supplier-form-grid')?.closest('[data-product-id]');
    }
    
    const sourceProductId = sourceManufacturerElement?.getAttribute('data-product-id');
    
    // Get all product sections
    const allProductSections = document.querySelectorAll('.product-technical-section[data-product-id]');
    const itemsContainer = document.getElementById('replicate-manufacturer-items');
    itemsContainer.innerHTML = '';
    
    // Available items to replicate to (products with UNSPSC codes from the financial table)
    const productItems = [
        { id: '42182104', name: 'Ultrasound Machines', qty: 5 },
        { id: '42182108', name: 'Patient Monitors', qty: 20 },
        { id: '42192201', name: 'Surgical Lights', qty: 8 },
        { id: '42182101', name: 'Anesthesia Machines', qty: 3 }
    ];
    
    productItems.forEach(item => {
        const isSource = item.id === sourceProductId;
        const itemDiv = document.createElement('div');
        itemDiv.style.cssText = 'display: flex; align-items: center; gap: 10px; padding: 8px 10px; border-radius: var(--radius-sm); margin-bottom: 6px; background: ' + (isSource ? 'var(--primary-50)' : 'var(--surface-50)') + '; border: 1px solid ' + (isSource ? 'var(--primary-200)' : 'var(--surface-200)') + ';';
        
        if (isSource) {
            itemDiv.innerHTML = `
                <i class="pi pi-building" style="color: var(--primary-500); font-size: 14px;"></i>
                <div style="flex: 1;">
                    <div style="font-weight: 600; font-size: 12px; color: var(--primary-700);">${item.name}</div>
                    <div style="font-size: 10px; color: var(--text-muted);">UNSPSC: ${item.id} • Qty: ${item.qty}</div>
                </div>
                <span style="font-size: 9px; background: var(--primary-100); color: var(--primary-600); padding: 2px 6px; border-radius: 8px;">SOURCE</span>
            `;
        } else {
            itemDiv.innerHTML = `
                <input type="checkbox" class="replicate-item-checkbox" data-product-id="${item.id}" style="cursor: pointer;">
                <div style="flex: 1;">
                    <div style="font-weight: 500; font-size: 12px; color: var(--text-primary);">${item.name}</div>
                    <div style="font-size: 10px; color: var(--text-muted);">UNSPSC: ${item.id} • Qty: ${item.qty}</div>
                </div>
            `;
        }
        itemsContainer.appendChild(itemDiv);
    });
    
    // Reset select all checkbox
    document.getElementById('replicate-select-all').checked = false;
    
    // Open modal
    openModal('replicate-manufacturer-modal');
}

function toggleReplicateSelectAll(checked) {
    document.querySelectorAll('.replicate-item-checkbox').forEach(cb => {
        cb.checked = checked;
    });
}

function applyManufacturerToSelected() {
    const selectedItems = document.querySelectorAll('.replicate-item-checkbox:checked');
    
    if (selectedItems.length === 0) {
        alert('Please select at least one item to apply the manufacturer to.');
        return;
    }
    
    // Get source manufacturer data
    const sourceGrid = sourceManufacturerElement?.querySelector('.supplier-form-grid');
    const manufacturerName = sourceGrid?.querySelector('input[placeholder="Manufacturer name"]')?.value || '';
    const ungmId = sourceGrid?.querySelector('input[placeholder="UNGM-XXXXXX"]')?.value || '';
    const address = sourceGrid?.querySelector('textarea[placeholder="Full address"]')?.value || '';
    
    // Apply to selected items (in real implementation, this would update the respective sections)
    const itemNames = [];
    selectedItems.forEach(cb => {
        const productId = cb.getAttribute('data-product-id');
        itemNames.push(productId);
        // Here you would update the actual form fields for each product
        console.log(`Applying manufacturer to product ${productId}:`, { manufacturerName, ungmId, address });
    });
    
    closeModal('replicate-manufacturer-modal');
    
    // Show success feedback
    const successMsg = `Manufacturer info applied to ${selectedItems.length} item(s)`;
    alert(successMsg);
}
</script>
</body>
</html>
