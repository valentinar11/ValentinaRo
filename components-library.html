<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNOPS PDJ · Components Library</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/primeicons@6.0.1/primeicons.css">
    <style>
      :root {
        --primary-50: #e6f7ff;
        --primary-100: #bae7ff;
        --primary-200: #7dd3fc;
        --primary-300: #38bdf8;
        --primary-400: #0ea5e9;
        --primary-500: #0092D1;
        --primary-600: #0284c7;
        --primary-700: #0369a1;
        --primary-800: #003a56;
        --primary-900: #001d2b;
        --surface-0: #ffffff;
        --surface-50: #f5f8fb;
        --surface-100: #ebf1f8;
        --surface-200: #dde8f2;
        --surface-300: #cfdfec;
        --surface-400: #a3a3a3;
        --surface-600: #95a7ba;
        --surface-800: #596170;
        --surface-900: #3b3e4a;
        --success-50: #d2e7cd;
        --success-500: #4c9f38;
        --success-600: #4c9f38;
        --info-50: #bfe4f4;
        --info-500: #2196f3;
        --info-600: #2563eb;
        --warning-50: #f9d6c3;
        --warning-500: #e85c0e;
        --warning-600: #d97706;
        --danger-50: #f6cac6;
        --danger-500: #da291c;
        --danger-600: #dc2626;
        --purple-50: #f3e8ff;
        --purple-500: #9333ea;
        --purple-700: #7c3aed;
        --text-primary: var(--surface-900);
        --text-secondary: var(--surface-800);
        --text-muted: var(--surface-600);
        --spacing-xs: 6px;
        --spacing-sm: 12px;
        --spacing-md: 20px;
        --spacing-lg: 28px;
        --spacing-xl: 36px;
        --spacing-2xl: 48px;
        --radius-sm: 4px;
        --radius-md: 6px;
        --radius-lg: 8px;
        --radius-xl: 16px;
        --shadow-xs: 0 1px 2px rgba(0,0,0,0.05);
        --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
        --shadow-md: 0 4px 6px rgba(0,0,0,0.08);
        --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
        --shadow-card: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.06);
        --transition-fast: 150ms cubic-bezier(0.4,0,0.2,1);
        --transition-base: 200ms cubic-bezier(0.4,0,0.2,1);
      }
      * { box-sizing: border-box; margin: 0; padding: 0; }
      body {
        font-family: 'Lato', 'Noto Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: var(--surface-50);
        color: var(--text-primary);
        line-height: 1.5;
        min-height: 100vh;
      }
      .header {
        background: var(--surface-0);
        border-bottom: 1px solid var(--surface-200);
        position: sticky;
        top: 0;
        z-index: 100;
      }
      .header-top {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-md) var(--spacing-xl);
      }
      .logo-container {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
      }
      .logo {
        font-weight: 700;
        font-size: 20px;
        letter-spacing: 0.12em;
        color: var(--primary-400);
      }
      .portal-badge {
        background: var(--primary-400);
        color: white;
        font-size: 12px;
        font-weight: 600;
        padding: 4px 12px;
        border-radius: 4px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      .header-actions {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        margin-left: auto;
        margin-right: var(--spacing-lg);
      }
      .header-action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px;
        background: transparent;
        border: none;
        border-radius: var(--radius-md);
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        font-size: 13px;
      }
      .header-action-btn:hover {
        background: var(--surface-100);
        transform: scale(1.1);
      }
      .header-action-btn i {
        font-size: 20px;
        color: var(--text-muted);
        transition: color 0.2s ease;
      }
      .header-action-btn:hover i { color: var(--primary-500); }
      .notification-badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background: var(--danger-500);
        color: white;
        font-size: 10px;
        font-weight: 700;
        min-width: 18px;
        height: 18px;
        border-radius: 9px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 5px;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      }
      .ai-icon-wrapper {
        width: 24px;
        height: 24px;
        background: linear-gradient(135deg, #8b5cf6, #6366f1);
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .ai-icon-wrapper i { font-size: 14px; color: white !important; }
      .ai-badge {
        background: linear-gradient(135deg, #8b5cf6, #6366f1);
        color: white;
        font-size: 9px;
        font-weight: 700;
        padding: 2px 6px;
        border-radius: 4px;
        margin-left: 4px;
        text-transform: uppercase;
      }
      .user-menu {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
      }
      .user-info { text-align: right; }
      .user-company { font-size: 12px; color: var(--text-muted); }
      .user-name { font-size: 14px; font-weight: 500; color: var(--text-primary); }
      .user-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: var(--primary-100);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        color: var(--primary-600);
        cursor: pointer;
      }
      .app-container {
        display: flex;
        flex-direction: row;
        min-height: calc(100vh - 65px);
        width: 100%;
      }
      .sidebar {
        width: 300px;
        min-width: 300px;
        max-width: 300px;
        background-color: #0192D1;
        color: white;
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
        overflow-y: auto;
      }
      .sidebar-menu { flex: 1; padding: 16px 0; }
      .menu-section { margin-bottom: var(--spacing-sm); }
      .menu-section-title {
        padding: 8px 20px 12px 20px;
        font-size: 11px;
        font-weight: 700;
        color: rgba(255,255,255,0.5);
        font-family: 'Lato', sans-serif;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      .menu-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 20px;
        font-size: 14px;
        color: white;
        cursor: pointer;
        transition: all 0.2s;
        text-decoration: none;
        border-left: 3px solid transparent;
      }
      .menu-item:hover { background: rgba(255,255,255,0.1); }
      .menu-item.active {
        background: rgba(255,255,255,0.15);
        border-left-color: white;
        font-weight: 600;
      }
      .menu-item.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .menu-icon { font-size: 16px; opacity: 0.9; width: 20px; text-align: center; }
      .menu-group {
        margin-bottom: var(--spacing-xs);
      }
      .menu-group-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 20px;
        font-size: 13px;
        font-weight: 600;
        color: rgba(255,255,255,0.7);
        cursor: pointer;
        transition: all 0.2s;
      }
      .menu-group-header:hover {
        color: white;
        background: rgba(255,255,255,0.05);
      }
      .menu-group-header i {
        font-size: 12px;
        transition: transform 0.2s;
      }
      .menu-group.collapsed .menu-group-header i {
        transform: rotate(-90deg);
      }
      .menu-group.collapsed .menu-group-items {
        display: none;
      }
      .menu-group-items {
        padding-left: 12px;
      }
      .menu-group-items .menu-item {
        padding: 10px 20px 10px 28px;
        font-size: 13px;
        border-left: none;
      }
      .menu-group-items .menu-item.active {
        background: rgba(255,255,255,0.15);
        border-left: none;
        border-radius: 0 4px 4px 0;
        margin-right: 8px;
      }
      .menu-divider {
        height: 1px;
        background: rgba(255,255,255,0.15);
        margin: var(--spacing-md) 0;
      }
      .main-content {
        flex: 1;
        padding: var(--spacing-lg);
        overflow-y: auto;
        background: var(--surface-50);
      }
      .page-action-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-sm);
        padding: var(--spacing-md) var(--spacing-lg);
        margin-bottom: var(--spacing-md);
        background: var(--surface-0);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-card);
        border: 1px solid var(--surface-200);
      }
      .page-title-section {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .page-title {
        font-size: 22px;
        font-weight: 700;
        color: var(--text-primary);
      }
      .page-subtitle {
        font-size: 13px;
        color: var(--text-muted);
      }
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 10px 16px;
        border-radius: var(--radius-sm);
        font-size: 14px;
        font-weight: 500;
        font-family: 'Lato', 'Noto Sans', system-ui, sans-serif;
        cursor: pointer;
        border: none;
        transition: all 0.2s;
        text-decoration: none;
      }
      .btn-secondary {
        background: var(--surface-100);
        color: var(--text-primary);
        border: 1px solid var(--surface-200);
      }
      .btn-secondary:hover { background: var(--surface-200); }
      .btn-primary { background: var(--primary-500); color: white; }
      .btn-primary:hover { background: var(--primary-600); }
      .btn-success { background: var(--success-500); color: white; }
      .btn-success:hover { background: var(--success-600); }
      .btn-danger { background: var(--danger-500); color: white; }
      .btn-danger:hover { background: var(--danger-600); }
      .btn-sm { padding: 6px 12px; font-size: 13px; }
      .btn-ghost {
        background: transparent;
        color: var(--text-secondary);
        border: 1px solid var(--surface-200);
      }
      .btn-ghost:hover { background: var(--surface-100); }
      .btn i { font-size: 14px; }
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
      }
      .stat-card {
        background: var(--surface-0);
        padding: var(--spacing-md);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-card);
        border: 1px solid var(--surface-200);
      }
      .stat-value {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary-600);
        margin-bottom: 4px;
      }
      .stat-label { font-size: 13px; color: var(--text-muted); }
      .content-card {
        background: var(--surface-0);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-card);
        border: 1px solid var(--surface-200);
        margin-bottom: var(--spacing-lg);
      }
      .card-header {
        padding: var(--spacing-md) var(--spacing-lg);
        border-bottom: 1px solid var(--surface-200);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .card-title { font-size: 16px; font-weight: 600; color: var(--text-primary); }
      .card-body { padding: var(--spacing-lg); }
      .filter-bar {
        display: flex;
        gap: var(--spacing-sm);
        padding: var(--spacing-md);
        background: var(--surface-50);
        border-bottom: 1px solid var(--surface-200);
        flex-wrap: wrap;
        align-items: center;
      }
      .filter-input, .filter-select {
        padding: 8px 12px;
        border: 1px solid var(--surface-200);
        border-radius: var(--radius-md);
        font-size: 14px;
        font-family: inherit;
        background: var(--surface-0);
      }
      .filter-input { min-width: 250px; }
      .filter-select { min-width: 150px; }
      .criteria-item {
        padding: var(--spacing-md) var(--spacing-lg);
        border-bottom: 1px solid var(--surface-100);
        transition: background 0.2s;
      }
      .criteria-item:hover { background: var(--surface-50); }
      .criteria-item:last-child { border-bottom: none; }
      .criteria-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--spacing-sm);
      }
      .criteria-title-section { flex: 1; }
      .criteria-title {
        font-size: 15px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 4px;
      }
      .criteria-meta {
        display: flex;
        gap: 12px;
        font-size: 12px;
        color: var(--text-muted);
      }
      .criteria-description {
        font-size: 13px;
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: var(--spacing-sm);
      }
      .criteria-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: var(--spacing-sm);
      }
      .criteria-tags { display: flex; gap: 8px; flex-wrap: wrap; }
      .tag {
        padding: 4px 10px;
        border-radius: var(--radius-sm);
        font-size: 11px;
        font-weight: 500;
      }
      .tag-category { background: var(--info-50); color: var(--info-600); }
      .tag-type { background: var(--surface-100); color: var(--text-secondary); }
      .tag-method { background: var(--purple-50); color: var(--purple-700); }
      .tag-status-published { background: var(--success-50); color: var(--success-600); }
      .tag-status-pending { background: var(--warning-50); color: var(--warning-600); }
      .tag-predefined { background: var(--primary-50); color: var(--primary-600); }
      .tag-custom { background: var(--purple-50); color: var(--purple-500); }
      .tag-unspsc { background: var(--surface-100); color: var(--text-secondary); }
      .usage-info { font-size: 11px; color: var(--text-muted); }
      .spec-group {
        border: 1px solid var(--surface-200);
        border-radius: var(--radius-lg);
        margin-bottom: var(--spacing-md);
        overflow: hidden;
      }
      .spec-group-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-md);
        background: var(--surface-50);
        cursor: pointer;
        transition: background 0.2s;
      }
      .spec-group-header:hover { background: var(--surface-100); }
      .spec-group-title {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }
      .spec-group-code {
        font-weight: 600;
        font-size: 14px;
        color: var(--primary-600);
      }
      .spec-group-desc {
        font-size: 13px;
        color: var(--text-secondary);
      }
      .spec-group-badge {
        background: var(--primary-100);
        color: var(--primary-600);
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }
      .spec-group-content {
        display: none;
        border-top: 1px solid var(--surface-200);
      }
      .spec-group.expanded .spec-group-content { display: block; }
      .spec-version {
        padding: var(--spacing-md);
        border-bottom: 1px solid var(--surface-100);
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        transition: background 0.2s;
      }
      .spec-version:hover { background: var(--surface-50); }
      .spec-version:last-child { border-bottom: none; }
      .spec-version-info { flex: 1; }
      .spec-version-tender {
        font-size: 13px;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 4px;
      }
      .spec-version-meta {
        font-size: 11px;
        color: var(--text-muted);
        display: flex;
        gap: var(--spacing-sm);
        margin-bottom: var(--spacing-xs);
      }
      .spec-version-type {
        font-size: 12px;
        color: var(--text-secondary);
      }
      .spec-attributes {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: var(--spacing-xs);
      }
      .spec-attr {
        font-size: 11px;
        background: var(--surface-100);
        border: 1px solid var(--surface-200);
        border-radius: var(--radius-sm);
        padding: 3px 8px;
        display: flex;
        gap: 4px;
      }
      .spec-attr-name { font-weight: 600; color: var(--text-secondary); }
      .spec-attr-value { color: var(--text-primary); }
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }
      .modal.active { display: flex; }
      .modal-content {
        background: var(--surface-0);
        border-radius: var(--radius-lg);
        width: 90%;
        max-width: 700px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: var(--shadow-lg);
      }
      .modal-header {
        padding: var(--spacing-md) var(--spacing-lg);
        border-bottom: 1px solid var(--surface-200);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .modal-title { font-size: 18px; font-weight: 600; }
      .modal-close {
        width: 32px;
        height: 32px;
        border: none;
        background: transparent;
        border-radius: var(--radius-sm);
        cursor: pointer;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-muted);
      }
      .modal-close:hover { background: var(--surface-100); }
      .modal-body { padding: var(--spacing-lg); }
      .modal-footer {
        padding: var(--spacing-md) var(--spacing-lg);
        border-top: 1px solid var(--surface-200);
        display: flex;
        justify-content: flex-end;
        gap: var(--spacing-sm);
      }
      .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-md);
      }
      .form-group { display: flex; flex-direction: column; }
      .form-group.full-width { grid-column: 1 / -1; }
      .form-label {
        font-size: 13px;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 6px;
      }
      .required { color: var(--danger-500); }
      .form-input, .form-select, .form-textarea {
        padding: 10px 12px;
        border: 1px solid var(--surface-200);
        border-radius: var(--radius-md);
        font-size: 14px;
        font-family: inherit;
      }
      .form-textarea { min-height: 100px; resize: vertical; }
      .form-help { font-size: 11px; color: var(--text-muted); margin-top: 4px; }
      .checkbox-group { display: flex; flex-direction: column; gap: 8px; }
      .checkbox-item { display: flex; align-items: center; gap: 8px; font-size: 13px; }
      .alert {
        padding: var(--spacing-sm) var(--spacing-md);
        border-radius: var(--radius-md);
        margin-bottom: var(--spacing-md);
        font-size: 13px;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }
      .alert-info {
        background: var(--info-50);
        color: var(--info-600);
        border-left: 4px solid var(--info-500);
      }
      .alert-warning {
        background: var(--warning-50);
        color: var(--warning-600);
        border-left: 4px solid var(--warning-500);
      }
      .view-toggle { display: flex; gap: 4px; }
      .view-btn {
        padding: 6px 12px;
        border: 1px solid var(--surface-200);
        background: var(--surface-0);
        border-radius: var(--radius-sm);
        cursor: pointer;
        font-size: 13px;
        transition: all 0.2s;
      }
      .view-btn.active {
        background: var(--primary-500);
        color: white;
        border-color: var(--primary-500);
      }
      .empty-state {
        text-align: center;
        padding: var(--spacing-2xl);
        color: var(--text-muted);
      }
      .empty-state-icon { font-size: 48px; margin-bottom: var(--spacing-md); opacity: 0.5; }
      .chevron {
        transition: transform 0.2s;
        color: var(--text-muted);
      }
      .spec-group.expanded .chevron { transform: rotate(180deg); }
      .tab-nav {
        display: flex;
        border-bottom: 2px solid var(--surface-200);
        margin-bottom: var(--spacing-lg);
      }
      .tab-btn {
        padding: var(--spacing-sm) var(--spacing-lg);
        font-size: 14px;
        font-weight: 500;
        color: var(--text-muted);
        background: none;
        border: none;
        cursor: pointer;
        border-bottom: 2px solid transparent;
        margin-bottom: -2px;
        transition: all 0.2s;
      }
      .tab-btn:hover { color: var(--text-primary); }
      .tab-btn.active {
        color: var(--primary-600);
        border-bottom-color: var(--primary-500);
      }
      .tab-content { display: none; }
      .tab-content.active { display: block; }
      /* Grid View Styles */
      .criteria-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: var(--spacing-md);
        padding: var(--spacing-md);
      }
      .criteria-grid-item {
        background: var(--surface-0);
        border: 1px solid var(--surface-200);
        border-radius: var(--radius-lg);
        padding: var(--spacing-md);
        transition: all 0.2s;
        display: flex;
        flex-direction: column;
      }
      .criteria-grid-item:hover {
        border-color: var(--primary-300);
        box-shadow: var(--shadow-md);
      }
      .criteria-grid-item .criteria-title {
        font-size: 14px;
        margin-bottom: 8px;
      }
      .criteria-grid-item .criteria-description {
        font-size: 12px;
        flex: 1;
        margin-bottom: var(--spacing-sm);
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .criteria-grid-item .criteria-footer {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      .spec-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: var(--spacing-md);
      }
      .spec-grid-item {
        background: var(--surface-0);
        border: 1px solid var(--surface-200);
        border-radius: var(--radius-lg);
        padding: var(--spacing-md);
        transition: all 0.2s;
      }
      .spec-grid-item:hover {
        border-color: var(--primary-300);
        box-shadow: var(--shadow-md);
      }
      .spec-grid-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--spacing-sm);
      }
      .spec-grid-code {
        font-weight: 600;
        font-size: 13px;
        color: var(--primary-600);
      }
      .spec-grid-desc {
        font-size: 12px;
        color: var(--text-secondary);
        margin-bottom: var(--spacing-sm);
      }
      .spec-stats {
        display: flex;
        gap: var(--spacing-md);
        margin-top: var(--spacing-sm);
        padding-top: var(--spacing-sm);
        border-top: 1px solid var(--surface-100);
      }
      .spec-stat {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2px;
      }
      .spec-stat-value {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-primary);
      }
      .spec-stat-label {
        font-size: 10px;
        color: var(--text-muted);
        text-transform: uppercase;
      }
      .success-rate {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }
      .success-rate.high { background: var(--success-50); color: var(--success-600); }
      .success-rate.medium { background: var(--warning-50); color: var(--warning-600); }
      .success-rate.low { background: var(--danger-50); color: var(--danger-600); }
    </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header" role="banner">
      <div class="header-top">
        <div class="logo-container">
          <div class="logo">UNOPS</div>
          <span class="portal-badge">Procurement</span>
          <span style="color: var(--surface-400); margin: 0 8px; font-size: 18px;">|</span>
          <span style="color: var(--primary-500); font-weight: 600; font-size: 14px;">Components</span>
        </div>

        <div class="header-actions">
          <div class="header-action-btn" title="Accessibility Options">
            <i class="pi pi-eye"></i>
          </div>
          <div class="header-action-btn" title="Change Language">
            <i class="pi pi-globe"></i>
          </div>
          <div class="header-action-btn" title="AI Assistant">
            <div class="ai-icon-wrapper">
              <i class="pi pi-bolt"></i>
            </div>
            <span class="ai-badge">NEW</span>
          </div>
          <div class="header-action-btn" title="Help Center">
            <i class="pi pi-question-circle"></i>
          </div>
          <div class="header-action-btn" title="Notifications">
            <i class="pi pi-bell"></i>
            <span class="notification-badge">3</span>
          </div>
        </div>

        <div class="user-menu">
          <div class="user-info">
            <div class="user-company">UNOPS Internal</div>
            <div class="user-name">Jane Doe</div>
          </div>
          <div class="user-avatar">JD</div>
        </div>
      </div>
    </header>

    <div class="app-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <nav class="sidebar-menu">
          <!-- Administrative Applications -->
          <div class="menu-section">
            <div class="menu-section-title">Administrative Applications</div>
            
            <!-- System Settings -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-cog"></i> System Settings</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-users"></i></span><span>User Role Management</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-id-card"></i></span><span>Role Management</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-sliders-h"></i></span><span>Attribute Management</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-database"></i></span><span>Data Management</span></a>
              </div>
            </div>
            
            <!-- Components -->
            <div class="menu-group">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-box"></i> Components</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item active" id="menu-criteria" onclick="switchView('criteria')"><span class="menu-icon"><i class="pi pi-list"></i></span><span>Evaluation Criteria Library</span></a>
                <a class="menu-item" id="menu-specifications" onclick="switchView('specifications')"><span class="menu-icon"><i class="pi pi-cog"></i></span><span>Specifications Library</span></a>
              </div>
            </div>
            
            <!-- Forms -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-file-edit"></i> Forms</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-folder"></i></span><span>Forms Library</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-pencil"></i></span><span>Form Builder</span></a>
              </div>
            </div>
            
            <!-- Processes -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-sitemap"></i> Processes</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-list"></i></span><span>Process Library</span></a>
              </div>
            </div>
            
            <!-- Templates -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-copy"></i> Templates</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item" href="template-library.html"><span class="menu-icon"><i class="pi pi-folder"></i></span><span>Templates Library</span></a>
                <a class="menu-item" href="template-builder-workspace.html"><span class="menu-icon"><i class="pi pi-pencil"></i></span><span>Template Builder</span></a>
              </div>
            </div>
          </div>
          
          <div class="menu-divider"></div>
          
          <!-- Business Applications -->
          <div class="menu-section">
            <div class="menu-section-title">Business Applications</div>
            
            <!-- eTendering -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-briefcase"></i> eTendering</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item" href="tender-dashboard-complete.html"><span class="menu-icon"><i class="pi pi-chart-bar"></i></span><span>Overview</span></a>
                <a class="menu-item" href="tender-dashboard-complete.html"><span class="menu-icon"><i class="pi pi-folder-open"></i></span><span>Tenders</span></a>
                <a class="menu-item" href="tender-authoring.html"><span class="menu-icon"><i class="pi pi-plus"></i></span><span>Create Tender</span></a>
              </div>
            </div>
            
            <!-- Award & Review -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-check-square"></i> Award & Review</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item" href="CPC.html"><span class="menu-icon"><i class="pi pi-chart-bar"></i></span><span>Overview</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-folder"></i></span><span>Cases</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-calendar"></i></span><span>Meetings</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-users"></i></span><span>Pool Management</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-comments"></i></span><span>Q&A</span></a>
              </div>
            </div>
            
            <!-- DRiVE -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-shield"></i> DRiVE</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-chart-bar"></i></span><span>Overview</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-inbox"></i></span><span>Response Library</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-check-circle"></i></span><span>Verification</span></a>
                <a class="menu-item" href="capa-interactive-mockup.html"><span class="menu-icon"><i class="pi pi-exclamation-triangle"></i></span><span>CAPA</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-question-circle"></i></span><span>Questionnaire Management</span></a>
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-chart-line"></i></span><span>Risk Management</span></a>
              </div>
            </div>
            
            <!-- Contracts -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-file"></i> Contracts</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item disabled"><span class="menu-icon"><i class="pi pi-list"></i></span><span>Contract Management</span></a>
              </div>
            </div>
            
            <!-- Supplier Management -->
            <div class="menu-group collapsed">
              <div class="menu-group-header" onclick="toggleMenuGroup(this)">
                <span><i class="pi pi-truck"></i> Supplier Management</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <div class="menu-group-items">
                <a class="menu-item" href="supplier-management-procurement.html"><span class="menu-icon"><i class="pi pi-building"></i></span><span>Suppliers</span></a>
              </div>
            </div>
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Evaluation Criteria Library View -->
        <div class="view-section active" id="criteria-view">
          <div class="page-action-bar">
            <div class="page-title-section">
              <h1 class="page-title">Evaluation Criteria Library</h1>
              <p class="page-subtitle">Manage predefined and custom evaluation criteria for tender processes</p>
            </div>
            <div style="display: flex; gap: var(--spacing-sm);">
              <button class="btn btn-secondary"><i class="pi pi-download"></i> Export</button>
              <button class="btn btn-secondary"><i class="pi pi-upload"></i> Import</button>
              <button class="btn btn-primary" onclick="openCriteriaModal()"><i class="pi pi-plus"></i> Add Criterion</button>
            </div>
          </div>

          <!-- Stats -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value">24</div>
              <div class="stat-label">Total Criteria</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">7</div>
              <div class="stat-label">Predefined (System)</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">17</div>
              <div class="stat-label">Custom Criteria</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">89</div>
              <div class="stat-label">Active Tenders Using</div>
            </div>
          </div>

          <!-- Criteria List -->
          <div class="content-card">
            <div class="card-header">
              <span class="card-title">Evaluation Criteria</span>
              <div class="view-toggle" id="criteriaViewToggle">
                <button class="view-btn active" data-view="list" onclick="setCriteriaView('list')"><i class="pi pi-list"></i> List</button>
                <button class="view-btn" data-view="grid" onclick="setCriteriaView('grid')"><i class="pi pi-th-large"></i> Grid</button>
              </div>
            </div>
            
            <div class="filter-bar">
              <input type="text" class="filter-input" placeholder="Search criteria by title, ID, or keywords..." id="criteriaSearch" oninput="filterCriteria()">
              <select class="filter-select" id="criteriaTypeFilter" onchange="filterCriteria()">
                <option value="">All Types</option>
                <option value="Eligibility & Formal">Eligibility & Formal</option>
                <option value="Technical">Technical</option>
                <option value="Financial">Financial</option>
                <option value="Sustainability">Sustainability</option>
              </select>
              <select class="filter-select" id="criteriaMethodFilter" onchange="filterCriteria()">
                <option value="">All Methods</option>
                <option value="Pass/Fail">Pass/Fail</option>
                <option value="Scored">Scored</option>
                <option value="Weighted">Weighted</option>
              </select>
              <select class="filter-select" id="criteriaSourceFilter" onchange="filterCriteria()">
                <option value="">All Sources</option>
                <option value="predefined">Predefined</option>
                <option value="custom">Custom</option>
              </select>
              <button class="btn btn-ghost btn-sm" onclick="resetCriteriaFilters()">Reset</button>
            </div>

            <div class="card-body" style="padding: 0;" id="criteriaListContainer">
              <!-- Criteria will be rendered here -->
            </div>
          </div>
        </div>

        <!-- Specifications Library View -->
        <div class="view-section" id="specifications-view" style="display: none;">
          <div class="page-action-bar">
            <div class="page-title-section">
              <h1 class="page-title">Specifications Library</h1>
              <p class="page-subtitle">Product requirements and specifications organized by UNSPSC code</p>
            </div>
            <div style="display: flex; gap: var(--spacing-sm);">
              <button class="btn btn-secondary"><i class="pi pi-download"></i> Export</button>
              <button class="btn btn-secondary"><i class="pi pi-upload"></i> Import</button>
              <button class="btn btn-primary" onclick="openSpecModal()"><i class="pi pi-plus"></i> Add Specification</button>
            </div>
          </div>

          <!-- Stats -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value">8</div>
              <div class="stat-label">UNSPSC Categories</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">15</div>
              <div class="stat-label">Total Specifications</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">12</div>
              <div class="stat-label">Linked Tenders</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">6</div>
              <div class="stat-label">With Attachments</div>
            </div>
          </div>

          <!-- Specifications List -->
          <div class="content-card">
            <div class="card-header">
              <span class="card-title">Product Specifications by UNSPSC</span>
              <div class="view-toggle" id="specsViewToggle">
                <button class="view-btn active" data-view="list" onclick="setSpecsView('list')"><i class="pi pi-list"></i> List</button>
                <button class="view-btn" data-view="grid" onclick="setSpecsView('grid')"><i class="pi pi-th-large"></i> Grid</button>
              </div>
            </div>
            
            <div class="filter-bar">
              <input type="text" class="filter-input" placeholder="Search by UNSPSC code, description, or tender..." id="specSearch" oninput="filterSpecs()">
              <select class="filter-select" id="specTypeFilter" onchange="filterSpecs()">
                <option value="">All Types</option>
                <option value="attributes">Attributes</option>
                <option value="description">Description</option>
                <option value="upload">Document Upload</option>
              </select>
              <button class="btn btn-ghost btn-sm" onclick="resetSpecFilters()">Reset</button>
            </div>

            <div class="card-body" style="padding: var(--spacing-md);" id="specsListContainer">
              <!-- Specifications will be rendered here -->
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Criteria Modal -->
  <div class="modal" id="criteriaModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="criteriaModalTitle">Add New Criterion</h2>
        <button class="modal-close" onclick="closeCriteriaModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="alert alert-info">
          <i class="pi pi-info-circle"></i>
          Create reusable evaluation criteria for tender evaluation processes
        </div>
        
        <div class="form-grid">
          <div class="form-group full-width">
            <label class="form-label">Criterion Title <span class="required">*</span></label>
            <input type="text" class="form-input" placeholder="e.g., Technical Capacity Assessment">
          </div>
          
          <div class="form-group">
            <label class="form-label">Criterion ID</label>
            <input type="text" class="form-input" placeholder="Auto-generated" readonly style="background: var(--surface-50);">
          </div>
          
          <div class="form-group">
            <label class="form-label">Type <span class="required">*</span></label>
            <select class="form-select">
              <option>Select type...</option>
              <option>Eligibility & Formal</option>
              <option>Technical</option>
              <option>Financial</option>
              <option>Sustainability</option>
              <option>Experience</option>
            </select>
          </div>
          
          <div class="form-group full-width">
            <label class="form-label">Description <span class="required">*</span></label>
            <textarea class="form-textarea" placeholder="Detailed description of the evaluation criterion..."></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">Evaluation Method <span class="required">*</span></label>
            <select class="form-select" id="evalMethodSelect">
              <option>Pass/Fail</option>
              <option>Scored (Points)</option>
              <option>Weighted Score</option>
            </select>
          </div>
          
          <div class="form-group" id="maxPointsGroup" style="display: none;">
            <label class="form-label">Maximum Points</label>
            <input type="number" class="form-input" placeholder="e.g., 10" min="0">
          </div>
          
          <div class="form-group full-width">
            <label class="form-label">Applies To</label>
            <select class="form-select">
              <option>Entire Tender</option>
              <option>Specific Lots</option>
              <option>Specific UNSPSC Codes</option>
            </select>
          </div>
          
          <div class="form-group full-width">
            <label class="form-label">Settings</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox">
                <span>Make this criterion mandatory for all tenders</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" checked>
                <span>Available for all tender templates</span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" onclick="closeCriteriaModal()">Cancel</button>
        <button class="btn btn-secondary">Save as Draft</button>
        <button class="btn btn-primary" onclick="saveCriterion()">Save Criterion</button>
      </div>
    </div>
  </div>

  <!-- Specification Modal -->
  <div class="modal" id="specModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Add New Specification</h2>
        <button class="modal-close" onclick="closeSpecModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="alert alert-info">
          <i class="pi pi-info-circle"></i>
          Create product specifications linked to UNSPSC codes for reuse across tenders
        </div>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">UNSPSC Code <span class="required">*</span></label>
            <input type="text" class="form-input" placeholder="e.g., 43211503">
          </div>
          
          <div class="form-group">
            <label class="form-label">UNSPSC Description</label>
            <input type="text" class="form-input" placeholder="Auto-filled from code" readonly style="background: var(--surface-50);">
          </div>
          
          <div class="form-group full-width">
            <label class="form-label">Specification Type <span class="required">*</span></label>
            <select class="form-select" id="specTypeSelect" onchange="toggleSpecFields()">
              <option value="attributes">Attributes (Key-Value Pairs)</option>
              <option value="description">Free-text Description</option>
              <option value="upload">Document Upload</option>
            </select>
          </div>
          
          <div class="form-group full-width" id="attributesSection">
            <label class="form-label">Attributes</label>
            <div id="attributesList">
              <div style="display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-xs);">
                <input type="text" class="form-input" placeholder="Attribute name" style="flex: 1;">
                <input type="text" class="form-input" placeholder="Value" style="flex: 1;">
                <button class="btn btn-ghost btn-sm">×</button>
              </div>
            </div>
            <button class="btn btn-ghost btn-sm" style="margin-top: var(--spacing-xs);">+ Add Attribute</button>
          </div>
          
          <div class="form-group full-width" id="descriptionSection" style="display: none;">
            <label class="form-label">Specification Description</label>
            <textarea class="form-textarea" placeholder="Enter detailed product specifications..." style="min-height: 150px;"></textarea>
          </div>
          
          <div class="form-group full-width" id="uploadSection" style="display: none;">
            <label class="form-label">Upload Document</label>
            <div style="border: 2px dashed var(--surface-300); border-radius: var(--radius-lg); padding: var(--spacing-lg); text-align: center; background: var(--surface-50);">
              <i class="pi pi-cloud-upload" style="font-size: 32px; color: var(--text-muted); margin-bottom: var(--spacing-sm);"></i>
              <p style="color: var(--text-muted); font-size: 13px;">Drag & drop or click to upload specification document</p>
              <p style="color: var(--text-muted); font-size: 11px;">PDF, DOC, DOCX up to 10MB</p>
            </div>
          </div>
          
          <div class="form-group full-width">
            <label class="form-label">Reference Tender (Optional)</label>
            <input type="text" class="form-input" placeholder="e.g., TND-2024-0621">
            <div class="form-help">Link this specification to a tender for tracking</div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" onclick="closeSpecModal()">Cancel</button>
        <button class="btn btn-primary" onclick="saveSpec()">Save Specification</button>
      </div>
    </div>
  </div>

  <!-- View Details Modal -->
  <div class="modal" id="viewModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="viewModalTitle">View Details</h2>
        <button class="modal-close" onclick="closeViewModal()">×</button>
      </div>
      <div class="modal-body" id="viewModalBody">
        <!-- Content will be dynamically inserted -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" onclick="closeViewModal()">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Data - Evaluation Criteria (Predefined from tender-authoring.html)
    const evaluationCriteria = [
      { 
        id: 'EF-001', 
        type: 'Eligibility & Formal', 
        criteria: "Bidders' nationality check",
        description: 'Verification of bidder nationality against eligible countries list (if restriction set by tender author)', 
        evaluationMethod: 'Pass/Fail',
        appliesTo: 'entire',
        isPredefined: true,
        usageCount: 134
      },
      { 
        id: 'EF-002', 
        type: 'Eligibility & Formal', 
        criteria: 'Bid/Proposal Submission Form',
        description: 'Response validation with flag for deviations on predetermined fields (bid validity, etc.)', 
        evaluationMethod: 'Pass/Fail',
        appliesTo: 'entire',
        isPredefined: true,
        usageCount: 128
      },
      { 
        id: 'EF-003', 
        type: 'Eligibility & Formal', 
        criteria: 'UNGM eligibility check',
        description: 'Verification of UNGM registration for bidder & all parties in JV/consortium', 
        evaluationMethod: 'Pass/Fail',
        appliesTo: 'entire',
        isPredefined: true,
        usageCount: 145
      },
      { 
        id: 'EF-004', 
        type: 'Eligibility & Formal', 
        criteria: 'Completeness of documents',
        description: 'Check for all required documents including validation of dates (bid validity compliance)', 
        evaluationMethod: 'Pass/Fail',
        appliesTo: 'entire',
        isPredefined: true,
        usageCount: 152
      },
      { 
        id: 'EF-005', 
        type: 'Eligibility & Formal', 
        criteria: 'Document format check',
        description: 'Automatic verification that all attachments are readable, non-empty, and not corrupted', 
        evaluationMethod: 'Pass/Fail',
        appliesTo: 'entire',
        isPredefined: true,
        usageCount: 139
      },
      { 
        id: 'EF-006', 
        type: 'Eligibility & Formal', 
        criteria: 'UNOPS claims log check',
        description: 'Verification against UNOPS claims log for any previous issues', 
        evaluationMethod: 'Pass/Fail',
        appliesTo: 'entire',
        isPredefined: true,
        usageCount: 98
      },
      { 
        id: 'EF-007', 
        type: 'Eligibility & Formal', 
        criteria: 'Acceptance of general conditions',
        description: 'Verification that bidder has accepted General Conditions of Contract without material deviations', 
        evaluationMethod: 'Pass/Fail',
        appliesTo: 'entire',
        isPredefined: true,
        usageCount: 156
      },
      // Custom criteria
      { 
        id: 'TC-001', 
        type: 'Technical', 
        criteria: 'Technical Capacity - Past Experience',
        description: 'Bidder must demonstrate experience in implementing similar projects within the last 5 years. Evidence required: minimum of 3 comparable contracts with contract values exceeding USD 500,000 each.', 
        evaluationMethod: 'Pass/Fail',
        appliesTo: 'entire',
        isPredefined: false,
        usageCount: 67,
        status: 'Published'
      },
      { 
        id: 'FC-001', 
        type: 'Financial', 
        criteria: 'Financial Standing - Annual Turnover',
        description: 'Bidder must demonstrate minimum annual turnover of USD 2 million for the last three consecutive fiscal years. Audited financial statements required.', 
        evaluationMethod: 'Scored',
        maxPoints: 10,
        appliesTo: 'entire',
        isPredefined: false,
        usageCount: 45,
        status: 'Published'
      },
      { 
        id: 'SC-001', 
        type: 'Sustainability', 
        criteria: 'Environmental Compliance Certification',
        description: 'Bidder must hold valid ISO 14001 Environmental Management certification or equivalent. Points awarded: ISO 14001 (10 pts), Other recognized certification (5 pts), No certification (0 pts).', 
        evaluationMethod: 'Scored',
        maxPoints: 10,
        appliesTo: 'entire',
        isPredefined: false,
        usageCount: 38,
        status: 'Published'
      },
      { 
        id: 'TC-002', 
        type: 'Technical', 
        criteria: 'Quality Management System',
        description: 'Possession of ISO 9001 Quality Management System certification. Scoring: ISO 9001 certified (5 pts), In process of certification with evidence (2 pts), No certification (0 pts).', 
        evaluationMethod: 'Scored',
        maxPoints: 5,
        appliesTo: 'entire',
        isPredefined: false,
        usageCount: 52,
        status: 'Published'
      },
      { 
        id: 'SC-002', 
        type: 'Sustainability', 
        criteria: 'Gender Equality & Social Inclusion',
        description: 'Evaluate bidder commitment to gender equality. Points: Women in leadership (0-3 pts), Diversity policies (0-3 pts), Equal pay certification (0-2 pts), Inclusive hiring (0-2 pts).', 
        evaluationMethod: 'Scored',
        maxPoints: 10,
        appliesTo: 'entire',
        isPredefined: false,
        usageCount: 0,
        status: 'Pending Review'
      }
    ];

    // Data - Specifications Library (from tender-authoring.html criteriaLibraryData)
    const specificationsData = [
      {
        id: 'CL001',
        tenderRef: 'TND-2024-0856',
        tenderName: 'IT Equipment for Regional Offices',
        unspscCode: '43211503',
        unspscDescription: 'Laptop computers',
        type: 'attributes',
        attributes: [
          { name: 'Processor', value: 'Intel Core i7 12th Gen or equivalent' },
          { name: 'RAM', value: '16GB DDR5' },
          { name: 'Storage', value: '512GB NVMe SSD' },
          { name: 'Display', value: '14" FHD IPS Anti-glare' },
          { name: 'Battery', value: 'Minimum 10 hours' }
        ],
        date: '2024-11-15',
        usageCount: 12,
        awardCount: 9,
        successRate: 75
      },
      {
        id: 'CL002',
        tenderRef: 'TND-2024-0712',
        tenderName: 'Desktop Computers for HQ',
        unspscCode: '43211508',
        unspscDescription: 'Desktop computers',
        type: 'attributes',
        attributes: [
          { name: 'Processor', value: 'Intel Core i5 12th Gen' },
          { name: 'RAM', value: '8GB DDR4' },
          { name: 'Storage', value: '256GB SSD + 1TB HDD' },
          { name: 'Graphics', value: 'Integrated Intel UHD' }
        ],
        date: '2024-10-22',
        usageCount: 8,
        awardCount: 7,
        successRate: 88
      },
      {
        id: 'CL003',
        tenderRef: 'TND-2024-0621',
        tenderName: 'Laptop Procurement for Field Operations',
        unspscCode: '43211503',
        unspscDescription: 'Laptop computers',
        type: 'upload',
        attributes: [],
        description: '',
        uploadedFile: { name: 'Laptop_Technical_Specifications_v2.pdf', size: '2.4 MB' },
        date: '2024-09-08',
        usageCount: 15,
        awardCount: 12,
        successRate: 80
      },
      {
        id: 'CL004',
        tenderRef: 'TND-2024-1023',
        tenderName: 'Network Equipment Upgrade',
        unspscCode: '43222600',
        unspscDescription: 'Network switches',
        type: 'attributes',
        attributes: [
          { name: 'Ports', value: '48 x Gigabit Ethernet' },
          { name: 'PoE Support', value: 'PoE+ (802.3at)' },
          { name: 'Management', value: 'Layer 2/3 managed' },
          { name: 'Stacking', value: 'Yes, up to 8 units' }
        ],
        date: '2024-12-01',
        usageCount: 5,
        awardCount: 4,
        successRate: 80
      },
      {
        id: 'CL005',
        tenderRef: 'TND-2024-0445',
        tenderName: 'Server Infrastructure Renewal',
        unspscCode: '43211600',
        unspscDescription: 'Servers',
        type: 'attributes',
        attributes: [
          { name: 'Processor', value: 'Dual Intel Xeon Gold 6348' },
          { name: 'RAM', value: '256GB DDR4 ECC' },
          { name: 'Storage', value: '8 x 2.4TB SAS SSD RAID' },
          { name: 'Redundancy', value: 'Dual PSU, Hot-swap disks' }
        ],
        date: '2024-08-17',
        usageCount: 3,
        awardCount: 2,
        successRate: 67
      },
      {
        id: 'CL006',
        tenderRef: 'TND-2024-0388',
        tenderName: 'Cleaning Services for Headquarters',
        unspscCode: '76111500',
        unspscDescription: 'Cleaning and janitorial services',
        type: 'description',
        attributes: [],
        description: 'Professional cleaning services for office premises including:\n- Daily general cleaning of all office areas\n- Weekly deep cleaning of kitchens and restrooms\n- Monthly carpet cleaning and window washing\n- Use of eco-friendly, certified cleaning products only\n- Staff must be properly trained and background-checked\n- Service hours: 6:00 PM - 10:00 PM Monday-Friday',
        date: '2024-07-25',
        usageCount: 18,
        awardCount: 16,
        successRate: 89
      },
      {
        id: 'CL007',
        tenderRef: 'TND-2024-0912',
        tenderName: 'Medical Equipment for Field Clinics',
        unspscCode: '42181500',
        unspscDescription: 'Patient examination equipment',
        type: 'attributes',
        attributes: [
          { name: 'Examination Table', value: 'Hydraulic, height-adjustable' },
          { name: 'Blood Pressure Monitor', value: 'Digital, automatic' },
          { name: 'Stethoscope', value: 'Professional grade, dual-head' },
          { name: 'Otoscope/Ophthalmoscope', value: 'LED illumination' }
        ],
        date: '2024-11-28',
        usageCount: 6,
        awardCount: 3,
        successRate: 50
      },
      {
        id: 'CL008',
        tenderRef: 'TND-2024-0567',
        tenderName: 'Vehicle Fleet Procurement',
        unspscCode: '25101500',
        unspscDescription: 'Passenger motor vehicles',
        type: 'upload',
        attributes: [],
        description: '',
        uploadedFile: { name: 'Vehicle_Specifications_4WD_SUV.pdf', size: '5.1 MB' },
        date: '2024-09-30',
        usageCount: 22,
        awardCount: 19,
        successRate: 86
      }
    ];

    // View mode state
    let criteriaViewMode = 'list';
    let specsViewMode = 'list';

    // Toggle menu group expand/collapse
    function toggleMenuGroup(headerElement) {
      const group = headerElement.parentElement;
      group.classList.toggle('collapsed');
    }

    // View switching (Menu navigation)
    function switchView(view) {
      // Update menu items
      document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
      
      // Hide all view sections
      document.getElementById('criteria-view').style.display = 'none';
      document.getElementById('specifications-view').style.display = 'none';
      
      if (view === 'criteria') {
        document.getElementById('menu-criteria').classList.add('active');
        document.getElementById('criteria-view').style.display = 'block';
      } else if (view === 'specifications') {
        document.getElementById('menu-specifications').classList.add('active');
        document.getElementById('specifications-view').style.display = 'block';
      }
    }

    // Set criteria view mode (List/Grid)
    function setCriteriaView(mode) {
      criteriaViewMode = mode;
      // Update toggle buttons
      document.querySelectorAll('#criteriaViewToggle .view-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.view === mode);
      });
      // Re-render with current filter
      filterCriteria();
    }

    // Set specs view mode (List/Grid)
    function setSpecsView(mode) {
      specsViewMode = mode;
      // Update toggle buttons
      document.querySelectorAll('#specsViewToggle .view-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.view === mode);
      });
      // Re-render with current filter
      filterSpecs();
    }

    // Render Criteria List
    function renderCriteriaList(criteria) {
      const container = document.getElementById('criteriaListContainer');
      
      if (criteria.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon"><i class="pi pi-list" style="font-size: 48px;"></i></div>
            <p>No criteria found matching your filters</p>
          </div>
        `;
        return;
      }
      
      if (criteriaViewMode === 'grid') {
        container.innerHTML = `<div class="criteria-grid">${criteria.map(c => `
          <div class="criteria-grid-item">
            <div class="criteria-header" style="margin-bottom: 8px;">
              <div class="criteria-title-section">
                <div class="criteria-title">${c.criteria}</div>
                <div class="criteria-meta">
                  <span>ID: ${c.id}</span>
                  ${c.maxPoints ? `<span>•</span><span>${c.maxPoints} pts</span>` : ''}
                </div>
              </div>
            </div>
            <div class="criteria-description">${c.description}</div>
            <div class="criteria-footer">
              <div class="criteria-tags">
                <span class="tag tag-category">${c.type}</span>
                <span class="tag tag-method">${c.evaluationMethod}</span>
                <span class="tag ${c.isPredefined ? 'tag-predefined' : 'tag-custom'}">${c.isPredefined ? '<i class="pi pi-lock" style="font-size: 10px;"></i> Predefined' : '<i class="pi pi-pencil" style="font-size: 10px;"></i> Custom'}</span>
              </div>
              <div class="usage-info" style="margin-top: 4px;">
                <i class="pi pi-chart-bar" style="font-size: 11px;"></i> ${c.usageCount} tenders
              </div>
            </div>
            <div style="margin-top: auto; padding-top: var(--spacing-sm); display: flex; gap: 6px;">
              <button class="btn btn-ghost btn-sm" style="flex: 1;" onclick="viewCriterion('${c.id}')"><i class="pi pi-eye"></i> View</button>
              ${!c.isPredefined ? `<button class="btn btn-ghost btn-sm" onclick="editCriterion('${c.id}')"><i class="pi pi-pencil"></i></button>` : ''}
            </div>
          </div>
        `).join('')}</div>`;
      } else {
        container.innerHTML = criteria.map(c => `
          <div class="criteria-item">
            <div class="criteria-header">
              <div class="criteria-title-section">
                <div class="criteria-title">${c.criteria}</div>
                <div class="criteria-meta">
                  <span>ID: ${c.id}</span>
                  <span>•</span>
                  <span>${c.isPredefined ? 'System Predefined' : 'Custom'}</span>
                  ${c.maxPoints ? `<span>•</span><span>Max: ${c.maxPoints} pts</span>` : ''}
                </div>
              </div>
              <div style="display: flex; gap: 8px;">
                ${c.isPredefined ? '' : `
                  <button class="btn btn-ghost btn-sm" onclick="editCriterion('${c.id}')"><i class="pi pi-pencil"></i> Edit</button>
                  <button class="btn btn-ghost btn-sm"><i class="pi pi-copy"></i> Duplicate</button>
                `}
<button class="btn btn-ghost btn-sm" onclick="viewCriterion('${c.id}')"><i class="pi pi-eye"></i> View</button>
            </div>
          </div>
          
          <div class="criteria-description">${c.description}</div>
            
            <div class="criteria-footer">
              <div class="criteria-tags">
                <span class="tag tag-category">${c.type}</span>
                <span class="tag tag-method">${c.evaluationMethod}</span>
                <span class="tag ${c.isPredefined ? 'tag-predefined' : 'tag-custom'}">${c.isPredefined ? '<i class="pi pi-lock" style="font-size: 10px;"></i> Predefined' : '<i class="pi pi-pencil" style="font-size: 10px;"></i> Custom'}</span>
                ${c.status === 'Pending Review' ? '<span class="tag tag-status-pending"><i class="pi pi-clock" style="font-size: 10px;"></i> Pending Review</span>' : ''}
              </div>
              <div class="usage-info">
                <i class="pi pi-chart-bar" style="font-size: 11px;"></i> Used in ${c.usageCount} tenders
              </div>
            </div>
          </div>
        `).join('');
      }
    }

    // Filter Criteria
    function filterCriteria() {
      const search = document.getElementById('criteriaSearch').value.toLowerCase();
      const type = document.getElementById('criteriaTypeFilter').value;
      const method = document.getElementById('criteriaMethodFilter').value;
      const source = document.getElementById('criteriaSourceFilter').value;
      
      const filtered = evaluationCriteria.filter(c => {
        const matchesSearch = !search || 
          c.criteria.toLowerCase().includes(search) || 
          c.id.toLowerCase().includes(search) ||
          c.description.toLowerCase().includes(search);
        const matchesType = !type || c.type === type;
        const matchesMethod = !method || c.evaluationMethod === method;
        const matchesSource = !source || 
          (source === 'predefined' && c.isPredefined) || 
          (source === 'custom' && !c.isPredefined);
        
        return matchesSearch && matchesType && matchesMethod && matchesSource;
      });
      
      renderCriteriaList(filtered);
    }

    function resetCriteriaFilters() {
      document.getElementById('criteriaSearch').value = '';
      document.getElementById('criteriaTypeFilter').value = '';
      document.getElementById('criteriaMethodFilter').value = '';
      document.getElementById('criteriaSourceFilter').value = '';
      renderCriteriaList(evaluationCriteria);
    }

    // Group specifications by UNSPSC
    function groupSpecsByUnspsc() {
      const grouped = {};
      specificationsData.forEach(spec => {
        if (!grouped[spec.unspscCode]) {
          grouped[spec.unspscCode] = {
            code: spec.unspscCode,
            description: spec.unspscDescription,
            versions: []
          };
        }
        grouped[spec.unspscCode].versions.push(spec);
      });
      return Object.values(grouped);
    }

    // Helper function to get success rate class
    function getSuccessRateClass(rate) {
      if (rate >= 75) return 'high';
      if (rate >= 50) return 'medium';
      return 'low';
    }

    // Render Specifications List
    function renderSpecsList(groups) {
      const container = document.getElementById('specsListContainer');
      
      if (groups.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon"><i class="pi pi-cog" style="font-size: 48px;"></i></div>
            <p>No specifications found matching your filters</p>
          </div>
        `;
        return;
      }

      if (specsViewMode === 'grid') {
        // Flatten all specs for grid view
        const allSpecs = groups.flatMap(g => g.versions);
        container.innerHTML = `<div class="spec-grid">${allSpecs.map(v => `
          <div class="spec-grid-item">
            <div class="spec-grid-header">
              <div>
                <div class="spec-grid-code">${v.unspscCode}</div>
                <div class="spec-grid-desc">${v.unspscDescription}</div>
              </div>
              <span class="success-rate ${getSuccessRateClass(v.successRate)}">
                <i class="pi pi-chart-line" style="font-size: 10px;"></i> ${v.successRate}%
              </span>
            </div>
            <div class="spec-version-tender" style="font-size: 12px; margin-bottom: 4px;">${v.tenderName}</div>
            <div class="spec-version-meta" style="margin-bottom: 8px;">
              <span>${v.tenderRef}</span>
              <span>•</span>
              <span>${v.date}</span>
            </div>
            <div class="spec-version-type" style="margin-bottom: 8px;">
              ${v.type === 'attributes' ? '<i class="pi pi-list" style="font-size: 11px;"></i> Attributes' : 
                v.type === 'description' ? '<i class="pi pi-file-edit" style="font-size: 11px;"></i> Description' : 
                '<i class="pi pi-paperclip" style="font-size: 11px;"></i> Document'}
            </div>
            <div class="spec-stats">
              <div class="spec-stat">
                <span class="spec-stat-value">${v.usageCount}</span>
                <span class="spec-stat-label">Tenders</span>
              </div>
              <div class="spec-stat">
                <span class="spec-stat-value">${v.awardCount}</span>
                <span class="spec-stat-label">Awards</span>
              </div>
              <div class="spec-stat">
                <span class="spec-stat-value">${v.successRate}%</span>
                <span class="spec-stat-label">Success</span>
              </div>
            </div>
            <div style="margin-top: var(--spacing-sm); display: flex; gap: 6px;">
              <button class="btn btn-ghost btn-sm" style="flex: 1;" onclick="useSpec('${v.id}')"><i class="pi pi-check"></i> Use</button>
              <button class="btn btn-ghost btn-sm" onclick="viewSpec('${v.id}')"><i class="pi pi-eye"></i></button>
            </div>
          </div>
        `).join('')}</div>`;
      } else {
        container.innerHTML = groups.map(group => `
          <div class="spec-group" onclick="toggleSpecGroup(this)">
            <div class="spec-group-header">
              <div class="spec-group-title">
                <span class="spec-group-code">${group.code}</span>
                <span class="spec-group-desc">- ${group.description}</span>
              </div>
              <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                <span class="spec-group-badge">${group.versions.length} version${group.versions.length > 1 ? 's' : ''}</span>
                <i class="pi pi-chevron-down chevron"></i>
              </div>
            </div>
            <div class="spec-group-content">
              ${group.versions.map(v => `
                <div class="spec-version" onclick="event.stopPropagation();">
                  <div class="spec-version-info">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                      <div class="spec-version-tender">${v.tenderName}</div>
                      <span class="success-rate ${getSuccessRateClass(v.successRate)}">
                        <i class="pi pi-chart-line" style="font-size: 10px;"></i> ${v.successRate}% success
                      </span>
                    </div>
                    <div class="spec-version-meta">
                      <span>Ref: ${v.tenderRef}</span>
                      <span>•</span>
                      <span>Added: ${v.date}</span>
                      <span>•</span>
                      <span><i class="pi pi-briefcase" style="font-size: 10px;"></i> ${v.usageCount} tenders</span>
                      <span>•</span>
                      <span><i class="pi pi-check-circle" style="font-size: 10px;"></i> ${v.awardCount} awards</span>
                    </div>
                    <div class="spec-version-type">
                      ${v.type === 'attributes' ? '<i class="pi pi-list" style="font-size: 12px;"></i> Attributes-based specification' : 
                        v.type === 'description' ? '<i class="pi pi-file-edit" style="font-size: 12px;"></i> Description-based specification' : 
                        '<i class="pi pi-paperclip" style="font-size: 12px;"></i> Document attachment'}
                    </div>
                    ${v.type === 'attributes' ? `
                      <div class="spec-attributes">
                        ${v.attributes.map(a => `
                          <span class="spec-attr">
                            <span class="spec-attr-name">${a.name}:</span>
                            <span class="spec-attr-value">${a.value}</span>
                          </span>
                        `).join('')}
                      </div>
                    ` : v.type === 'description' ? `
                      <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px; white-space: pre-line; max-height: 60px; overflow: hidden;">${v.description}</div>
                    ` : `
                      <div style="display: flex; align-items: center; gap: 8px; margin-top: 8px; font-size: 12px; color: var(--text-secondary);">
                        <i class="pi pi-file-pdf" style="color: var(--danger-500);"></i>
                        <span>${v.uploadedFile.name}</span>
                        <span>(${v.uploadedFile.size})</span>
                      </div>
                    `}
                  </div>
                  <div style="display: flex; gap: 8px; align-items: flex-start;">
                    <button class="btn btn-ghost btn-sm" onclick="useSpec('${v.id}')"><i class="pi pi-check"></i> Use</button>
                    <button class="btn btn-ghost btn-sm" onclick="viewSpec('${v.id}')"><i class="pi pi-eye"></i> View</button>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        `).join('');
      }
    }

    function toggleSpecGroup(element) {
      element.classList.toggle('expanded');
    }

    // Filter Specifications
    function filterSpecs() {
      const search = document.getElementById('specSearch').value.toLowerCase();
      const type = document.getElementById('specTypeFilter').value;
      
      const filteredSpecs = specificationsData.filter(s => {
        const matchesSearch = !search || 
          s.unspscCode.toLowerCase().includes(search) || 
          s.unspscDescription.toLowerCase().includes(search) ||
          s.tenderName.toLowerCase().includes(search) ||
          s.tenderRef.toLowerCase().includes(search);
        const matchesType = !type || s.type === type;
        
        return matchesSearch && matchesType;
      });
      
      // Re-group filtered specs
      const grouped = {};
      filteredSpecs.forEach(spec => {
        if (!grouped[spec.unspscCode]) {
          grouped[spec.unspscCode] = {
            code: spec.unspscCode,
            description: spec.unspscDescription,
            versions: []
          };
        }
        grouped[spec.unspscCode].versions.push(spec);
      });
      
      renderSpecsList(Object.values(grouped));
    }

    function resetSpecFilters() {
      document.getElementById('specSearch').value = '';
      document.getElementById('specTypeFilter').value = '';
      renderSpecsList(groupSpecsByUnspsc());
    }

    // Modal functions
    function openCriteriaModal() {
      document.getElementById('criteriaModal').classList.add('active');
    }

    function closeCriteriaModal() {
      document.getElementById('criteriaModal').classList.remove('active');
    }

    function openSpecModal() {
      document.getElementById('specModal').classList.add('active');
    }

    function closeSpecModal() {
      document.getElementById('specModal').classList.remove('active');
    }

    function saveCriterion() {
      alert('Criterion saved successfully!');
      closeCriteriaModal();
    }

    function saveSpec() {
      alert('Specification saved successfully!');
      closeSpecModal();
    }

    function editCriterion(id) {
      document.getElementById('criteriaModalTitle').textContent = 'Edit Criterion';
      openCriteriaModal();
    }

    function useSpec(id) {
      alert('Specification selected for use in current tender!');
    }

    // View Criterion Details
    function viewCriterion(id) {
      const criterion = evaluationCriteria.find(c => c.id === id);
      if (!criterion) return;
      
      document.getElementById('viewModalTitle').textContent = 'Criterion Details';
      document.getElementById('viewModalBody').innerHTML = `
        <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
          <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div>
              <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 4px;">${criterion.criteria}</h3>
              <div style="font-size: 13px; color: var(--text-muted);">ID: ${criterion.id}</div>
            </div>
            <span class="tag ${criterion.isPredefined ? 'tag-predefined' : 'tag-custom'}">
              ${criterion.isPredefined ? '<i class="pi pi-lock" style="font-size: 10px;"></i> Predefined' : '<i class="pi pi-pencil" style="font-size: 10px;"></i> Custom'}
            </span>
          </div>
          
          <div style="display: flex; gap: var(--spacing-sm); flex-wrap: wrap;">
            <span class="tag tag-category">${criterion.type}</span>
            <span class="tag tag-method">${criterion.evaluationMethod}</span>
            ${criterion.maxPoints ? `<span class="tag tag-type">Max: ${criterion.maxPoints} pts</span>` : ''}
            ${criterion.status === 'Pending Review' ? '<span class="tag tag-status-pending"><i class="pi pi-clock" style="font-size: 10px;"></i> Pending Review</span>' : ''}
          </div>
          
          <div>
            <label style="font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; margin-bottom: 6px; display: block;">Description</label>
            <div style="background: var(--surface-50); padding: var(--spacing-md); border-radius: var(--radius-md); font-size: 14px; line-height: 1.6;">
              ${criterion.description}
            </div>
          </div>
          
          <div style="display: flex; gap: var(--spacing-lg);">
            <div>
              <label style="font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase;">Applies To</label>
              <div style="font-size: 14px; margin-top: 4px;">${criterion.appliesTo === 'entire' ? 'Entire Tender' : criterion.appliesTo}</div>
            </div>
            <div>
              <label style="font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase;">Usage</label>
              <div style="font-size: 14px; margin-top: 4px;"><i class="pi pi-chart-bar" style="font-size: 12px;"></i> ${criterion.usageCount} tenders</div>
            </div>
          </div>
        </div>
      `;
      document.getElementById('viewModal').classList.add('active');
    }

    // View Specification Details
    function viewSpec(id) {
      const spec = specificationsData.find(s => s.id === id);
      if (!spec) return;
      
      document.getElementById('viewModalTitle').textContent = 'Specification Details';
      document.getElementById('viewModalBody').innerHTML = `
        <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
          <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div>
              <div style="font-size: 14px; font-weight: 600; color: var(--primary-600); margin-bottom: 2px;">${spec.unspscCode}</div>
              <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">${spec.unspscDescription}</h3>
            </div>
            <span class="success-rate ${getSuccessRateClass(spec.successRate)}">
              <i class="pi pi-chart-line" style="font-size: 10px;"></i> ${spec.successRate}% success
            </span>
          </div>
          
          <div style="background: var(--surface-50); padding: var(--spacing-md); border-radius: var(--radius-md);">
            <div style="font-size: 14px; font-weight: 500; margin-bottom: 4px;">${spec.tenderName}</div>
            <div style="font-size: 12px; color: var(--text-muted);">
              Ref: ${spec.tenderRef} • Added: ${spec.date}
            </div>
          </div>
          
          <div style="display: flex; gap: var(--spacing-lg);">
            <div class="spec-stat" style="align-items: flex-start;">
              <span class="spec-stat-label">Tenders Used</span>
              <span class="spec-stat-value">${spec.usageCount}</span>
            </div>
            <div class="spec-stat" style="align-items: flex-start;">
              <span class="spec-stat-label">Awards</span>
              <span class="spec-stat-value">${spec.awardCount}</span>
            </div>
            <div class="spec-stat" style="align-items: flex-start;">
              <span class="spec-stat-label">Success Rate</span>
              <span class="spec-stat-value">${spec.successRate}%</span>
            </div>
          </div>
          
          <div>
            <label style="font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; margin-bottom: 8px; display: block;">
              ${spec.type === 'attributes' ? 'Specification Attributes' : spec.type === 'description' ? 'Specification Description' : 'Attached Document'}
            </label>
            ${spec.type === 'attributes' ? `
              <div style="display: flex; flex-direction: column; gap: 8px;">
                ${spec.attributes.map(a => `
                  <div style="display: flex; justify-content: space-between; padding: 10px 12px; background: var(--surface-50); border-radius: var(--radius-sm); border-left: 3px solid var(--primary-400);">
                    <span style="font-weight: 500; color: var(--text-secondary);">${a.name}</span>
                    <span style="color: var(--text-primary);">${a.value}</span>
                  </div>
                `).join('')}
              </div>
            ` : spec.type === 'description' ? `
              <div style="background: var(--surface-50); padding: var(--spacing-md); border-radius: var(--radius-md); font-size: 14px; line-height: 1.6; white-space: pre-line;">
                ${spec.description}
              </div>
            ` : `
              <div style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-md); background: var(--surface-50); border-radius: var(--radius-md);">
                <i class="pi pi-file-pdf" style="font-size: 24px; color: var(--danger-500);"></i>
                <div>
                  <div style="font-size: 14px; font-weight: 500;">${spec.uploadedFile.name}</div>
                  <div style="font-size: 12px; color: var(--text-muted);">${spec.uploadedFile.size}</div>
                </div>
                <button class="btn btn-ghost btn-sm" style="margin-left: auto;"><i class="pi pi-download"></i> Download</button>
              </div>
            `}
          </div>
        </div>
      `;
      document.getElementById('viewModal').classList.add('active');
    }

    // Close View Modal
    function closeViewModal() {
      document.getElementById('viewModal').classList.remove('active');
    }

    function toggleSpecFields() {
      const type = document.getElementById('specTypeSelect').value;
      document.getElementById('attributesSection').style.display = type === 'attributes' ? 'block' : 'none';
      document.getElementById('descriptionSection').style.display = type === 'description' ? 'block' : 'none';
      document.getElementById('uploadSection').style.display = type === 'upload' ? 'block' : 'none';
    }

    // Evaluation method handler
    document.getElementById('evalMethodSelect')?.addEventListener('change', function() {
      const maxPointsGroup = document.getElementById('maxPointsGroup');
      maxPointsGroup.style.display = this.value.includes('Scored') || this.value.includes('Weighted') ? 'block' : 'none';
    });

    // Close modals on outside click
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', function(e) {
        if (e.target === this) {
          this.classList.remove('active');
        }
      });
    });

    // Close modal on Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        document.querySelectorAll('.modal.active').forEach(modal => {
          modal.classList.remove('active');
        });
      }
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      renderCriteriaList(evaluationCriteria);
      renderSpecsList(groupSpecsByUnspsc());
    });
  </script>
</body>
</html>

